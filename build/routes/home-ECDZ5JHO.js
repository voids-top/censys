import"/censys/build/_shared/chunk-URNZPFSF.js";import{c as oe,d as ae,e as se,r as ne}from"/censys/build/_shared/chunk-B5UNN2SO.js";import"/censys/build/_shared/chunk-TUDXVIEL.js";import"/censys/build/_shared/chunk-7C4UGOB7.js";import"/censys/build/_shared/chunk-EI6HYVQX.js";import"/censys/build/_shared/chunk-J22KWXE5.js";import"/censys/build/_shared/chunk-JDWADSGD.js";import{b as z}from"/censys/build/_shared/chunk-EMHGEENV.js";import"/censys/build/_shared/chunk-4WX73TCZ.js";import"/censys/build/_shared/chunk-CJIEOTRC.js";import"/censys/build/_shared/chunk-5OP2ERYU.js";import"/censys/build/_shared/chunk-LOKTUJJ3.js";import"/censys/build/_shared/chunk-BU2LL35M.js";import"/censys/build/_shared/chunk-IRHQADG7.js";import"/censys/build/_shared/chunk-KSE2ZBRQ.js";import"/censys/build/_shared/chunk-FP2KPINM.js";import"/censys/build/_shared/chunk-VKYVKQW2.js";import"/censys/build/_shared/chunk-OQUAXVLV.js";import"/censys/build/_shared/chunk-RWVGPSU7.js";import{A as ie}from"/censys/build/_shared/chunk-4DOFQKLI.js";import"/censys/build/_shared/chunk-MB47ZWHU.js";import"/censys/build/_shared/chunk-URNZPFSF.js";import{a as v}from"/censys/build/_shared/chunk-WK35ORSL.js";import"/censys/build/_shared/chunk-XTODG4BZ.js";import"/censys/build/_shared/chunk-426SZY5O.js";import"/censys/build/_shared/chunk-HPK4AUA3.js";import"/censys/build/_shared/chunk-TTVDHAYB.js";import"/censys/build/_shared/chunk-6EMU7K4F.js";import{a as re}from"/censys/build/_shared/chunk-M5RKE22T.js";import"/censys/build/_shared/chunk-ZP3FOFQD.js";import{a as ee,b as te}from"/censys/build/_shared/chunk-E7FS2ZQL.js";import{c as Q,f as $,h as X}from"/censys/build/_shared/chunk-ST66DGSY.js";import{a as M}from"/censys/build/_shared/chunk-QJVHIZ52.js";import"/censys/build/_shared/chunk-N7X32FEJ.js";import{$ as Y,A as u,B as _,W as H,X as J,Y as W,_ as V,gb as U,la as j,ma as Z,na as K,oa as q,sa as N,ta as A,z as c}from"/censys/build/_shared/chunk-DN2SN5ZC.js";import"/censys/build/_shared/chunk-F5K75D4K.js";import"/censys/build/_shared/chunk-44DVAK2X.js";import"/censys/build/_shared/chunk-OLCKCRUU.js";import{C as B,c as F,m as G}from"/censys/build/_shared/chunk-JMZ2MZXD.js";import{b as f}from"/censys/build/_shared/chunk-ZST4CTCB.js";import{a as x}from"/censys/build/_shared/chunk-MOHCJWAV.js";import{e as k}from"/censys/build/_shared/chunk-2TWE7TSA.js";var Ee=k(x(),1);var le="/censys/build/_assets/onboarding_logo-5FAIXQHA.svg";var I="/api/user/profile",P="onboarding-modal-state",de="onboarding-modal",E={label:"I prefer not to share",value:"prefer_no_answer"},b=[{label:"",options:[{label:"Academic Researcher",value:"academic_researcher"},{label:"Detection Engineer",value:"detection_engineer"},{label:"Incident Responder",value:"incident_responder"},{label:"Industry Researcher",value:"industry_researcher"},{label:"Pentester or Red Team",value:"pen_tester"},{label:"SOC Analyst",value:"soc_analyst"},{label:"Student",value:"student"},{label:"Threat Hunter",value:"threat_hunter"},{label:"Threat Intel Analyst",value:"threat_analyst"},{label:"Vulnerability Manager",value:"vuln_manager"}]},{label:"",options:[{label:"Other - my role is not listed",value:"other"},E]}],R={label:"I prefer not to share",value:"prefer_no_answer"},L=[{label:"",options:[{label:"Triaging alerts",value:"alert_triage"},{label:"Investigating a security incident",value:"incident_investigation"},{label:"Understanding my attack surface",value:"attack_surface_analysis"},{label:"Fingerprinting adversary infrastructure",value:"adversary_fingerprinting"},{label:"Identifying potential vulnerabilities",value:"vuln_identification"},{label:"Producing threat intelligence",value:"threat_intelligence"},{label:"Conducting academic research",value:"academic_research"},{label:"Just exploring",value:"exploring"}]},{label:"",options:[{label:"Other - my use-case is not listed",value:"other"},R]}];var n={modalContent:"gUEDS",content:"dx-5r",header:"RY2O-",footer:"Rosvs",actions:"Vs6P2",modalText:"KM2GI",divider:"gBJWC"};var l=k(x(),1);var pe=M.object({isDismissed:M.boolean()});var me="jobRoles",ce="useCases";function ue(e,o){for(let s of e){let i=s.options.find(r=>r.value===o);if(i)return i}}var _e=e=>ue(b,e),be=e=>ue(L,e);function Le(){se(P,{isDismissed:!0})}function he(e,o,s){let[i,r]=(0,l.useState)(!1),d=B(),[C,h]=(0,l.useState)(()=>o?o.map(_e).filter(v):[]),[p,g]=(0,l.useState)(()=>s?s.map(be).filter(v):[]),S=(0,l.useCallback)(m=>{h(y=>m.includes(E)?y.includes(E)?m.filter(T=>T!==E):[E]:m)},[]),Oe=(0,l.useCallback)(m=>{g(y=>m.includes(R)?y.includes(R)?m.filter(T=>T!==R):[R]:m)},[]);(0,l.useEffect)(()=>{let m=ae(P,pe,{isDismissed:!1}),y=e&&!o?.length&&!s?.length&&!m.isDismissed;r(y)},[]);let ye=(0,l.useCallback)(()=>{Le(),r(!1)},[]);return{isLoading:d.state!=="idle",isOpen:i,selectedRoles:C,selectedUseCases:p,onChangeRoles:S,onChangeUseCases:Oe,onSubmit:Se(d,C,p,ye)}}function Se(e,o,s,i){let r=z(),d=$(),C=d?`${I}?${ee}=${d.organizationId}`:I;return(0,l.useCallback)(()=>{let h=new FormData;h.set("csrf",r);for(let p of o)h.append(me,p.value);for(let p of s)h.append(ce,p.value);e.submit(h,{method:"post",action:C}),i?.()},[C,r,i,o,s,e])}var t=k(f(),1),Te={className:n.modalContent};function D({isLoggedIn:e,jobRoles:o,useCases:s}){let{isOpen:i,isLoading:r,onChangeRoles:d,onChangeUseCases:C,onSubmit:h,selectedRoles:p,selectedUseCases:g}=he(e,o,s),S=p.length===0||g.length===0;return i?(0,t.jsx)(q,{contentProps:Te,"data-testid":de,includeCloseButton:!1,modal:!0,open:!0,size:j.MEDIUM,headerBorder:Z.NONE,footerBorder:K.LIGHT,header:(0,t.jsxs)("div",{className:n.header,children:[(0,t.jsx)("img",{className:n.logo,alt:"A variant of the Censys logo",src:le}),(0,t.jsx)(u,{variant:c.H1_SUB_HEADLINE,className:n.modalText,children:"Welcome to Censys!"}),(0,t.jsx)(u,{variant:c.DEFAULT,className:n.modalText,children:"Let's finish setting up your account by answering a few questions."})]}),footerActions:(0,t.jsxs)("div",{className:n.footer,children:[(0,t.jsx)(u,{variant:c.H6,className:n.modalText,children:"How will Censys use this information?"}),(0,t.jsx)(u,{variant:c.SMALL,className:n.modalText,children:"To tailor the platform and provide actionable context based on your security role."})]}),children:(0,t.jsxs)("div",{className:n.content,children:[(0,t.jsx)(A,{"data-testid":"job-role-multiselect",name:"job-role-multiselect",optionGroups:b,size:N.LARGE,placeholder:"What are your primary job roles?",onChange:d,selectedOptions:p,contentLeft:(0,t.jsx)(U,{iconName:"user-3",iconMode:"line"})}),(0,t.jsx)(A,{"data-testid":"use-case-multiselect",name:"use-case-multiselect",optionGroups:L,size:N.LARGE,placeholder:"What do you normally use Censys for?",onChange:C,selectedOptions:g,contentLeft:(0,t.jsx)(U,{iconName:"search-eye",iconMode:"line"})}),(0,t.jsx)("div",{className:n.actions,children:(0,t.jsx)(Y,{"data-testid":"onboarding-modal-submit-button",disabled:S||r,isLoading:r,onClick:h,size:V.MEDIUM,variant:_.PRIMARY,children:"Submit"})})]})}):null}var ke="Free Plan";var w={container:"imoA2",truncatedOrgName:"tENdZ"};var O=k(f(),1);function Ce({organizationName:e}){return(0,O.jsxs)("div",{className:w.container,children:[(0,O.jsx)(re,{variant:"dot"}),(0,O.jsx)(u,{variant:c.DEFAULT_SEMIBOLD,className:w.truncatedOrgName,children:e||ke}),(0,O.jsx)(ie,{buttonVariant:_.TERTIARY})]})}var fe={greetingContainer:"CYStA"};var a=k(f(),1);function Re(){let{accessState:e}=(0,Ee.useContext)(Q),o=F(),s=X("user-job-role-modal"),i=[{to:"/home",label:"Getting Started"},{to:"/home/examples",label:"Example Queries"},{to:"/home/definitions",routePattern:"/home/definitions",label:"Data Definitions"},{to:"/home/query-converter",routePattern:"/home/query-converter",label:"Query Converter"}];return(0,a.jsx)(ne,{breadcrumbs:[{pathName:"Home"}],slots:{header:e?.firstName&&(0,a.jsxs)("div",{className:fe.greetingContainer,children:[(0,a.jsxs)(u,{variant:c.H1,children:["Welcome, ",e.firstName,"!"]}),e.availableOrganizations&&(0,a.jsx)(Ce,{organizationName:e.organization?.displayName})]}),navTabs:(0,a.jsx)(H,{value:o.pathname,children:(0,a.jsx)(J,{children:i.map(({to:r,label:d})=>(0,a.jsx)(W,{value:r,asChild:!0,children:(0,a.jsx)(te,{to:r,prefetch:"intent",children:d})},r))})})},children:(0,a.jsxs)(oe,{testId:"home",children:[s&&(0,a.jsx)(D,{isLoggedIn:!!e,jobRoles:e?.jobRoles,useCases:e?.platformUseCases}),(0,a.jsx)(G,{})]})})}function Me({currentUrl:e,nextUrl:o}){return e.pathname!==o.pathname}export{Re as default,Me as shouldRevalidate};
