import{a as co}from"/censys/build/_shared/chunk-GIECLT6I.js";import{a as io,b as ro,c as lo,d as so}from"/censys/build/_shared/chunk-A6QLI746.js";import{c as ze,d as ao}from"/censys/build/_shared/chunk-5DIHBHL2.js";import"/censys/build/_shared/chunk-URNZPFSF.js";import{a as oo}from"/censys/build/_shared/chunk-AGLMH5N7.js";import{a as no}from"/censys/build/_shared/chunk-QSPTGMZY.js";import{a as Ge}from"/censys/build/_shared/chunk-6HSN5L3Z.js";import{a as to}from"/censys/build/_shared/chunk-XZG736LL.js";import{a as Wo}from"/censys/build/_shared/chunk-PIXRIREJ.js";import{a as eo}from"/censys/build/_shared/chunk-RF63Q666.js";import"/censys/build/_shared/chunk-7Y4HAY5E.js";import{a as jt}from"/censys/build/_shared/chunk-5NXROAJD.js";import{b as Zt}from"/censys/build/_shared/chunk-DDZX7K4F.js";import{a as Qt}from"/censys/build/_shared/chunk-ULGJ3ZYU.js";import{a as Xt}from"/censys/build/_shared/chunk-5PS6SCVZ.js";import{a as Ko}from"/censys/build/_shared/chunk-EAJKCKTG.js";import"/censys/build/_shared/chunk-FYP76FCX.js";import{a as Jt}from"/censys/build/_shared/chunk-LQXVLPA4.js";import"/censys/build/_shared/chunk-OKZWZKQL.js";import{a as zt}from"/censys/build/_shared/chunk-6GD6JLZ2.js";import{c as Ut,l as Wt,m as Gt}from"/censys/build/_shared/chunk-ZMYU5ULY.js";import"/censys/build/_shared/chunk-WMKH6XX3.js";import"/censys/build/_shared/chunk-3JU625ZU.js";import"/censys/build/_shared/chunk-I5BA26X4.js";import{c as K}from"/censys/build/_shared/chunk-RAMDI2JB.js";import{a as xt}from"/censys/build/_shared/chunk-O3SGPCPK.js";import"/censys/build/_shared/chunk-CJIEOTRC.js";import"/censys/build/_shared/chunk-JLZAPT5W.js";import"/censys/build/_shared/chunk-FSKKJDZY.js";import"/censys/build/_shared/chunk-M7IO6GB7.js";import{F as Kt,a as Pt,e as Ht,f as Bt}from"/censys/build/_shared/chunk-W5Y6TOHF.js";import"/censys/build/_shared/chunk-AEP7YWHE.js";import"/censys/build/_shared/chunk-URNZPFSF.js";import"/censys/build/_shared/chunk-WK35ORSL.js";import{a as Me}from"/censys/build/_shared/chunk-HG7D3PDC.js";import"/censys/build/_shared/chunk-ZKAH2G64.js";import{c as Ct}from"/censys/build/_shared/chunk-G6DKMBFA.js";import{a as qt}from"/censys/build/_shared/chunk-EYKPJWWG.js";import"/censys/build/_shared/chunk-YZ2VHXR4.js";import{a as $t}from"/censys/build/_shared/chunk-WNJFRA3F.js";import"/censys/build/_shared/chunk-KIDII43I.js";import"/censys/build/_shared/chunk-RPAGMMSK.js";import"/censys/build/_shared/chunk-2G5R6E4Q.js";import"/censys/build/_shared/chunk-6XVOHWMX.js";import{g as Ft,l as wt,m as kt,o as Vt,p as Yt}from"/censys/build/_shared/chunk-HLRAT4GD.js";import"/censys/build/_shared/chunk-HPK4AUA3.js";import{a as Dt}from"/censys/build/_shared/chunk-W2GUOEY7.js";import{h as Oe,k as Rt}from"/censys/build/_shared/chunk-FQAS3FYV.js";import{b as le}from"/censys/build/_shared/chunk-P2FXGQA2.js";import{c as Ie,e as bt}from"/censys/build/_shared/chunk-FH7VNUY3.js";import{c as ft}from"/censys/build/_shared/chunk-B7DSLLNE.js";import"/censys/build/_shared/chunk-GYDCO7LL.js";import{c as _e,g as I}from"/censys/build/_shared/chunk-KMD3IRPL.js";import"/censys/build/_shared/chunk-Y7XN4DST.js";import{A as l,Aa as Ot,B as i,Ba as re,C as S,Da as _t,Ea as Mt,F as Be,G as ht,I as Tt,Oa as de,Pa as Ae,Ta as Q,aa as O,bb as Se,da as vt,fa as Ee,ga as Ne,ha as gt,ia as Ye,ja as Ke,ka as ae,na as ie,ra as yt,sa as We,ua as Lt,va as Et,wa as Nt,xa as At,y as Le,ya as St,z as A,za as It}from"/censys/build/_shared/chunk-UYH4GQ7Z.js";import{d as Y}from"/censys/build/_shared/chunk-6URBRDCL.js";import{B as ut,a as ct,i as x,j as pt,k as dt,p as ye,t as F,z as mt}from"/censys/build/_shared/chunk-Q6RLBVJI.js";import{a as q,c as s}from"/censys/build/_shared/chunk-XJAPXWKX.js";import{d as n}from"/censys/build/_shared/chunk-2QEWK57A.js";var m=n(q(),1);var mo=n(q(),1);var po={limitMessage:"QsoRD"};var J=n(s(),1);function $e(){let e=(0,mo.useContext)(ft),t=bt()?.currentPlanType;return(0,J.jsx)("div",{className:po.limitMessage,children:(0,J.jsxs)(Ne,{variant:Ee.INFO,children:[t==="Enterprise"&&(0,J.jsx)("span",{children:"You reached the maximum number of collections for your plan. Contact your account representative to purchase additional collections."}),t==="Starter"&&(0,J.jsxs)("span",{children:["You reached the maximum number of collections for your plan."," ",(0,J.jsx)(Dt,{href:Bt(e),isExternal:!0,children:"Contact us"})," ","to upgrade to Enterprise Tier."]})]})})}var Z={textContainer:"AZeEt",loadingSpinner:"Nf6Bq",gray8:"Mg1Dh"};var y=n(s(),1);function uo({title:e,count:t,limit:o,isLoading:r=!1}){let d=o;return(0,y.jsxs)("span",{className:Z.textContainer,children:[(0,y.jsx)(i,{variant:l.H5,children:`${e}:`}),r?(0,y.jsx)("div",{className:Z.loadingSpinner,children:(0,y.jsx)(Tt,{size:ht.SMALL})}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i,{variant:l.H4,className:Z.gray8,children:t===-1?"N/A":t.toLocaleString()}),d&&t!==-1&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i,{variant:l.H5,className:Z.gray8,children:"/"}),o===-1||o===Number.MAX_SAFE_INTEGER?(0,y.jsx)(i,{variant:l.H5,className:Z.gray8,children:"Unlimited"}):(0,y.jsx)(i,{variant:l.H5,className:Z.gray8,children:Yt(o).toLocaleString()})]})]})]})}var Co={collectionsList:"_2jUcW"};var me=n(q(),1);var qe=3e4;var be="archive-collection-form",fo="delete-collection-form",ho="pin-collection-form",To="unpin-collection-form";var yn=["Name"];var a=n(s(),1);function vo({collectionId:e,fetcherKey:t,formRef:o}){return(0,a.jsxs)(F,{method:"post",ref:o,children:[(0,a.jsx)("input",{type:"hidden",name:"collection_id",value:e,readOnly:!0}),(0,a.jsx)("input",{type:"hidden",name:"fetcherKey",value:t,readOnly:!0}),(0,a.jsx)(K,{})]})}function go({label:e,formRef:t}){return(0,a.jsx)(re,{asChild:!0,children:(0,a.jsxs)("button",{onClick:()=>{t.current?.requestSubmit()},role:"menuitem",children:[(0,a.jsx)(A,{name:"pushpin-2",mode:"line"}),e]})})}function Qe({collection:e,isLoading:t,isCollectionsLimitReached:o,setCollectionToArchive:r,setCollectionToUnarchive:d,setCollectionToDelete:h}){let{accessState:C}=(0,me.useContext)(Ie),V=Pt(C,1),L=C?.userId===e.created_by,z=V||L,g=e.status===I.Status.ARCHIVED,H=e.status===I.Status.POPULATING,R=(0,me.useRef)(null),$=(0,me.useRef)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(vo,{collectionId:e.collection_id,fetcherKey:ho,formRef:R}),(0,a.jsx)(vo,{collectionId:e.collection_id,fetcherKey:To,formRef:$}),(0,a.jsxs)(Nt,{modal:!1,children:[(0,a.jsx)(St,{asChild:!0,children:(0,a.jsx)(vt,{iconName:"more-2",iconMode:"line",variant:S.GHOST,"aria-label":"More options"})}),(0,a.jsx)(At,{children:(0,a.jsxs)(It,{align:"end",children:[(0,a.jsx)(_t,{children:(0,a.jsx)(i,{variant:l.H5,children:"Actions"})}),(0,a.jsxs)(Ot,{children:[e.pinned_at?(0,a.jsx)(go,{label:"Unpin",formRef:$}):(0,a.jsx)(go,{label:"Pin",formRef:R}),!g&&!H&&(0,a.jsx)(re,{asChild:!0,children:(0,a.jsxs)("button",{onClick:()=>r(e.collection_id),role:"menuitem",children:[(0,a.jsx)(A,{name:"archive",mode:"line"}),"Archive"]})}),z&&!g&&!H&&(0,a.jsx)(re,{asChild:!0,children:(0,a.jsxs)(le,{to:`/collections/${e.collection_id}/settings`,children:[(0,a.jsx)(A,{name:"settings-3",mode:"line"}),"Settings"]})}),g&&!H&&(0,a.jsx)(re,{asChild:!0,children:(0,a.jsxs)("button",{onClick:()=>d(e.collection_id),role:"menuitem",disabled:o,children:[(0,a.jsx)(A,{name:"archive",mode:"line"}),"Reactivate"]})}),z&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Mt,{}),(0,a.jsx)(re,{asChild:!0,children:(0,a.jsxs)("button",{onClick:()=>h(e),role:"menuitem",disabled:t,children:[(0,a.jsx)(A,{name:"delete-bin-2",mode:"line"}),"Delete Collection"]})})]})]})]})})]})]})}var P=n(s(),1);function yo({collection:e}){if(e.status===I.Status.POPULATING)return(0,P.jsx)(Ae,{variant:de.FEEDBACK_NEUTRAL_DEFAULT,contentLeft:(0,P.jsx)(A,{name:"progress-7",mode:"line"}),children:(0,P.jsx)(i,{variant:l.SMALL,children:"Populating"})});if(e.status===I.Status.ARCHIVED)return(0,P.jsx)(Ae,{variant:de.FEEDBACK_NEUTRAL_DEFAULT,contentLeft:(0,P.jsx)(A,{name:"archive",mode:"line"}),children:(0,P.jsx)(i,{variant:l.SMALL,children:"Archived"})});if(e.status===I.Status.PAUSED){let t=lo(e);return(0,P.jsx)(Ae,{variant:t===io?de.FEEDBACK_NEUTRAL_DEFAULT:de.FEEDBACK_NEGATIVE_DEFAULT,contentLeft:(0,P.jsx)(A,{name:"pause-circle",mode:"line"}),children:(0,P.jsx)(Q,{content:so[t],children:(0,P.jsx)(i,{variant:l.SMALL,children:"Paused"})})})}return null}var _={headerContainer:"JW5uI",collectionNameContainer:"Y0HRS",headerContainerLeft:"Z-GcO",headerContainerRight:"_5JGeW",collectionLink:"xcA73",collectionName:"_0vyBm",icon:"H5gJL",noMargin:"c0EOr",reactivateButton:"Kc3ZL",fadeIn:"Q4FUS"};var p=n(s(),1);function Je({collection:e,user:t,isDisabled:o,...r}){let d=qt("(max-width: 1200px)"),h=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:_.collectionNameContainer,children:[e.pinned_at&&(0,p.jsx)(A,{"aria-label":"Pinned",name:"pushpin-2",size:"xl",mode:"fill",className:_.icon}),(0,p.jsx)(i,{variant:l.H2,className:_.collectionName,children:e.name})]}),e.category!==I.Category.CATEGORY_UNSPECIFIED&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Me,{variant:"dot"}),(0,p.jsx)(i,{className:_.noMargin,variant:l.H5,children:e.category.replaceAll("_"," ")})]}),e.shared_with_org&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Me,{variant:"dot"}),(0,p.jsx)(A,{"aria-hidden":!0,name:"group",mode:"line",size:"xl","data-testid":"group-icon",className:_.icon})]})]}),C=t?to(t):null;return(0,p.jsxs)("div",{className:_.headerContainer,children:[(0,p.jsx)("div",{className:_.headerContainerLeft,children:o?h:(0,p.jsx)(le,{"aria-label":`Navigate to ${e.name}`,to:`/collections/${e.collection_id}`,className:_.collectionLink,children:h})}),(0,p.jsxs)("div",{className:_.headerContainerRight,children:[C&&!d&&(0,p.jsx)("div",{className:_.fadeIn,children:(0,p.jsxs)(i,{variant:l.SMALL,children:["Creator: ",C]})}),C&&e.update_time&&!d&&(0,p.jsx)("div",{className:_.fadeIn,children:(0,p.jsx)(Me,{variant:"dot"})}),e.update_time&&(0,p.jsx)(Jt,{labelText:"Last Update",timestamp:e.update_time,variant:"long",includeTooltip:!1,includeTime:!d}),(0,p.jsx)(yo,{collection:e}),(0,p.jsx)(Qe,{...r,collection:e})]})]})}var Re=n(q(),1);var ue={linkContainer:"YPnfl",statContainer:"b46iP",stat:"LkqkV",noWrap:"Hknkf"};var M=n(s(),1);function Ce({value:e,text:t,linkTo:o}){let r=(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(i,{variant:l.H1_SUB_HEADLINE,className:ue.stat,children:(0,M.jsx)(Zt,{value:e})}),(0,M.jsx)(i,{variant:l.H6,className:ue.noWrap,children:t})]});return(0,M.jsx)(M.Fragment,{children:o?(0,M.jsx)(le,{to:o,className:ue.linkContainer,children:r}):(0,M.jsx)("div",{className:ue.statContainer,children:r})})}var De={noWrap:"Qr4A1",container:"uTQIM",chart:"_5O-7s"};var X=n(s(),1);function Ze({collection:e}){let t=e.size_metrics.map(wt);if(t.length<2)return null;let o=`${t.length} ${$t("Day",t.length)}`;return(0,X.jsxs)("div",{className:De.container,children:[(0,X.jsx)(Q,{content:"The trend line is updated at the end of the day",side:"top",children:(0,X.jsx)("div",{className:De.chart,children:(0,X.jsx)(co,{title:"Assets",stats:t})})}),(0,X.jsxs)(i,{variant:l.H6,className:De.noWrap,children:["Trend | ",o]})]})}var Xe={stats:"FADl8"};var W=n(s(),1);function je({collection:e,isDisabled:t}){let o=(0,Re.useMemo)(()=>kt(e),[e.status]),r=(0,Re.useMemo)(()=>new Date().toISOString().split("T")[0],[]),d=(0,Re.useMemo)(()=>{let h=new Date;return h.setDate(h.getDate()-1),h.toISOString().split("T")[0]},[]);return t?(0,W.jsx)("div",{className:Xe.stats,children:(0,W.jsx)(Ce,{value:o,text:"Total Assets | Now"})}):(0,W.jsxs)("div",{className:Xe.stats,children:[(0,W.jsx)(Ze,{collection:e}),(0,W.jsx)(Ce,{linkTo:`/collections/${e.collection_id}/results`,value:o,text:"Total Assets | Now"}),(0,W.jsx)(Ce,{linkTo:`/collections/${e.collection_id}/history?event_type=${"asset_added"}&start=${d}&end=${r}`,value:e.added_assets_24_hours.value,text:"New Assets | 24 Hrs"})]})}var w={cardDisabled:"w-M7-",cardPinned:"wNydO",bodyContainer:"lqAN8",bodyContainerPinned:"Di9of",queryDescriptionContainer:"jic98",query:"aOb5r",description:"CCqlb",tooltip:"CET1X"};function Lo(e){let{users:t}=Oe();return t.get(e)}var b=n(s(),1);function Eo({collection:e,...t}){let o=Lo(e.created_by),r=ro(e);return(0,b.jsx)("div",{className:Le(e.pinned_at&&w.cardPinned),children:(0,b.jsxs)(Et,{variant:r?We.DEFAULT:We.INTERACTIVE,headerPadding:Lt.NONE,className:Le(r&&w.cardDisabled),children:[(0,b.jsx)(Je,{collection:e,user:o,isDisabled:r,...t}),(0,b.jsxs)("div",{className:Le(w.bodyContainer,e.pinned_at&&w.bodyContainerPinned),children:[(0,b.jsxs)("div",{className:w.queryDescriptionContainer,children:[(0,b.jsx)(Q,{content:e.query,contentClassName:w.tooltip,children:(0,b.jsx)(i,{variant:l.SMALL_SOURCE,className:w.query,children:e.query})}),e.description&&(0,b.jsx)(Q,{content:e.description,contentClassName:w.tooltip,children:(0,b.jsx)(i,{variant:l.SMALL_SOURCE,className:w.description,children:e.description})})]}),(0,b.jsx)(je,{collection:e,isDisabled:r})]})]},e.collection_id)})}var Pe=n(s(),1);function et({collections:e,isLoading:t,isCollectionsLimitReached:o,setCollectionToArchive:r,setCollectionToUnarchive:d,setCollectionToDelete:h}){return(0,Pe.jsx)("div",{className:Co.collectionsList,children:e.length>0?e.map(C=>(0,Pe.jsx)(Eo,{collection:C,isLoading:t,isCollectionsLimitReached:o,setCollectionToArchive:r,setCollectionToUnarchive:d,setCollectionToDelete:h},C.collection_id)):(0,Pe.jsx)(no,{})})}var k=n(q(),1);var No=500,Ao="collectionsFilters",se="q",G="category",j="sort",ee="owner",Ue="all",xe=[...Ge.map(e=>({label:Ft(e),value:e}))],So=[{label:"Most Recent",value:"CreateTime"},{label:"Last Updated",value:"UpdateTime"},{label:"Collection Name",value:"Name"},{label:"Total Assets",value:"TotalAssets"},{label:"New Assets",value:"NewAssets_24Hours"}],Go=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,zo=Y.optional(Y.union([Y.string().regex(Go),Y.string()])),$o=Y.enum(Ge).optional(),qo=Y.string().optional(),Qo=Y.nativeEnum(_e).optional(),Io={[se]:zo,[G]:$o,[j]:Qo,[ee]:qo};var ce={form:"xJDeV",searchInput:"Bk-8u",ownerSelect:"oG9p7",categorySelect:"jN1-h",sortSelect:"N1wgK",inlineLabel:"qgFkU"};var Oo=e=>[{label:"All",value:Ue},...Array.from(e.values()).filter(t=>t.identity).sort((t,o)=>t.identity.firstName?o.identity.firstName?t.identity.firstName.localeCompare(o.identity.firstName):-1:1).map(t=>({label:`${t.identity.firstName}${t.identity.lastName?` ${t.identity.lastName}`:""}`,value:t.id}))];var D=n(s(),1);function tt(){let e=x(),{users:t}=Oe(),o=e.state==="loading",r=eo(),[d]=ye(),h=Oo(t),[C,V]=(0,k.useState)(d.get("q")||""),{handleValueChange:L,handleSubmit:z,formState:g}=Xt(Io,{[se]:C,[G]:d.get("category")??"",[j]:d.get("sort")??"CreateTime",[ee]:d.get("owner")??Ue},Ao,r,!0),H=xt({value:C,delay:No});(0,k.useEffect)(()=>{L(se,H),r({[se]:H})},[H]);let R=(0,k.useCallback)(v=>{V(v.target.value)},[]),$=(0,k.useCallback)(()=>V(""),[]),te=v=>{L(ee,v),r({[ee]:v})},he=(0,k.useMemo)(()=>xe.filter(v=>g.values[G].split(",").includes(v.value)),[g.values[G],xe]),we=v=>{let oe=v.map(ne=>ne.value).join(",");L(G,oe),r({[G]:oe})},Te=(0,k.useCallback)(v=>{L(j,v),r({[j]:v})},[L,r]);return(0,D.jsxs)(F,{"data-testid":"filters-form",onSubmit:z,className:ce.form,children:[(0,D.jsx)("div",{className:ce.ownerSelect,children:(0,D.jsx)(Be,{name:ee,options:h,contentLeft:(0,D.jsx)(Se,{iconName:"filter-3",label:"Creator"}),value:g.values[ee],onValueChange:te,disabled:h.length===0||o})}),(0,D.jsx)(yt,{name:G,options:xe,selectedOptions:he,placeholder:"Select",onChange:we,className:ce.categorySelect,disabled:o,contentLeft:(0,D.jsx)(Se,{iconName:"filter-3",label:"Category"})}),(0,D.jsx)("div",{className:ce.sortSelect,children:(0,D.jsx)(Be,{name:j,options:So,value:g.values[j],onValueChange:Te,contentLeft:(0,D.jsx)(Se,{icon:"sort-desc",label:"Sort"})})}),(0,D.jsx)(jt,{className:ce.searchInput,name:se,value:C,disabled:o,onChange:R,onClear:$,placeholder:"Search collection name or UUID...",autoComplete:"off"})]})}var _o=n(q(),1);var pe={modalContent:"Qr13N"};var T=n(s(),1);function Mo({collectionToArchive:e,setCollectionToArchive:t}){let o=x(),r=(0,_o.useCallback)(d=>{d||t(null)},[t]);return(0,T.jsx)(ie,{size:ae.MEDIUM,open:!0,onOpenChange:r,footerActions:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(O,{onClick:()=>t(null),variant:S.DEFAULT,children:"No, keep it"}),(0,T.jsxs)(F,{method:"post",onSubmit:()=>t(null),children:[(0,T.jsx)("input",{hidden:!0,name:"collection_id",value:e,readOnly:!0}),(0,T.jsx)("input",{hidden:!0,name:"fetcherKey",value:be,readOnly:!0}),(0,T.jsx)("input",{hidden:!0,name:"archive",value:"true",readOnly:!0}),(0,T.jsx)(K,{}),(0,T.jsx)(O,{isLoading:o.state==="submitting",variant:S.PRIMARY,children:"Yes, archive it"})]})]}),header:(0,T.jsx)(i,{variant:l.H1,children:"Archive this Collection?"}),children:(0,T.jsxs)("div",{className:pe.modalContent,children:[(0,T.jsx)(i,{variant:l.DEFAULT_SEMIBOLD,children:"TIP: Collection settings will be preserved and can be reactivated later if needed."}),(0,T.jsx)(i,{variant:l.DEFAULT,children:"This action will remove all assets and history. Assets will no longer be added to this collection and will no longer consume credits."})]})})}var Fe=n(q(),1);var f=n(s(),1);function bo({collectionToDelete:e,setCollectionToDelete:t}){let{accessState:o}=(0,Fe.useContext)(Ie),r=o?.organization?.organizationId,d=x(),h=(0,Fe.useCallback)(C=>{C||t(null)},[t]);return(0,f.jsx)(ie,{size:ae.MEDIUM,open:!0,onOpenChange:h,footerActions:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(O,{onClick:()=>t(null),variant:S.DEFAULT,children:"No, keep it"}),(0,f.jsxs)(F,{method:"post",onSubmit:()=>t(null),children:[(0,f.jsx)("input",{hidden:!0,name:"collection_id",value:e.collection_id,readOnly:!0}),(0,f.jsx)("input",{hidden:!0,name:"org",value:r,readOnly:!0}),(0,f.jsx)("input",{hidden:!0,name:"fetcherKey",value:fo,readOnly:!0}),(0,f.jsx)("input",{hidden:!0,name:"delete",value:"true",readOnly:!0}),(0,f.jsx)(K,{}),(0,f.jsx)(O,{isLoading:d.state==="submitting",variant:S.ALERT,children:"Yes, delete it"})]})]}),header:(0,f.jsx)(i,{variant:l.H1,children:"Delete this Collection?"}),children:(0,f.jsx)("div",{className:pe.modalContent,children:(0,f.jsxs)(i,{children:["Deleting collections is permanent and cannot be undone. Are you sure you want to delete the ",(0,f.jsx)("strong",{children:e.name})," ","Collection?"]})})})}var N=n(s(),1);function Do({collectionToUnarchive:e,setCollectionToUnarchive:t}){let o=x();return(0,N.jsx)(ie,{size:ae.MEDIUM,open:!0,onOpenChange:r=>{r||t(null)},footerActions:[(0,N.jsx)(O,{onClick:()=>t(null),variant:S.DEFAULT,children:"No, leave it"}),(0,N.jsxs)(F,{method:"post",onSubmit:()=>t(null),children:[(0,N.jsx)("input",{hidden:!0,name:"collection_id",value:e,readOnly:!0}),(0,N.jsx)("input",{hidden:!0,name:"archive",value:"false",readOnly:!0}),(0,N.jsx)("input",{hidden:!0,name:"fetcherKey",value:be,readOnly:!0}),(0,N.jsx)(K,{}),(0,N.jsx)(O,{isLoading:o.state==="submitting",variant:S.PRIMARY,children:"Yes, reactivate it"})]})],header:(0,N.jsx)(i,{variant:l.H1,children:"Reactivate this Collection?"}),children:(0,N.jsxs)("div",{className:pe.modalContent,children:[(0,N.jsx)(i,{variant:l.DEFAULT_SEMIBOLD,children:"TIP: Collection settings have been preserved but the assets will need to repopulate."}),(0,N.jsx)(i,{variant:l.DEFAULT,children:"This action will reactivate an archived collection and you will be charged credits daily for consumption."})]})})}var fe={topBar:"bvFBV",selectItem:"nxR6m",selectLabel:"I1y28",searchInput:"eYspM",barAndTabContainer:"sCY5Q",tabContainer:"nFKis",errorWrapper:"mH-Ct",loadMoreContainer:"I3tgw",loadMoreButton:"_1Nu-k"};var Xo=n(Ko(),1),jo=n(Wo(),1),c=n(s(),1),Jo=Qt("Censys Collections - All");function Ro({query:e="",slots:t={},children:o}){let{t:r}=Ct(),d=[{pathName:r("Collections")}];return(0,c.jsx)(Gt,{initialQuery:e,breadcrumbs:d,slots:{searchHeader:(0,c.jsx)(Wt,{breadcrumbs:d}),header:t.header,actions:t.actions,navTabs:t.navTabs},children:o})}function Po(){let e=ut(),{collections:t,isCollectionsLimitReached:o,collectionsLimit:r,activeCount:d,archivedCount:h,toast:C,nextPageToken:V}=mt(),L=Kt(),z=pt(),[g,H]=ye(),[R,$]=(0,m.useState)(t),[te,he]=(0,m.useState)(V),[we,Te]=(0,m.useState)(!1),[v,oe]=(0,m.useState)(null),[ne,ot]=(0,m.useState)(null),[ve,nt]=(0,m.useState)(null),[at,ke]=(0,m.useState)(null);(0,m.useEffect)(()=>{e?.state===1&&e?.errorMessage&&ke(e.errorMessage)},[e]);let it=x(),Uo=Ht(),xo=Vt({source:"collections-index"}),[B,Fo]=(0,m.useState)("All Collections"),[wo,ko]=(0,m.useState)(new Set),[Vo,Ve]=(0,m.useState)([]),[Ho,rt]=(0,m.useState)(!0);(0,m.useEffect)(()=>{rt(!1)},[R]),(0,m.useEffect)(()=>{if(v||ne||ve)return;let u=setInterval(()=>{we||z.revalidate()},qe);return()=>{clearInterval(u)}},[v,ve,ne,qe,z.revalidate,g]),(0,m.useEffect)(()=>{it.state==="submitting"&&(ke(null),oe(null))},[B]),(0,m.useEffect)(()=>{let u=R.filter(({collection_id:E,status:U})=>wo.has(E)&&U===I.Status.ACTIVE);u.length>0&&Ve(E=>[...E,...u.map(U=>`${U.name} has been populated and is ready to view`)]),ko(new Set(R.filter(E=>E.status===I.Status.POPULATING).map(E=>E.collection_id)))},[R]),(0,m.useEffect)(()=>{let u=new URLSearchParams(g);B==="Archived"?u.set("archived","true"):u.delete("archived"),u.toString()!==g.toString()&&H(u)},[g,B,t,V]),(0,m.useEffect)(()=>{$(t),he(V),Te(!1)},[t,V]);let lt=(0,m.useCallback)(u=>{Fo(u),rt(!0)},[]),Bo=(0,m.useCallback)((u,E)=>{u||Ve(U=>U.filter((st,He)=>He!==E))},[Ve]),Yo=(0,m.useCallback)(()=>{if(te){Te(!0);let u=new URLSearchParams(g);u.set("nextPageToken",te),L.load(`?index&${u}`)}},[te,L.load,g]);return(0,m.useEffect)(()=>{if(L.data){let{collections:u,nextPageToken:E}=L.data;$(U=>{let st=new Set(U.map(ge=>ge.collection_id)),He=u.filter(ge=>!st.has(ge.collection_id)&&(B!=="Archived"||ge.status===I.Status.ARCHIVED));return[...U,...He]}),he(E)}},[L.data]),(0,c.jsx)(Ro,{slots:{header:at?(0,c.jsx)(Ne,{variant:Ee.ERROR,onDismiss:()=>ke(null),children:at}):void 0,actions:(0,c.jsxs)("div",{className:fe.topBar,children:[(0,c.jsx)(O,{"data-testid":"create-collection-button",iconLeft:"add",onClick:()=>Uo(xo),disabled:o,children:"Create Collection"}),(0,c.jsx)(tt,{})]}),navTabs:(0,c.jsxs)(ao,{children:[(0,c.jsx)(ze,{id:"all-collections",isActive:B==="All Collections",onClick:()=>lt("All Collections"),children:"All Collections"}),(0,c.jsx)(ze,{id:"archived",isActive:B==="Archived",onClick:()=>lt("Archived"),"data-testid":"archived-test-id",children:"Archived"})]})},children:(0,c.jsx)(Ut,{children:(0,c.jsxs)("div",{children:[o&&(0,c.jsx)($e,{}),(0,c.jsx)(uo,{title:B==="All Collections"?"TOTAL COLLECTIONS":"TOTAL ARCHIVED",count:B==="All Collections"?d:h,limit:B==="All Collections"?r:void 0,isLoading:Ho}),v&&(0,c.jsx)(Mo,{collectionToArchive:v,setCollectionToArchive:oe}),ne&&(0,c.jsx)(Do,{collectionToUnarchive:ne,setCollectionToUnarchive:ot}),ve&&(0,c.jsx)(bo,{collectionToDelete:ve,setCollectionToDelete:nt}),(0,c.jsx)(et,{collections:R,isLoading:it.state==="submitting",isCollectionsLimitReached:o,setCollectionToArchive:oe,setCollectionToUnarchive:ot,setCollectionToDelete:nt}),te&&R.length>0&&(0,c.jsx)("div",{className:fe.loadMoreContainer,children:(0,c.jsx)(O,{className:fe.loadMoreButton,variant:S.DEFAULT,onClick:Yo,isLoading:L.state==="loading",children:"Load More"})}),C&&(0,c.jsx)(Ke,{title:C,behavior:Ye.DISMISSIVE}),Vo.map((u,E)=>(0,c.jsx)(Ke,{title:u,variant:gt.SUCCESS,behavior:Ye.DISMISSIVE,onOpenChange:U=>Bo(U,E)},`${u}-${E}`))]})})})}function Zo(){let e=dt();return(0,c.jsx)(Ro,{children:(0,c.jsx)("div",{className:fe.errorWrapper,children:ct(e)&&Rt(e.data)?(0,c.jsx)(oo,{errorCode:e.data.code}):(0,c.jsx)(zt,{error:e})})})}export{Zo as ErrorBoundary,Po as default,Jo as meta};
