import{a as Ve,c as We}from"/censys/build/_shared/chunk-5PKHBRVZ.js";import"/censys/build/_shared/chunk-6BMUL27E.js";import"/censys/build/_shared/chunk-XLW6D2H7.js";import{b as re}from"/censys/build/_shared/chunk-H7Q3B5O5.js";import{a as $e}from"/censys/build/_shared/chunk-ULGJ3ZYU.js";import"/censys/build/_shared/chunk-4KKS33MW.js";import{d as Ie,m as we}from"/censys/build/_shared/chunk-IUMSQHOS.js";import{a as Q}from"/censys/build/_shared/chunk-WNJFRA3F.js";import{a as ze}from"/censys/build/_shared/chunk-JAEJ7XSF.js";import{c as Z,r as te}from"/censys/build/_shared/chunk-B5UNN2SO.js";import"/censys/build/_shared/chunk-TUDXVIEL.js";import{a as He}from"/censys/build/_shared/chunk-7C4UGOB7.js";import"/censys/build/_shared/chunk-EI6HYVQX.js";import"/censys/build/_shared/chunk-J22KWXE5.js";import"/censys/build/_shared/chunk-JDWADSGD.js";import"/censys/build/_shared/chunk-EMHGEENV.js";import"/censys/build/_shared/chunk-4WX73TCZ.js";import"/censys/build/_shared/chunk-CJIEOTRC.js";import"/censys/build/_shared/chunk-5OP2ERYU.js";import{b as I}from"/censys/build/_shared/chunk-LOKTUJJ3.js";import"/censys/build/_shared/chunk-BU2LL35M.js";import"/censys/build/_shared/chunk-IRHQADG7.js";import"/censys/build/_shared/chunk-KSE2ZBRQ.js";import"/censys/build/_shared/chunk-FP2KPINM.js";import"/censys/build/_shared/chunk-VKYVKQW2.js";import"/censys/build/_shared/chunk-OQUAXVLV.js";import{a as _e}from"/censys/build/_shared/chunk-BWODHJE6.js";import"/censys/build/_shared/chunk-RWVGPSU7.js";import{F as ke,t as Ue,u as Fe,x as Oe}from"/censys/build/_shared/chunk-4DOFQKLI.js";import"/censys/build/_shared/chunk-MB47ZWHU.js";import"/censys/build/_shared/chunk-URNZPFSF.js";import"/censys/build/_shared/chunk-WK35ORSL.js";import{a as v}from"/censys/build/_shared/chunk-XTODG4BZ.js";import{a as A,n as j,o as ee,p as w}from"/censys/build/_shared/chunk-426SZY5O.js";import"/censys/build/_shared/chunk-HPK4AUA3.js";import{a as De}from"/censys/build/_shared/chunk-TTVDHAYB.js";import"/censys/build/_shared/chunk-6EMU7K4F.js";import{a as K}from"/censys/build/_shared/chunk-M5RKE22T.js";import{b as U}from"/censys/build/_shared/chunk-ZP3FOFQD.js";import{b as Me}from"/censys/build/_shared/chunk-E7FS2ZQL.js";import{c as P,e as Y,f as H}from"/censys/build/_shared/chunk-ST66DGSY.js";import{b as Pe}from"/censys/build/_shared/chunk-QJVHIZ52.js";import"/censys/build/_shared/chunk-N7X32FEJ.js";import{$ as Ne,A as r,B as h,H as ge,J as Te,Ja as Ee,Ka as Ae,W as he,X as be,Xa as Re,Y as xe,_ as ve,ea as E,la as Se,ma as Le,oa as Be,ra as b,wa as M,x as G,xa as D,y as Ce,z as i}from"/censys/build/_shared/chunk-DN2SN5ZC.js";import"/censys/build/_shared/chunk-F5K75D4K.js";import"/censys/build/_shared/chunk-44DVAK2X.js";import"/censys/build/_shared/chunk-OLCKCRUU.js";import{a as me,c as ce,k as ue,m as fe,y as ye}from"/censys/build/_shared/chunk-JMZ2MZXD.js";import{b as m}from"/censys/build/_shared/chunk-ZST4CTCB.js";import{a as _}from"/censys/build/_shared/chunk-MOHCJWAV.js";import{e as o}from"/censys/build/_shared/chunk-2TWE7TSA.js";var F=o(_(),1);var N={chartContainer:"hOWn6","chartContainer-sm":"smPK2","chartContainer-md":"J8R4c",countContainer:"KVLff","countContainer-sm":"PzLhe","countContainer-md":"exW2K",currentBalanceText:"bi2lV","currentBalanceText-md":"BX2nY",totalBalanceText:"_1H2v6"};var c=o(m(),1);function ae({remainingBalance:e=0n,totalBalance:a=1n,size:t="md",isLoading:n=!1}){let u=(0,F.useRef)(null),p=[],g=(0,F.useMemo)(()=>a===0n||n?0:e>a?100:Number(e*100n/a),[e,a]),x=`${n?"":g}-${t}`;if(g>0){let pe=g>20?`url(#green-gradient-${x})`:`url(#yellow-gradient-${x})`;p.push({id:"p1",fill:pe,stroke:pe,value:g})}g<100&&p.push({id:"p2",fill:I.SURFACE_BG_CARD_1,stroke:I.SURFACE_BG_CARD_1,value:100-g});let R=(0,F.useMemo)(()=>n?"-":t==="sm"&&ee(e)?j(Number(e)):(0,c.jsx)(re,{value:e}),[n,t,e]),W=(0,F.useMemo)(()=>n?0:a>=1e4&&ee(a)?j(Number(a)):(0,c.jsx)(re,{value:a}),[n,a]);return(0,c.jsxs)("div",{ref:u,className:G(N.chartContainer,N[`chartContainer-${t}`]),children:[(0,c.jsxs)(Ie,{ref:u,children:[(0,c.jsx)(we,{ref:u,variant:"HALF",innerRadius:.82,outerRadius:1,padAngle:0,data:p}),(0,c.jsxs)("defs",{children:[(0,c.jsxs)("linearGradient",{id:`green-gradient-${x}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,c.jsx)("stop",{offset:"0%",stopColor:"#82CEA3",stopOpacity:"1"}),(0,c.jsx)("stop",{offset:"100%",stopColor:I.FEEDBACK_SUCCESS,stopOpacity:"1"})]}),(0,c.jsxs)("linearGradient",{id:`yellow-gradient-${x}`,x1:"0%",y1:"100%",x2:"10%",y2:"0%",children:[(0,c.jsx)("stop",{offset:"0%",stopColor:"#FCE089",stopOpacity:"1"}),(0,c.jsx)("stop",{offset:"100%",stopColor:I.FEEDBACK_CAUTION,stopOpacity:"1"})]})]})]}),(0,c.jsxs)("div",{className:G(N.countContainer,N[`countContainer-${t}`]),children:[(0,c.jsx)(r,{variant:t==="sm"?i.SMALL:i.DEFAULT,className:G(N.currentBalanceText,N[`currentBalanceText-${t}`]),children:R}),t!=="sm"&&(0,c.jsxs)(r,{className:N.totalBalanceText,children:["/ ",W]})]})]})}var S={creditBalanceSection:"oWgxl",availableText:"_6FC1P",body:"hCKHx",balanceCard:"OjHbI",divider:"imV-x",headerText:"rPpsX",buyCreditsLink:"mTUG1",resetText:"_65FtH",creditBalanceContainer:"GzhBw"};function Ge(e){let t=new Date(e).getTime()-Date.now(),n=Math.floor(t/(1e3*60*60*24));if(n>0)return`(${n} ${Q("day",n)} left)`;let u=Math.floor(t%(1e3*60*60*24)/(1e3*60*60));if(u>0)return`(${u} ${Q("hour",u)} left)`;let p=Math.floor(t%(1e3*60*60)/(1e3*60));return p>0?`(${p} ${Q("minute",p)} left)`:""}var oe={textHeaderContainer:"esx8I",headerText:"_5MaNb"};var O=o(m(),1);function $(){return(0,O.jsxs)("div",{className:oe.textHeaderContainer,children:[(0,O.jsx)(r,{variant:i.H3,className:oe.headerText,children:"Credit Balance"}),(0,O.jsx)(r,{children:(0,O.jsx)(De,{href:"https://docs.censys.com/docs/censys-credits#/",isExternal:!0,size:"sm",children:"How Credits are used"})})]})}var L={container:"F4F6M",body:"-D4jc",header:"_00Jqd",headerText:"m2Jh6",bodyText:"t4x2a",bodyTextContainer:"QZ5sY"};var T=o(m(),1);function z({isLocked:e=!1,isPersonal:a=!1}){return(0,T.jsx)(D,{bodyPadding:M.NONE,className:L.container,children:(0,T.jsxs)("div",{className:L.body,children:[(0,T.jsxs)("div",{className:L.header,children:[(0,T.jsx)(r,{className:L.headerText,variant:i.H3,children:"Credit Usage Log"}),e?(0,T.jsx)(ke,{}):(0,T.jsx)(v,{link:{to:`/credits/download${a?"?personal":""}`,download:!0,reloadDocument:!0},button:{iconLeft:"download-2",iconLeftMode:"line",variant:h.TERTIARY},children:"Download"})]}),(0,T.jsxs)("div",{className:L.bodyTextContainer,children:[(0,T.jsx)(r,{className:L.bodyText,variant:i.SMALL,children:"Download CSV of consumption activity"}),(0,T.jsx)(r,{className:L.bodyText,variant:i.SMALL,children:"(last 30 days)"})]})]})})}var y=o(m(),1);function ie({remainingBalance:e,totalBalance:a,expirationDate:t,isLoading:n=!1}){let u=U("ACCOUNTS_SITE_URL"),{formattedDate:p}=Ee(t??Temporal.Now.instant().toString(),"MMM DD, YYYY");return(0,y.jsxs)("section",{className:S.creditBalanceSection,children:[(0,y.jsx)(D,{bodyPadding:M.NONE,className:S.balanceCard,children:(0,y.jsxs)("div",{className:S.body,children:[(0,y.jsx)($,{}),(0,y.jsxs)(r,{className:S.resetText,"aria-busy":n?"true":"false",children:["Resets on"," ",n||!t?"-":`${p} ${Ge(t)}`]}),(0,y.jsx)(ae,{remainingBalance:e,totalBalance:a,isLoading:n}),(0,y.jsx)(r,{variant:i.H3,className:S.availableText,children:"Available"}),(0,y.jsx)("div",{className:S.divider,children:(0,y.jsx)(K,{variant:"line--horizontal",size:"100%"})}),(0,y.jsx)(v,{link:{to:`${u}/settings/plan`,isExternal:!0,shouldOmitOrg:!1},button:{variant:h.DEFAULT,className:S.buyCreditsLink,size:ve.LARGE,iconLeft:"shopping-cart",iconLeftMode:"line"},children:"Buy Credits"})]})}),(0,y.jsx)(z,{isLocked:!0})]})}var X={autoReplenishmentStatus:"iQr16",divider:"pTFol",content:"v6Y3o"};var C=o(m(),1);function Ye({settings:e}){let a=U("ACCOUNTS_SITE_URL");return Y()?.currentPlanType!=="Starter"?null:(0,C.jsxs)("div",{className:X.autoReplenishmentStatus,children:[(0,C.jsx)(K,{variant:"line--horizontal",className:X.divider}),(0,C.jsxs)("div",{className:X.content,children:[(0,C.jsx)(Ce,{name:"refresh",mode:"line"}),(0,C.jsx)(r,{variant:i.SMALL,children:e?(0,C.jsxs)(C.Fragment,{children:["Auto-replenish ",(0,C.jsx)(E,{value:e.amount})," credits at ",(0,C.jsx)(E,{value:e.threshold})," credits"]}):"Auto-replenish is not enabled"}),(0,C.jsx)(v,{link:{to:`${a}/settings/billing/auto-replenishment`,isExternal:!0,shouldOmitOrg:!1},button:{variant:h.TERTIARY},children:e?"Edit":"Enable"})]})]})}var q=o(_(),1);var f={body:"-vkhw",buyCreditsLink:"hzojx",container:"Nk7Py",countBody:"po5FQ",countText:"g-xFF",creditBalanceSection:"oor8B",gray5Text:"utUZ-",header:"Bq-7R",headerText:"_0l3Nz",hoverTextContainer:"zX8i4",tooltipText:"rnNf5",tooltipContent:"HsFtX",tooltipListContent:"K9nIL",tooltipFooter:"BfFoB"};var s=o(m(),1);function ne({remainingBalance:e,totalBalance:a,isLoading:t=!1,isError:n=!1,isPersonalUsage:u,footerSlot:p}){let{accessState:g}=(0,q.useContext)(P),x=U("ACCOUNTS_SITE_URL"),R=Y()?.currentPlanType,W=(0,q.useMemo)(()=>e===0n?"services-paused":Oe(w(e),w(a))?"running-low":"sufficient",[e,a]);return(0,s.jsxs)("section",{className:f.creditBalanceSection,children:[(0,s.jsx)(D,{bodyPadding:M.NONE,className:f.container,children:(0,s.jsxs)("section",{className:f.body,"aria-label":`Your current credit balance is ${Ue[W]}`,children:[(0,s.jsxs)("div",{className:f.header,children:[(0,s.jsx)($,{}),A(g,1)&&R!=="Enterprise"&&(0,s.jsx)(v,{link:{to:`${x}/settings/plan`,isExternal:!0,shouldOmitOrg:!1},button:{variant:h.DEFAULT,className:f.buyCreditsLink},children:"Buy Credits"})]}),(0,s.jsxs)("div",{className:f.countBody,children:[(0,s.jsx)(r,{variant:i.H3,className:f.countText,"aria-busy":t?"true":"false",children:t?(0,s.jsx)(Te,{size:ge.LARGE}):n?"-":(0,s.jsx)(E,{value:e})}),(0,s.jsx)(r,{variant:i.H3,className:f.gray5Text,children:"Available"})]}),(0,s.jsx)("div",{className:f.hoverTextContainer,children:(0,s.jsx)(Re,{content:(0,s.jsx)(r,{variant:i.SMALL,className:f.tooltipText,children:(0,s.jsxs)("div",{className:f.tooltipContent,children:[(0,s.jsxs)("ul",{className:f.tooltipListContent,children:[(0,s.jsx)("li",{children:"Sufficient: More than 20% of highest balance"}),(0,s.jsx)("li",{children:"Running Low: Less than 20% of highest balance"}),(0,s.jsx)("li",{children:"Services Paused: 0 credits (buy credits to resume access)"})]}),(0,s.jsx)("div",{className:f.tooltipFooter,children:"To add credits, click Buy Credits."})]})}),children:!t&&(0,s.jsx)(Fe,{type:W})})}),p]})}),A(g,1)&&(0,s.jsx)(z,{isLocked:!1,isPersonal:u})]})}var Qe=o(_(),1);var J={sectionHeadingText:"kCKFM"};var Xe=o(m(),1);function se(){let{accessState:e}=(0,Qe.useContext)(P);return!!H()&&!A(e,1)&&(0,Xe.jsx)(r,{className:J.sectionHeadingText,variant:i.H3,children:"Organization Usage"})}var qe=o(_(),1);var k=o(m(),1);function le(){let{accessState:e}=(0,qe.useContext)(P),a=H(),t=ce();return A(e,1)?(0,k.jsx)(he,{value:t.pathname,children:(0,k.jsx)(be,{children:[{to:"/credits/organization",label:"Organization Usage"},{to:"/credits",label:"My Usage"}].map(({to:n,label:u})=>(0,k.jsx)(xe,{value:n,asChild:!0,children:(0,k.jsx)(Me,{to:n,prefetch:"intent",children:u})},n))})}):a?(0,k.jsx)(r,{className:J.sectionHeadingText,variant:i.H3,children:"My Usage"}):null}var Je=o(_(),1);var B={expiryTableWrapper:"_5ykfT",expiryTable:"r56-m",expiryTableHeader:"GDGfl",leftAligned:"nyVZ1",rightAligned:"fsg6i",viewExpirationDatesButton:"SQjf7"};var d=o(m(),1);function de({wallets:e}){let a=(0,Je.useMemo)(()=>e.filter(t=>t.balance>0n),[e]);return(0,d.jsx)(Be,{trigger:(0,d.jsx)(Ne,{className:B.viewExpirationDatesButton,variant:h.TERTIARY,children:"View Expiration Dates"}),includeCloseButton:!0,headerBorder:Le.NONE,size:Se.SMALL,header:(0,d.jsx)(r,{variant:i.H2,as:"span",children:"Expiration Dates"}),children:(0,d.jsx)("div",{className:B.expiryTableWrapper,children:(0,d.jsxs)(b.Root,{className:B.expiryTable,children:[(0,d.jsx)(b.Header,{className:B.expiryTableHeader,children:(0,d.jsxs)(b.HeaderRow,{children:[(0,d.jsx)(b.HeaderCell,{className:B.rightAligned,children:(0,d.jsx)(r,{variant:i.DEFAULT_SEMIBOLD,children:"Credits"})}),(0,d.jsx)(b.HeaderCell,{className:B.leftAligned,children:(0,d.jsx)(r,{variant:i.DEFAULT_SEMIBOLD,children:"Expiration Date"})})]})}),(0,d.jsx)(b.Body,{children:a.map(t=>(0,d.jsxs)(b.Row,{children:[(0,d.jsx)(b.Cell,{className:B.rightAligned,children:(0,d.jsx)(r,{children:(0,d.jsx)(E,{value:w(t.balance)})})}),(0,d.jsx)(b.Cell,{children:(0,d.jsx)(r,{children:(0,d.jsx)(Ae,{timestamp:t.expiresAt?.toString()??""})})})]},t.id))})]})})})}var V={layout:"_63Ymb",usageSection:"_1zOMN",balanceSection:"tlbq8"};var l=o(m(),1),et=$e("Censys Credit Management"),tt=e=>!!e&&typeof e=="object"&&"isPersonalDashboard"in e;function Ze(){let e=ye().some(R=>tt(R.handle)&&R.handle.isPersonalDashboard===!0),a=H(),t=He(()=>"/api/credits/balance",[a?.organizationId]),n=t.state===0,u=t.state===2,p,g=null;t.data&&(p=ze(t.data.creditBalance),g=t.data.autoReplenishmentSettings);let x=Pe();return(0,l.jsx)(te,{breadcrumbs:[{pathName:"Credit Management"}],children:(0,l.jsx)(Z,{children:(0,l.jsxs)("div",{className:V.layout,children:[(0,l.jsxs)("div",{className:V.usageSection,children:[(0,l.jsx)(le,{}),(0,l.jsx)(fe,{})]}),(0,l.jsxs)("div",{className:V.balanceSection,children:[(0,l.jsx)(se,{}),a?(0,l.jsx)(ne,{remainingBalance:p?.balance??0n,totalBalance:p?.initialBalance??0n,isPersonalUsage:e,footerSlot:!n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(de,{wallets:p?.wallets??[]}),(0,l.jsx)(Ye,{settings:g})]}),isLoading:n,isError:u}):x&&(0,l.jsx)(ie,{remainingBalance:p?.balance??0n,totalBalance:p?.initialBalance??0n,expirationDate:p?.wallets[p?.wallets.length-1]?.expiresAt?.toString(),isLoading:n})]})]})})})}function rt(){let e=ue();return(0,l.jsx)(te,{breadcrumbs:[{pathName:"Credit Management"}],children:(0,l.jsx)(Z,{children:(0,l.jsx)("div",{className:V.errorWrapper,children:me(e)&&Ve(e.data)?(0,l.jsx)(We,{errorCode:e.data.code}):(0,l.jsx)(_e,{error:e})})})})}export{rt as ErrorBoundary,Ze as default,et as meta};
