import{a as _t}from"/censys/build/_shared/chunk-3PUYXBPH.js";import{a as St,b as ze,c as Mt}from"/censys/build/_shared/chunk-FS2WWQ5P.js";import{a as $e}from"/censys/build/_shared/chunk-SFLRVZ3S.js";import{c as so,d as Nt}from"/censys/build/_shared/chunk-YP7RGGRG.js";import{a as Ot}from"/censys/build/_shared/chunk-XFKJTKGI.js";import{a as It}from"/censys/build/_shared/chunk-I4RTDJU2.js";import"/censys/build/_shared/chunk-URNZPFSF.js";import{a as bt}from"/censys/build/_shared/chunk-ZORAMBCF.js";import{a as yt}from"/censys/build/_shared/chunk-NQ7LRPSF.js";import{a as lo}from"/censys/build/_shared/chunk-6HSN5L3Z.js";import{a as Et}from"/censys/build/_shared/chunk-5KJBEHFA.js";import"/censys/build/_shared/chunk-7Y4HAY5E.js";import{a as At}from"/censys/build/_shared/chunk-XZG736LL.js";import"/censys/build/_shared/chunk-AEKKJQLA.js";import{a as Lt}from"/censys/build/_shared/chunk-4NXR4FZK.js";import{a as mn}from"/censys/build/_shared/chunk-PIXRIREJ.js";import{a as Tt}from"/censys/build/_shared/chunk-44QMQJJK.js";import{b as gt}from"/censys/build/_shared/chunk-JZYLTBAZ.js";import{a as Ct}from"/censys/build/_shared/chunk-ULGJ3ZYU.js";import{a as vt}from"/censys/build/_shared/chunk-5PS6SCVZ.js";import{a as dn}from"/censys/build/_shared/chunk-EAJKCKTG.js";import"/censys/build/_shared/chunk-FYP76FCX.js";import{a as ht}from"/censys/build/_shared/chunk-IJLDI467.js";import"/censys/build/_shared/chunk-OKZWZKQL.js";import{a as ut}from"/censys/build/_shared/chunk-Y7NKNUZC.js";import{c as tt,n as mt,o as pt}from"/censys/build/_shared/chunk-22JANVKU.js";import"/censys/build/_shared/chunk-FQTIU6PB.js";import"/censys/build/_shared/chunk-J6D36YFI.js";import"/censys/build/_shared/chunk-EI6HYVQX.js";import"/censys/build/_shared/chunk-J22KWXE5.js";import{c as x}from"/censys/build/_shared/chunk-RAMDI2JB.js";import{a as nt}from"/censys/build/_shared/chunk-O3SGPCPK.js";import"/censys/build/_shared/chunk-CJIEOTRC.js";import"/censys/build/_shared/chunk-GYDCO7LL.js";import"/censys/build/_shared/chunk-ATOZ4ARP.js";import"/censys/build/_shared/chunk-DSG73WCA.js";import"/censys/build/_shared/chunk-M7IO6GB7.js";import{r as Xo,s as jo,z as ot}from"/censys/build/_shared/chunk-HUE44QRB.js";import"/censys/build/_shared/chunk-Z3PARXZG.js";import"/censys/build/_shared/chunk-URNZPFSF.js";import"/censys/build/_shared/chunk-WK35ORSL.js";import{a as ao}from"/censys/build/_shared/chunk-NJXUBBUP.js";import{a as et}from"/censys/build/_shared/chunk-437XWWKH.js";import{c as Mo}from"/censys/build/_shared/chunk-G6DKMBFA.js";import"/censys/build/_shared/chunk-YZ2VHXR4.js";import{a as ft}from"/censys/build/_shared/chunk-WNJFRA3F.js";import{a as dt}from"/censys/build/_shared/chunk-EYKPJWWG.js";import"/censys/build/_shared/chunk-RPAGMMSK.js";import"/censys/build/_shared/chunk-WJT5ZZXK.js";import{a as it,b as rt,c as at,h as lt,i as st,k as ct}from"/censys/build/_shared/chunk-ZI7DUXMR.js";import"/censys/build/_shared/chunk-TRPWTN3H.js";import"/censys/build/_shared/chunk-UKMMPQ5X.js";import{a as Zo,m as Jo}from"/censys/build/_shared/chunk-WJEUPJRQ.js";import"/censys/build/_shared/chunk-HPK4AUA3.js";import{a as Ae}from"/censys/build/_shared/chunk-EZHABQF2.js";import"/censys/build/_shared/chunk-2RV3CGNA.js";import{b as qo,h as Ye,k as Qo}from"/censys/build/_shared/chunk-OZE6EA6M.js";import{b as ie}from"/censys/build/_shared/chunk-HNL4CPAB.js";import{c as We,e as Be,h as Go}from"/censys/build/_shared/chunk-D5QEORL2.js";import{h as Ke,l as j}from"/censys/build/_shared/chunk-VQ4M4AGG.js";import"/censys/build/_shared/chunk-Y7XN4DST.js";import{A as l,Aa as Bo,B as E,Ba as Yo,Ca as H,E as Ee,Ea as Ko,F as _o,Fa as $o,H as Do,Va as se,Za as zo,aa as b,da as Ro,db as He,fa as Ue,ga as Ve,ha as ko,ia as no,ja as io,ka as te,la as Po,ma as wo,na as ne,sa as Fo,ta as ro,va as xo,wa as Uo,x as xe,xa as Vo,y as L,ya as Ho,z as c,za as Wo}from"/censys/build/_shared/chunk-GALQBYYN.js";import{c as Oo}from"/censys/build/_shared/chunk-B7DSLLNE.js";import{d as oe}from"/censys/build/_shared/chunk-6URBRDCL.js";import{B as Fe,a as No,i as F,j as ke,k as So,p as Pe,t as _,z as we}from"/censys/build/_shared/chunk-Q6RLBVJI.js";import{a as $,c as a}from"/censys/build/_shared/chunk-XJAPXWKX.js";import{d as n}from"/censys/build/_shared/chunk-2QEWK57A.js";var p=n($(),1);var Rt=n($(),1);var Dt={limitMessage:"QsoRD"};var ee=n(a(),1);function co(){let e=(0,Rt.useContext)(Oo),o=Be()?.currentPlanType,t=qo("ACCOUNTS_SITE_URL");return(0,ee.jsx)("div",{className:Dt.limitMessage,children:(0,ee.jsxs)(Ve,{variant:Ue.INFO,children:[o==="Enterprise"&&(0,ee.jsx)("span",{children:"You have reached the maximum number of collections for your plan. Contact your account representative to purchase additional collections."}),o==="Starter"&&(0,ee.jsxs)("span",{children:["You have reached the maximum number of collections for your plan."," ",(0,ee.jsx)(Ae,{href:jo(e),isExternal:!0,children:"Contact us"})," ","to upgrade to Enterprise Tier."]}),o==="Free"&&(0,ee.jsxs)("span",{children:["Congratulations, you have set up your free collection! To create more,"," ",(0,ee.jsx)(Ae,{href:`${t}/settings/plan`,isExternal:!0,children:"upgrade to Starter"}),"."]})]})})}var ce={textContainer:"AZeEt",loadingSpinner:"Nf6Bq",gray8:"Mg1Dh"};var S=n(a(),1);function kt({title:e,count:o,limit:t,isLoading:r=!1}){let s=t;return(0,S.jsxs)("span",{className:ce.textContainer,children:[(0,S.jsx)(l,{variant:c.H5,children:`${e}:`}),r?(0,S.jsx)("div",{className:ce.loadingSpinner,children:(0,S.jsx)(Do,{size:_o.SMALL})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l,{variant:c.H4,className:ce.gray8,children:o===-1?"N/A":o.toLocaleString()}),s&&o!==-1&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(l,{variant:c.H5,className:ce.gray8,children:"/"}),t===-1||t===Number.MAX_SAFE_INTEGER?(0,S.jsx)(l,{variant:c.H5,className:ce.gray8,children:"Unlimited"}):(0,S.jsx)(l,{variant:c.H5,className:ce.gray8,children:Jo(t).toLocaleString()})]})]})]})}var Pt={collectionsList:"_2jUcW"};var me=n($(),1);var mo=3e4;var Ge="archive-collection-form",wt="delete-collection-form",Ft="pin-collection-form",xt="unpin-collection-form";var Bn=["Name"];var z=n($(),1);var Ie=n($(),1);var de={content:"RWKbD",webhookLabel:"uK-Bm",linkContent:"Vr7qF",successArea:"LT9so",successContent:"_0VgqF"};var f=n(a(),1),po=(0,Ie.forwardRef)(({collectionId:e,webhooks:o,selectedWebhook:t,onWebhookChange:r,onClose:s,errorMessage:u,isSuccess:h},T)=>{let g=(0,Ie.useMemo)(()=>o.map(d=>({label:(0,f.jsxs)("div",{className:de.webhookLabel,children:[(0,f.jsx)(L,{name:"webhook",mode:"line",size:"md"}),d.display_name]}),value:d.name})),[o]),N=(0,Ie.useMemo)(()=>o.find(d=>d.name===t)?.name,[o,t]);return(0,f.jsxs)(_,{method:"post",ref:T,children:[(0,f.jsx)("input",{type:"hidden",name:"fetcherKey",value:it}),(0,f.jsx)("input",{type:"hidden",name:"collectionId",value:e}),(0,f.jsx)("input",{type:"hidden",name:"webhookName",value:N||""}),(0,f.jsx)(x,{}),(0,f.jsxs)("div",{className:de.content,children:[(0,f.jsx)(zo,{label:"Select existing Webhook",errorText:u,children:(0,f.jsx)(Ee,{options:g,value:t,onValueChange:r,valueProps:{placeholder:(0,f.jsxs)("div",{className:de.webhookLabel,children:[(0,f.jsx)(L,{name:"webhook",mode:"line",size:"md"}),"Select..."]})},disabled:h})}),!h&&(0,f.jsxs)(l,{children:["or"," ",(0,f.jsx)(Ae,{href:`/settings/webhooks/new?collection_id=${e}`,onClick:s,isExternal:!0,children:(0,f.jsxs)("div",{className:de.linkContent,children:["Create New Webhook",(0,f.jsx)(L,{name:"arrow-right",mode:"line"})]})})]}),h&&(0,f.jsx)($e,{variant:"success",className:de.successArea,children:(0,f.jsxs)("div",{className:de.successContent,children:[(0,f.jsx)(L,{name:"checkbox-circle",mode:"line",size:"md"}),(0,f.jsx)(l,{children:"Webhook added!"})]})})]})]})});var D=n(a(),1);function Ut({collectionId:e,webhooks:o,onClose:t,onSuccess:r}){let s=(0,z.useRef)(null),u=Fe(),h=F(),[T,g]=(0,z.useState)(void 0),[N,d]=(0,z.useState)(!1),[Y,M]=(0,z.useState)(void 0),q=h.state!=="idle";(0,z.useEffect)(()=>{u?.state===0&&(d(!0),M(void 0)),u?.state===1&&(d(!1),M(u.errorMessage))},[u,t,r]);let P=()=>{T&&s.current?.requestSubmit()},Q=(0,z.useMemo)(()=>N&&T?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(b,{onClick:t,variant:E.DEFAULT,children:"Done"}),(0,D.jsx)(et,{link:{to:`/settings/webhooks/${Lt(T)}`},button:{variant:E.SECONDARY},children:"View Webhook"})]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(b,{onClick:t,variant:E.DEFAULT,children:"Cancel"}),(0,D.jsx)(b,{onClick:P,variant:E.PRIMARY,isLoading:q,disabled:!T,children:"Save"})]}),[N,T,q,t,P]);return(0,D.jsx)(ne,{size:te.MEDIUM,open:!0,onOpenChange:t,header:(0,D.jsx)(l,{variant:c.H2,children:"Add a Webhook"}),headerBorder:Po.NONE,footerBorder:wo.NONE,footerActions:Q,children:(0,D.jsx)(po,{ref:s,collectionId:e,webhooks:o,selectedWebhook:T,onWebhookChange:g,onClose:t,errorMessage:Y,isSuccess:N})})}var Vt=n($(),1);var w=n(a(),1);function uo({collectionId:e,emailAlertEnabled:o}){let t=(0,Vt.useRef)(null),r=()=>{t.current?.requestSubmit()};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(_,{method:"post",ref:t,children:[(0,w.jsx)("input",{type:"hidden",name:"collection_id",value:e,readOnly:!0}),(0,w.jsx)("input",{type:"hidden",name:"email_alert_enabled",value:(!o).toString(),readOnly:!0}),(0,w.jsx)("input",{type:"hidden",name:"fetcherKey",value:rt,readOnly:!0}),(0,w.jsx)(x,{})]}),(0,w.jsx)(H,{asChild:!0,children:(0,w.jsxs)("button",{onClick:r,role:"menuitem",children:[(0,w.jsx)(L,{name:o?"notification-off":"notification-2",mode:o?"fill":"line"}),o?"Remove Email Alert":"Add Email Alert"]})})]})}var Ht={menu:"OOZIG"};var i=n(a(),1);function Wt({collectionId:e,fetcherKey:o,formRef:t}){return(0,i.jsxs)(_,{method:"post",ref:t,children:[(0,i.jsx)("input",{type:"hidden",name:"collection_id",value:e,readOnly:!0}),(0,i.jsx)("input",{type:"hidden",name:"fetcherKey",value:o,readOnly:!0}),(0,i.jsx)(x,{})]})}function Bt({label:e,iconName:o,iconMode:t,formRef:r}){return(0,i.jsx)(H,{asChild:!0,children:(0,i.jsxs)("button",{onClick:()=>{r.current?.requestSubmit()},role:"menuitem",children:[(0,i.jsx)(L,{name:o,mode:t}),e]})})}function fo({collection:e,isLoading:o,isCollectionsLimitReached:t,setCollectionToArchive:r,setCollectionToUnarchive:s,setCollectionToDelete:u}){let{webhooks:h}=we(),T=ke(),[g,N]=(0,me.useState)(!1),{accessState:d}=(0,me.useContext)(We),Y=(0,me.useRef)(null),M=(0,me.useRef)(null),q=d?.currentPlanType==="Free",P=Zo(d,1),Q=d?.userId===e.created_by,Te=Go("collection-emails"),Ce=Q&&Te,y=e.status===j.Status.ARCHIVED,Z=e.status===j.Status.POPULATING,J=P||Q,ye=!y&&!Z,le=y&&!Z&&!q,Me=ye||le||J,Oe=ze(e,d).get("Configuration"),Le=P&&e.webhook_config_id,_e=P&&!e.webhook_config_id,De=()=>{N(eo=>!eo)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Wt,{collectionId:e.collection_id,fetcherKey:Ft,formRef:Y}),(0,i.jsx)(Wt,{collectionId:e.collection_id,fetcherKey:xt,formRef:M}),(0,i.jsxs)(Vo,{modal:!1,children:[(0,i.jsx)(Wo,{asChild:!0,children:(0,i.jsx)(Ro,{iconName:"more-2",iconMode:"line",variant:E.GHOST,"aria-label":"More options"})}),(0,i.jsx)(Ho,{children:(0,i.jsxs)(Bo,{align:"end",className:Ht.menu,children:[(0,i.jsx)(Ko,{children:(0,i.jsx)(l,{variant:c.H5,children:"Actions"})}),(0,i.jsxs)(Yo,{children:[e.pinned_at?(0,i.jsx)(Bt,{label:"Unpin",iconName:"unpin",iconMode:"fill",formRef:M}):(0,i.jsx)(Bt,{label:"Pin",iconName:"pushpin",iconMode:"line",formRef:Y}),Ce&&(0,i.jsx)(uo,{collectionId:e.collection_id,emailAlertEnabled:e.email_alert_enabled}),Oe?(0,i.jsx)(H,{asChild:!0,children:(0,i.jsxs)(ie,{to:`/collections/${e.collection_id}/settings`,children:[(0,i.jsx)(L,{name:"settings-3",mode:"line"}),"Configure Collection"]})}):(0,i.jsx)(H,{asChild:!0,children:(0,i.jsxs)(ie,{to:`/collections/${e.collection_id}`,children:[(0,i.jsx)(L,{name:"eye",mode:"line"}),"View Collection"]})}),Le&&(0,i.jsx)(H,{asChild:!0,children:(0,i.jsxs)(ie,{to:`/settings/webhooks/${e.webhook_config_id}`,isExternal:!0,children:[(0,i.jsx)(L,{name:"webhook",mode:"line"}),"View Webhook"]})}),_e&&(0,i.jsx)(H,{asChild:!0,children:(0,i.jsxs)("button",{onClick:De,role:"menuitem",children:[(0,i.jsx)(L,{name:"webhook",mode:"line"}),"Add a Webhook"]})}),Me&&(0,i.jsx)($o,{}),ye&&(0,i.jsx)(H,{asChild:!0,children:(0,i.jsxs)("button",{onClick:()=>r(e.collection_id),role:"menuitem",children:[(0,i.jsx)(L,{name:"archive",mode:"line"}),"Archive"]})}),le&&(0,i.jsx)(H,{asChild:!0,children:(0,i.jsxs)("button",{onClick:()=>s(e.collection_id),role:"menuitem",disabled:t,children:[(0,i.jsx)(L,{name:"archive",mode:"line"}),"Reactivate"]})}),J&&(0,i.jsx)(H,{asChild:!0,children:(0,i.jsxs)("button",{onClick:()=>u(e),role:"menuitem",disabled:o,children:[(0,i.jsx)(L,{name:"delete-bin-2",mode:"line"}),"Delete Collection"]})})]})]})})]}),g&&(0,i.jsx)(Ut,{collectionId:e.collection_id,webhooks:h,onClose:De,onSuccess:T.revalidate})]})}var W={headerContainer:"JW5uI",collectionNameContainer:"Y0HRS",headerContainerLeft:"Z-GcO",headerContainerRight:"_5JGeW",collectionLink:"xcA73",collectionName:"_0vyBm",icon:"H5gJL",noMargin:"c0EOr",reactivateButton:"Kc3ZL",fadeIn:"Q4FUS"};var C=n(a(),1);function Co({collection:e,user:o,...t}){let r=Be(),s=dt("(max-width: 1200px)"),u=ze(e,r),h=u.get("Overview"),T=u.get("Configuration"),g=h?`/collections/${e.collection_id}`:T?`/collections/${e.collection_id}/settings`:null,N=(0,C.jsxs)("div",{className:W.collectionNameContainer,children:[e.pinned_at&&(0,C.jsx)(se,{content:"Pinned",children:(0,C.jsx)(L,{"aria-label":"Pinned",name:"pushpin",size:"md",mode:"fill",className:W.icon})}),(0,C.jsx)(l,{variant:c.H2,className:W.collectionName,children:e.name})]}),d=o?At(o):null;return(0,C.jsxs)("div",{className:W.headerContainer,children:[(0,C.jsxs)("div",{className:W.headerContainerLeft,children:[g?(0,C.jsx)(ie,{"aria-label":`Navigate to ${e.name}`,to:g,className:W.collectionLink,children:N}):N,e.category!==j.Category.CATEGORY_UNSPECIFIED&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ao,{variant:"dot"}),(0,C.jsx)(l,{className:W.noMargin,variant:c.H5,children:e.category.replaceAll("_"," ")})]}),(0,C.jsx)(Et,{collection:e})]}),(0,C.jsxs)("div",{className:W.headerContainerRight,children:[d&&!s&&(0,C.jsx)("div",{className:W.fadeIn,children:(0,C.jsxs)(l,{variant:c.SMALL,children:["Creator: ",d]})}),d&&e.update_time&&!s&&(0,C.jsx)("div",{className:W.fadeIn,children:(0,C.jsx)(ao,{variant:"dot"})}),e.update_time&&(0,C.jsx)(ht,{labelText:"Last Update",timestamp:e.update_time.value,variant:"long",includeTooltip:!1,includeTime:!s}),(0,C.jsx)(fo,{...t,collection:e})]})]})}var ho=n(a(),1);function go({collection:e}){let o=Mt(e);if(!o)return null;let{variant:t,icon:r,text:s}=o;return(0,ho.jsx)($e,{variant:t,children:(0,ho.jsx)(Ot,{iconName:r,children:s})})}var Qe=n($(),1);var be={linkContainer:"YPnfl",statContainer:"b46iP",stat:"LkqkV",noWrap:"Hknkf"};var U=n(a(),1);function Ne({value:e,text:o,linkTo:t}){let r=(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(l,{variant:c.H1_SUB_HEADLINE,className:be.stat,children:(0,U.jsx)(gt,{value:e})}),(0,U.jsx)(l,{variant:c.H6,className:be.noWrap,children:o})]});return(0,U.jsx)(U.Fragment,{children:t?(0,U.jsx)(ie,{to:t,className:be.linkContainer,children:r}):(0,U.jsx)("div",{className:be.statContainer,children:r})})}var qe={noWrap:"Qr4A1",container:"uTQIM",chart:"_5O-7s"};var pe=n(a(),1);function vo({collection:e}){let o=e.size_metrics.map(lt);if(o.length<2)return null;let t=`${o.length} ${ft("Day",o.length)}`;return(0,pe.jsxs)("div",{className:qe.container,children:[(0,pe.jsx)(se,{content:"The trend line is updated at the end of the day",side:"top",children:(0,pe.jsx)("div",{className:qe.chart,children:(0,pe.jsx)(_t,{title:"Assets",stats:o})})}),(0,pe.jsxs)(l,{variant:c.H6,className:qe.noWrap,children:["Trend | ",t]})]})}var To={stats:"FADl8"};var re=n(a(),1);function yo({collection:e,isDisabled:o}){let t=(0,Qe.useMemo)(()=>st(e),[e.status]),r=(0,Qe.useMemo)(()=>Temporal.Now.zonedDateTimeISO().toPlainDate().toString(),[]),s=(0,Qe.useMemo)(()=>{let u=new Date;return u.setDate(u.getDate()-1),u.toISOString().split("T")[0]},[]);return o?(0,re.jsx)("div",{className:To.stats,children:(0,re.jsx)(Ne,{value:t,text:"Total Assets | Now"})}):(0,re.jsxs)("div",{className:To.stats,children:[(0,re.jsx)(vo,{collection:e}),(0,re.jsx)(Ne,{linkTo:`/collections/${e.collection_id}/results`,value:t,text:"Total Assets | Now"}),(0,re.jsx)(Ne,{linkTo:`/collections/${e.collection_id}/history?event_type=${"asset_added"}&start=${s}&end=${r}`,value:e.added_assets_24_hours.value,text:"New Assets | 24 Hrs"})]})}var B={cardDisabled:"w-M7-",cardPinned:"wNydO",content:"o5QOD",bodyContainer:"lqAN8",bodyContainerPinned:"Di9of",queryDescriptionContainer:"jic98",query:"aOb5r",description:"CCqlb",tooltip:"CET1X"};function Yt(e){let{users:o}=Ye();return o.get(e)}var R=n(a(),1);function Kt({collection:e,...o}){let t=Yt(e.created_by),r=St(e);return(0,R.jsx)("div",{className:xe(e.pinned_at&&B.cardPinned),children:(0,R.jsxs)(Uo,{variant:r?ro.DEFAULT:ro.INTERACTIVE,headerPadding:xo.NONE,className:xe(r&&B.cardDisabled),children:[(0,R.jsx)(Co,{collection:e,user:t,...o}),(0,R.jsxs)("div",{className:B.content,children:[(0,R.jsx)(go,{collection:e}),(0,R.jsxs)("div",{className:xe(B.bodyContainer,e.pinned_at&&B.bodyContainerPinned),children:[(0,R.jsxs)("div",{className:B.queryDescriptionContainer,children:[(0,R.jsx)(se,{content:e.query,contentClassName:B.tooltip,children:(0,R.jsx)(l,{variant:c.SMALL_SOURCE,className:B.query,children:e.query})}),e.description&&(0,R.jsx)(se,{content:e.description,contentClassName:B.tooltip,children:(0,R.jsx)(l,{variant:c.SMALL_SOURCE,className:B.description,children:e.description})})]}),(0,R.jsx)(yo,{collection:e,isDisabled:r})]})]})]},e.collection_id)})}var Ze=n(a(),1);function Lo({collections:e,isLoading:o,isCollectionsLimitReached:t,setCollectionToArchive:r,setCollectionToUnarchive:s,setCollectionToDelete:u}){return(0,Ze.jsx)("div",{className:Pt.collectionsList,children:e.length>0?e.map(h=>(0,Ze.jsx)(Kt,{collection:h,isLoading:o,isCollectionsLimitReached:t,setCollectionToArchive:r,setCollectionToUnarchive:s,setCollectionToDelete:u},h.collection_id)):(0,Ze.jsx)(bt,{})})}var G=n($(),1);var $t=500,zt="collectionsFilters",he="q",ae="category",ue="sort",fe="owner",Je="all",Xe=[...lo.map(e=>({label:at(e),value:e}))],Gt=[{label:"Most Recent",value:"CreateTime"},{label:"Last Updated",value:"UpdateTime"},{label:"Collection Name",value:"Name"},{label:"Total Assets",value:"TotalAssets"},{label:"New Assets",value:"NewAssets_24Hours"}],Cn=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,hn=oe.optional(oe.union([oe.string().regex(Cn),oe.string()])),gn=oe.enum(lo).optional(),vn=oe.string().optional(),Tn=oe.nativeEnum(Ke).optional(),qt={[he]:hn,[ae]:gn,[ue]:Tn,[fe]:vn};var ge={form:"xJDeV",searchInput:"Bk-8u",ownerSelect:"oG9p7",categorySelect:"jN1-h",sortSelect:"N1wgK",inlineLabel:"qgFkU"};var Qt=e=>[{label:"All",value:Je},...Array.from(e.values()).filter(o=>o.identity).sort((o,t)=>o.identity.firstName?t.identity.firstName?o.identity.firstName.localeCompare(t.identity.firstName):-1:1).map(o=>({label:`${o.identity.firstName}${o.identity.lastName?` ${o.identity.lastName}`:""}`,value:o.id}))];var V=n(a(),1);function Eo(){let e=F(),{users:o}=Ye(),t=e.state==="loading",r=yt(),[s]=Pe(),u=Qt(o),[h,T]=(0,G.useState)(s.get("q")||""),{handleValueChange:g,handleSubmit:N,formState:d}=vt(qt,{[he]:h,[ae]:s.get("category")??"",[ue]:s.get("sort")??"CreateTime",[fe]:s.get("owner")??Je},zt,r,!0),Y=nt({value:h,delay:$t});(0,G.useEffect)(()=>{g(he,Y),r({[he]:Y})},[Y]);let M=(0,G.useCallback)(y=>{T(y.target.value)},[]),q=(0,G.useCallback)(()=>T(""),[]),P=y=>{g(fe,y),r({[fe]:y})},Q=(0,G.useMemo)(()=>Xe.filter(y=>d.values[ae].split(",").includes(y.value)),[d.values[ae],Xe]),Te=y=>{let Z=y.map(J=>J.value).join(",");g(ae,Z),r({[ae]:Z})},Ce=(0,G.useCallback)(y=>{g(ue,y),r({[ue]:y})},[g,r]);return(0,V.jsxs)(_,{"data-testid":"filters-form",onSubmit:N,className:ge.form,children:[(0,V.jsx)("div",{className:ge.ownerSelect,children:(0,V.jsx)(Ee,{name:fe,options:u,contentLeft:(0,V.jsx)(He,{iconName:"filter-3",label:"Creator"}),value:d.values[fe],onValueChange:P,disabled:u.length===0||t})}),(0,V.jsx)(Fo,{name:ae,options:Xe,selectedOptions:Q,placeholder:"Select",onChange:Te,className:ge.categorySelect,disabled:t,contentLeft:(0,V.jsx)(He,{iconName:"filter-3",label:"Category"})}),(0,V.jsx)("div",{className:ge.sortSelect,children:(0,V.jsx)(Ee,{name:ue,options:Gt,value:d.values[ue],onValueChange:Ce,contentLeft:(0,V.jsx)(He,{icon:"sort-desc",label:"Sort"})})}),(0,V.jsx)(Tt,{className:ge.searchInput,name:he,value:h,disabled:t,onChange:M,onClear:q,placeholder:"Search collection name or UUID...",autoComplete:"off"})]})}var Zt=n($(),1);var ve={modalContent:"Qr13N"};var I=n(a(),1);function Jt({collectionToArchive:e,setCollectionToArchive:o}){let t=F(),r=(0,Zt.useCallback)(s=>{s||o(null)},[o]);return(0,I.jsx)(ne,{size:te.MEDIUM,open:!0,onOpenChange:r,footerActions:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(b,{onClick:()=>o(null),variant:E.DEFAULT,children:"No, keep it"}),(0,I.jsxs)(_,{method:"post",onSubmit:()=>o(null),children:[(0,I.jsx)("input",{hidden:!0,name:"collection_id",value:e,readOnly:!0}),(0,I.jsx)("input",{hidden:!0,name:"fetcherKey",value:Ge,readOnly:!0}),(0,I.jsx)("input",{hidden:!0,name:"archive",value:"true",readOnly:!0}),(0,I.jsx)(x,{}),(0,I.jsx)(b,{isLoading:t.state==="submitting",variant:E.PRIMARY,children:"Yes, archive it"})]})]}),header:(0,I.jsx)(l,{variant:c.H1,children:"Archive this Collection?"}),children:(0,I.jsxs)("div",{className:ve.modalContent,children:[(0,I.jsx)(l,{variant:c.DEFAULT_SEMIBOLD,children:"TIP: Collection settings will be preserved and can be reactivated later if needed."}),(0,I.jsx)(l,{variant:c.DEFAULT,children:"This action will remove all assets and history. Assets will no longer be added to this collection and will no longer consume credits."})]})})}var je=n($(),1);var A=n(a(),1);function Xt({collectionToDelete:e,setCollectionToDelete:o}){let{accessState:t}=(0,je.useContext)(We),r=t?.organization?.organizationId,s=F(),u=(0,je.useCallback)(h=>{h||o(null)},[o]);return(0,A.jsx)(ne,{size:te.MEDIUM,open:!0,onOpenChange:u,footerActions:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(b,{onClick:()=>o(null),variant:E.DEFAULT,children:"No, keep it"}),(0,A.jsxs)(_,{method:"post",onSubmit:()=>o(null),children:[(0,A.jsx)("input",{hidden:!0,name:"collection_id",value:e.collection_id,readOnly:!0}),(0,A.jsx)("input",{hidden:!0,name:"org",value:r,readOnly:!0}),(0,A.jsx)("input",{hidden:!0,name:"fetcherKey",value:wt,readOnly:!0}),(0,A.jsx)("input",{hidden:!0,name:"delete",value:"true",readOnly:!0}),(0,A.jsx)(x,{}),(0,A.jsx)(b,{isLoading:s.state==="submitting",variant:E.ALERT,children:"Yes, delete it"})]})]}),header:(0,A.jsx)(l,{variant:c.H1,children:"Delete this Collection?"}),children:(0,A.jsx)("div",{className:ve.modalContent,children:(0,A.jsxs)(l,{children:["Deleting collections is permanent and cannot be undone. Are you sure you want to delete the ",(0,A.jsx)("strong",{children:e.name})," ","Collection?"]})})})}var k=n(a(),1);function jt({collectionToUnarchive:e,setCollectionToUnarchive:o}){let t=F();return(0,k.jsx)(ne,{size:te.MEDIUM,open:!0,onOpenChange:r=>{r||o(null)},footerActions:[(0,k.jsx)(b,{onClick:()=>o(null),variant:E.DEFAULT,children:"No, leave it"}),(0,k.jsxs)(_,{method:"post",onSubmit:()=>o(null),children:[(0,k.jsx)("input",{hidden:!0,name:"collection_id",value:e,readOnly:!0}),(0,k.jsx)("input",{hidden:!0,name:"archive",value:"false",readOnly:!0}),(0,k.jsx)("input",{hidden:!0,name:"fetcherKey",value:Ge,readOnly:!0}),(0,k.jsx)(x,{}),(0,k.jsx)(b,{isLoading:t.state==="submitting",variant:E.PRIMARY,children:"Yes, reactivate it"})]})],header:(0,k.jsx)(l,{variant:c.H1,children:"Reactivate this Collection?"}),children:(0,k.jsxs)("div",{className:ve.modalContent,children:[(0,k.jsx)(l,{variant:c.DEFAULT_SEMIBOLD,children:"TIP: Collection settings have been preserved but the assets will need to repopulate."}),(0,k.jsx)(l,{variant:c.DEFAULT,children:"This action will reactivate an archived collection and you will be charged credits daily for consumption."})]})})}var Se={topBar:"bvFBV",selectItem:"nxR6m",selectLabel:"I1y28",searchInput:"eYspM",barAndTabContainer:"sCY5Q",tabContainer:"nFKis",errorWrapper:"mH-Ct",loadMoreContainer:"I3tgw",loadMoreButton:"_1Nu-k"};var En=n(dn(),1),An=n(mn(),1),m=n(a(),1),yn=Ct("Censys Collections - All");function en({query:e="",slots:o={},children:t}){let{t:r}=Mo(),s=[{pathName:r("Collections")}];return(0,m.jsx)(pt,{initialQuery:e,breadcrumbs:s,slots:{searchHeader:(0,m.jsx)(mt,{breadcrumbs:s}),header:o.header,actions:o.actions,navTabs:o.navTabs},children:t})}function on(){let e=Fe(),{collections:o,isCollectionsLimitReached:t,collectionsLimit:r,activeCount:s,archivedCount:u,toast:h,nextPageToken:T}=we(),g=ot(),N=ke(),[d,Y]=Pe(),[M,q]=(0,p.useState)(o),[P,Q]=(0,p.useState)(T),[Te,Ce]=(0,p.useState)(!1),[y,Z]=(0,p.useState)(null),[J,ye]=(0,p.useState)(null),[le,Me]=(0,p.useState)(null),[Oe,Le]=(0,p.useState)(null);(0,p.useEffect)(()=>{e?.state===1&&e?.errorMessage&&Le(e.errorMessage)},[e]);let _e=F(),De=Xo(),eo=ct({source:"collections-index"}),[X,tn]=(0,p.useState)("All Collections"),[nn,rn]=(0,p.useState)(new Set),[an,oo]=(0,p.useState)([]),[ln,Ao]=(0,p.useState)(!0);(0,p.useEffect)(()=>{Ao(!1)},[M]),(0,p.useEffect)(()=>{if(y||J||le)return;let v=setInterval(()=>{Te||N.revalidate()},mo);return()=>{clearInterval(v)}},[y,le,J,mo,N.revalidate,d]),(0,p.useEffect)(()=>{_e.state==="submitting"&&(Le(null),Z(null))},[X]),(0,p.useEffect)(()=>{let v=M.filter(({collection_id:O,status:K})=>nn.has(O)&&K===j.Status.ACTIVE);v.length>0&&oo(O=>[...O,...v.map(K=>`${K.name} has been populated and is ready to view`)]),rn(new Set(M.filter(O=>O.status===j.Status.POPULATING).map(O=>O.collection_id)))},[M]),(0,p.useEffect)(()=>{let v=new URLSearchParams(d);X==="Archived"?v.set("archived","true"):v.delete("archived"),v.toString()!==d.toString()&&Y(v)},[d,X,o,T]),(0,p.useEffect)(()=>{q(o),Q(T),Ce(!1)},[o,T]);let Io=(0,p.useCallback)(v=>{tn(v),Ao(!0)},[]),sn=(0,p.useCallback)((v,O)=>{v||oo(K=>K.filter((bo,to)=>to!==O))},[oo]),cn=(0,p.useCallback)(()=>{if(P){Ce(!0);let v=new URLSearchParams(d);v.set("nextPageToken",P),g.load(`?index&${v}`)}},[P,g.load,d]);return(0,p.useEffect)(()=>{if(g.data){let{collections:v,nextPageToken:O}=g.data;q(K=>{let bo=new Set(K.map(Re=>Re.collection_id)),to=v.filter(Re=>!bo.has(Re.collection_id)&&(X!=="Archived"||Re.status===j.Status.ARCHIVED));return[...K,...to]}),Q(O)}},[g.data]),(0,m.jsx)(en,{slots:{header:Oe?(0,m.jsx)(Ve,{variant:Ue.ERROR,onDismiss:()=>Le(null),children:Oe}):void 0,actions:(0,m.jsxs)("div",{className:Se.topBar,children:[(0,m.jsx)(b,{"data-testid":"create-collection-button",iconLeft:"add",onClick:()=>De(eo),disabled:t,children:"Create Collection"}),(0,m.jsx)(Eo,{})]}),navTabs:(0,m.jsxs)(Nt,{children:[(0,m.jsx)(so,{id:"all-collections",isActive:X==="All Collections",onClick:()=>Io("All Collections"),children:"All Collections"}),(0,m.jsx)(so,{id:"archived",isActive:X==="Archived",onClick:()=>Io("Archived"),"data-testid":"archived-test-id",children:"Archived"})]})},children:(0,m.jsx)(tt,{children:(0,m.jsxs)("div",{children:[t&&(0,m.jsx)(co,{}),(0,m.jsx)(kt,{title:X==="All Collections"?"TOTAL COLLECTIONS":"TOTAL ARCHIVED",count:X==="All Collections"?s:u,limit:X==="All Collections"?r:void 0,isLoading:ln}),y&&(0,m.jsx)(Jt,{collectionToArchive:y,setCollectionToArchive:Z}),J&&(0,m.jsx)(jt,{collectionToUnarchive:J,setCollectionToUnarchive:ye}),le&&(0,m.jsx)(Xt,{collectionToDelete:le,setCollectionToDelete:Me}),(0,m.jsx)(Lo,{collections:M,isLoading:_e.state==="submitting",isCollectionsLimitReached:t,setCollectionToArchive:Z,setCollectionToUnarchive:ye,setCollectionToDelete:Me}),P&&M.length>0&&(0,m.jsx)("div",{className:Se.loadMoreContainer,children:(0,m.jsx)(b,{className:Se.loadMoreButton,variant:E.DEFAULT,onClick:cn,isLoading:g.state==="loading",children:"Load More"})}),h&&(0,m.jsx)(io,{title:h,behavior:no.DISMISSIVE}),an.map((v,O)=>(0,m.jsx)(io,{title:v,variant:ko.SUCCESS,behavior:no.DISMISSIVE,onOpenChange:K=>sn(K,O)},`${v}-${O}`))]})})})}function Ln(){let e=So();return(0,m.jsx)(en,{children:(0,m.jsx)("div",{className:Se.errorWrapper,children:No(e)&&Qo(e.data)?(0,m.jsx)(It,{errorCode:e.data.code}):(0,m.jsx)(ut,{error:e})})})}export{Ln as ErrorBoundary,on as default,yn as meta};
