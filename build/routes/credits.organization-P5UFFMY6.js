import{a as M}from"/censys/build/_shared/chunk-ANVGH3TW.js";import{b as H,d as V}from"/censys/build/_shared/chunk-X5LNCAS5.js";import"/censys/build/_shared/chunk-5O6NP3HX.js";import"/censys/build/_shared/chunk-XLW6D2H7.js";import{a as z}from"/censys/build/_shared/chunk-6PRZAB44.js";import{a as J}from"/censys/build/_shared/chunk-EAJKCKTG.js";import{a as h}from"/censys/build/_shared/chunk-3JU625ZU.js";import{d as P}from"/censys/build/_shared/chunk-W5Y6TOHF.js";import"/censys/build/_shared/chunk-AEP7YWHE.js";import"/censys/build/_shared/chunk-URNZPFSF.js";import"/censys/build/_shared/chunk-WK35ORSL.js";import{a as B}from"/censys/build/_shared/chunk-HG7D3PDC.js";import"/censys/build/_shared/chunk-ZKAH2G64.js";import"/censys/build/_shared/chunk-G6DKMBFA.js";import"/censys/build/_shared/chunk-V6YEAJYZ.js";import"/censys/build/_shared/chunk-YZ2VHXR4.js";import{a as u}from"/censys/build/_shared/chunk-RPAGMMSK.js";import"/censys/build/_shared/chunk-HLRAT4GD.js";import"/censys/build/_shared/chunk-HPK4AUA3.js";import"/censys/build/_shared/chunk-W2GUOEY7.js";import"/censys/build/_shared/chunk-FQAS3FYV.js";import"/censys/build/_shared/chunk-P2FXGQA2.js";import{f as C}from"/censys/build/_shared/chunk-FH7VNUY3.js";import"/censys/build/_shared/chunk-B7DSLLNE.js";import"/censys/build/_shared/chunk-KMD3IRPL.js";import"/censys/build/_shared/chunk-Y7XN4DST.js";import{A as m,B as c,C as R,G as L,I as x,_ as D,aa as b,ua as _,va as I}from"/censys/build/_shared/chunk-UYH4GQ7Z.js";import"/censys/build/_shared/chunk-6URBRDCL.js";import"/censys/build/_shared/chunk-Q6RLBVJI.js";import{a as N,c as d}from"/censys/build/_shared/chunk-XJAPXWKX.js";import{d as o}from"/censys/build/_shared/chunk-2QEWK57A.js";var E=o(N(),1);var y={email:"ri6HE",row:"i2A7g",rowContent:"fYpAK",rowContentBar:"t5puq",rowHeader:"_6GJr9"};var a=o(d(),1);function O({color:t,count:r,email:s,percentage:i,userName:g,widthPercentage:p}){return(0,a.jsxs)("div",{className:y.row,children:[(0,a.jsxs)("div",{className:y.rowHeader,children:[(0,a.jsx)(c,{variant:m.DEFAULT,children:g}),(0,a.jsx)(B,{variant:"line--vertical",spacing:8}),(0,a.jsx)(c,{variant:m.DEFAULT,className:y.email,children:s})]}),(0,a.jsxs)("div",{className:y.rowContent,children:[(0,a.jsx)("div",{className:y.rowContentBar,style:{width:`${Math.min(Math.max(p,0),100)}%`,backgroundColor:t}}),(0,a.jsx)(c,{variant:m.DEFAULT_SEMIBOLD,children:(0,a.jsx)(D,{value:r})}),(0,a.jsxs)(c,{variant:m.DEFAULT,children:["(",(0,a.jsx)(D,{value:Math.round(i)}),"%)"]})]})]})}var v=[u.FEEDBACK_INFO,`rgb(from ${u.FEEDBACK_INFO} r g b / 0.87)`,`rgb(from ${u.FEEDBACK_INFO} r g b / 0.74)`,`rgb(from ${u.FEEDBACK_INFO} r g b / 0.61)`,`rgb(from ${u.FEEDBACK_INFO} r g b / 0.48)`];var n={body:"ncd1I",card:"jGwZP",header:"IZv9L",headerText:"_7Chrn",loading:"-V6cZ",subHeadingText:"Izapl",viewAllButton:"_14et6"};var e=o(d(),1),$=o(N(),1);function S({rows:t,isLoading:r,isError:s}){let[i,g]=(0,E.useState)(t.length<=5&&t.length>0),p=(0,E.useMemo)(()=>[...t].sort((U,f)=>f.count-U.count),[t]),A=p[0]?.count??0,T=p.slice(0,i?t.length:5),w=r?(0,e.jsx)("div",{className:n.loading,children:(0,e.jsx)(x,{size:L.EXTRA_LARGE})}):s?(0,e.jsx)(P,{"data-testid":"error_USAGE_BY_USER_CARD",iconName:"pulse",title:"No credit information available at this time.",children:"Try again another time."}):T.map((U,f)=>{let Y=v[f>=v.length?v.length-1:f],q=Math.max(U.count/A*100,.1);return(0,$.createElement)(O,{...U,color:Y,widthPercentage:q,key:`${U.userName}-${f}`})}),Z=!r&&!s;return(0,e.jsxs)(I,{bodyPadding:_.NONE,className:n.card,children:[(0,e.jsxs)("div",{className:n.header,children:[(0,e.jsx)(c,{variant:m.H4,className:n.headerText,children:"Usage by User"}),(0,e.jsx)(B,{variant:"line--vertical",spacing:8}),(0,e.jsx)(c,{variant:m.H5,className:n.subHeadingText,children:"Past 30 Days"})]}),(0,e.jsx)("div",{className:n.body,children:w}),Z&&(0,e.jsx)(e.Fragment,{children:i?(0,e.jsx)(b,{variant:R.DEFAULT,className:n.viewAllButton,onClick:()=>g(!1),children:"View Less"}):(0,e.jsxs)(b,{variant:R.DEFAULT,className:n.viewAllButton,onClick:()=>g(!0),children:["View All (",t.length,")"]})})]})}var G=o(d(),1);function F(){let t=C(),r=h(()=>"/api/credits/usageByUser",[t?.organizationId]),s=r.state===0,i=r.state===2;return(0,G.jsx)(S,{rows:r.data?.rows??[],isLoading:s,isError:i})}var K={usageSection:"lgks4"};var Q=o(J(),1),l=o(d(),1);function k(){let t=C(),r=h(()=>"/api/credits/org/accountStats",[t?.organizationId]),s=r.state===0,i=r.state===2,g,p;if(r.data){let{aggregations:T,usageOverTime:w}=z(r.data);g=T,p=w}let{totalCount:A}=g??{};return(0,l.jsxs)("section",{className:K.usageSection,children:[(0,l.jsx)(H,{values:[{count:A??0,description:"Total Credits Used",timeFrame:"Past 30 Days"}],isLoading:s,isError:i}),(0,l.jsx)(V,{usageOverTime:p??{daily:[],monthly:[]},aggregations:g,subHeading:"Monthly",isLoading:s,isError:i}),(0,l.jsx)(M,{isOrgView:!0}),(0,l.jsx)(F,{})]})}export{k as default};
