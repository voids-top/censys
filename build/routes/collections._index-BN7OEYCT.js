import{a as yn,b as Fe,c as En}from"/censys/build/_shared/chunk-JHLOZO6G.js";import{a as Ln}from"/censys/build/_shared/chunk-KANQT6KQ.js";import{a as bn}from"/censys/build/_shared/chunk-JBYFDD3C.js";import{a as vn}from"/censys/build/_shared/chunk-26WP42QU.js";import"/censys/build/_shared/chunk-URNZPFSF.js";import{a as Tn}from"/censys/build/_shared/chunk-P2Z7XMJZ.js";import{a as Uo}from"/censys/build/_shared/chunk-6HSN5L3Z.js";import{a as un}from"/censys/build/_shared/chunk-OOWGGRVL.js";import{a as Cn,b as fn,c as hn,d as gn}from"/censys/build/_shared/chunk-AWLKSJ4B.js";import"/censys/build/_shared/chunk-AEKKJQLA.js";import{a as vo}from"/censys/build/_shared/chunk-4NXR4FZK.js";import{a as fi}from"/censys/build/_shared/chunk-O24ST6IF.js";import{a as pn}from"/censys/build/_shared/chunk-RS5DP3HK.js";import{b as dn}from"/censys/build/_shared/chunk-H7Q3B5O5.js";import{a as an}from"/censys/build/_shared/chunk-ULGJ3ZYU.js";import{c as Fo,d as ln}from"/censys/build/_shared/chunk-DT7XMIXP.js";import{a as cn}from"/censys/build/_shared/chunk-BGO373KW.js";import"/censys/build/_shared/chunk-ARWSWGZJ.js";import"/censys/build/_shared/chunk-WW7MKZVD.js";import"/censys/build/_shared/chunk-RLL7RAJO.js";import{a as mn}from"/censys/build/_shared/chunk-MB2LZLPU.js";import{b as sn}from"/censys/build/_shared/chunk-BXMBML5J.js";import"/censys/build/_shared/chunk-IUMSQHOS.js";import{a as rn}from"/censys/build/_shared/chunk-WNJFRA3F.js";import"/censys/build/_shared/chunk-FYP76FCX.js";import{a as go}from"/censys/build/_shared/chunk-OFRBI5JW.js";import"/censys/build/_shared/chunk-OKZWZKQL.js";import{a as Ci}from"/censys/build/_shared/chunk-IC5AY47K.js";import{c as Ht,q as on,r as tn}from"/censys/build/_shared/chunk-B5UNN2SO.js";import{b as fo}from"/censys/build/_shared/chunk-TUDXVIEL.js";import"/censys/build/_shared/chunk-7C4UGOB7.js";import"/censys/build/_shared/chunk-EI6HYVQX.js";import"/censys/build/_shared/chunk-J22KWXE5.js";import{a as ho}from"/censys/build/_shared/chunk-JDWADSGD.js";import{b as no,c as K}from"/censys/build/_shared/chunk-EMHGEENV.js";import{a as Yt}from"/censys/build/_shared/chunk-4WX73TCZ.js";import"/censys/build/_shared/chunk-CJIEOTRC.js";import{a as Xt}from"/censys/build/_shared/chunk-5OP2ERYU.js";import"/censys/build/_shared/chunk-LOKTUJJ3.js";import"/censys/build/_shared/chunk-BU2LL35M.js";import{a as Gt,b as Co,c as re,d as zt,i as qt,j as Qt,l as Jt}from"/censys/build/_shared/chunk-IRHQADG7.js";import"/censys/build/_shared/chunk-KSE2ZBRQ.js";import"/censys/build/_shared/chunk-FP2KPINM.js";import"/censys/build/_shared/chunk-VKYVKQW2.js";import"/censys/build/_shared/chunk-OQUAXVLV.js";import{a as nn}from"/censys/build/_shared/chunk-BWODHJE6.js";import"/censys/build/_shared/chunk-RWVGPSU7.js";import{d as Zt,e as jt,y as xo}from"/censys/build/_shared/chunk-4DOFQKLI.js";import"/censys/build/_shared/chunk-MB47ZWHU.js";import"/censys/build/_shared/chunk-URNZPFSF.js";import"/censys/build/_shared/chunk-WK35ORSL.js";import{a as $t}from"/censys/build/_shared/chunk-XTODG4BZ.js";import{a as Kt,n as en}from"/censys/build/_shared/chunk-426SZY5O.js";import"/censys/build/_shared/chunk-HPK4AUA3.js";import{a as ie}from"/censys/build/_shared/chunk-TTVDHAYB.js";import"/censys/build/_shared/chunk-6EMU7K4F.js";import{a as Le}from"/censys/build/_shared/chunk-M5RKE22T.js";import{b as Wt,h as xe,k as Bt}from"/censys/build/_shared/chunk-ZP3FOFQD.js";import{b as ne}from"/censys/build/_shared/chunk-E7FS2ZQL.js";import{c as mo,e as Pe,h as po}from"/censys/build/_shared/chunk-ST66DGSY.js";import{a as pe,e as uo,i as X}from"/censys/build/_shared/chunk-QJVHIZ52.js";import"/censys/build/_shared/chunk-N7X32FEJ.js";import{$ as M,A as s,Aa as Rt,B as S,Ba as Dt,Ca as wt,Da as G,Fa as kt,G as ze,Ga as Pt,H as Et,J as Lt,Xa as J,ab as xt,ca as Nt,cb as Po,db as Ft,eb as Ut,ga as io,gb as co,ha as ro,hb as Vt,ia as wo,ja as ao,ka as lo,la as Ce,ma as At,na as St,oa as fe,ra as so,ta as _t,ua as ko,wa as It,x as ue,xa as Mt,y as f,ya as Ot,z as p}from"/censys/build/_shared/chunk-DN2SN5ZC.js";import{c as bt}from"/censys/build/_shared/chunk-F5K75D4K.js";import{c as yt}from"/censys/build/_shared/chunk-44DVAK2X.js";import"/censys/build/_shared/chunk-OLCKCRUU.js";import{B as to,C as Tt,a as gt,i as $,j as eo,k as vt,p as oo,t as P,z as ke}from"/censys/build/_shared/chunk-JMZ2MZXD.js";import{b as a}from"/censys/build/_shared/chunk-ZST4CTCB.js";import{a as B}from"/censys/build/_shared/chunk-MOHCJWAV.js";import{e as r}from"/censys/build/_shared/chunk-2TWE7TSA.js";var C=r(B(),1);var An=r(B(),1);var Nn={limitMessage:"QsoRD"};var ae=r(a(),1);function Vo(){let e=(0,An.useContext)(yt),o=Pe()?.currentPlanType,t=Wt("ACCOUNTS_SITE_URL");return(0,ae.jsx)("div",{className:Nn.limitMessage,children:(0,ae.jsxs)(ro,{variant:io.INFO,children:[o==="Enterprise"&&(0,ae.jsx)("span",{children:"You have reached the maximum number of collections for your plan. Contact your account representative to purchase additional collections."}),o==="Starter"&&(0,ae.jsxs)("span",{children:["You have reached the maximum number of collections for your plan."," ",(0,ae.jsx)(ie,{href:jt(e),isExternal:!0,children:"Contact us"})," ","to upgrade to Enterprise Tier."]}),o==="Free"&&(0,ae.jsxs)("span",{children:["Congratulations, you have set up your free collection! To create more,"," ",(0,ae.jsx)(ie,{href:`${t}/settings/plan`,isExternal:!0,children:"upgrade to Starter"}),"."]})]})})}var Sn={collectionsList:"_2jUcW"};var Z={headerContainer:"JW5uI",collectionNameContainer:"Y0HRS",headerContainerLeft:"Z-GcO",headerContainerRight:"_5JGeW",collectionLink:"xcA73",collectionName:"_0vyBm",icon:"H5gJL",noMargin:"c0EOr",reactivateButton:"Kc3ZL",fadeIn:"Q4FUS"};var Ne=r(B(),1);var Wo=3e4;var To="archive-collection-form",_n="delete-collection-form",In="pin-collection-form",Mn="unpin-collection-form",On="update-view-preference-form";var $i=["Name"];var ee=r(B(),1);var qe=r(B(),1);var Ue={content:"RWKbD",webhookLabel:"uK-Bm",linkContent:"Vr7qF",successArea:"LT9so"};var N=r(a(),1),Bo=(0,qe.forwardRef)(({collectionId:e,webhooks:o,selectedWebhook:t,onWebhookChange:n,onClose:i,errorMessage:c,isSuccess:m},h)=>{let g=(0,qe.useMemo)(()=>o.map(d=>({label:(0,N.jsxs)("div",{className:Ue.webhookLabel,children:[(0,N.jsx)(f,{name:"webhook",mode:"line",size:"md"}),d.display_name]}),value:d.name})),[o]),E=(0,qe.useMemo)(()=>o.find(d=>d.name===t)?.name,[o,t]);return(0,N.jsxs)(P,{method:"post",ref:h,children:[(0,N.jsx)("input",{type:"hidden",name:"fetcherKey",value:Gt}),(0,N.jsx)("input",{type:"hidden",name:"collectionId",value:e}),(0,N.jsx)("input",{type:"hidden",name:"webhookName",value:E||""}),(0,N.jsx)(K,{}),(0,N.jsxs)("div",{className:Ue.content,children:[(0,N.jsx)(xt,{label:"Select existing Webhook",errorText:c,children:(0,N.jsx)(ze,{options:g,value:t,onValueChange:n,valueProps:{placeholder:(0,N.jsxs)("div",{className:Ue.webhookLabel,children:[(0,N.jsx)(f,{name:"webhook",mode:"line",size:"md"}),"Select..."]})},disabled:m})}),!m&&(0,N.jsxs)(s,{children:["or"," ",(0,N.jsx)(ie,{href:`/settings/webhooks/new?collection_id=${e}`,onClick:i,isExternal:!0,children:(0,N.jsxs)("div",{className:Ue.linkContent,children:["Create New Webhook",(0,N.jsx)(f,{name:"arrow-right",mode:"line"})]})})]}),m&&(0,N.jsx)(fo,{variant:"success",className:Ue.successArea,icon:"checkbox-circle-line",children:"Webhook added!"})]})]})});var x=r(a(),1);function Rn({collectionId:e,webhooks:o,onClose:t,onSuccess:n}){let i=(0,ee.useRef)(null),c=to(),m=$(),[h,g]=(0,ee.useState)(void 0),[E,d]=(0,ee.useState)(!1),[T,R]=(0,ee.useState)(void 0),D=m.state!=="idle";(0,ee.useEffect)(()=>{c?.state===0&&(d(!0),R(void 0)),c?.state===1&&(d(!1),R(c.errorMessage))},[c,t,n]);let W=()=>{h&&i.current?.requestSubmit()},Y=(0,ee.useMemo)(()=>E&&h?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(M,{onClick:t,variant:S.DEFAULT,children:"Done"}),(0,x.jsx)($t,{link:{to:`/settings/webhooks/${vo(h)}`},button:{variant:S.SECONDARY},children:"View Webhook"})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(M,{onClick:t,variant:S.DEFAULT,children:"Cancel"}),(0,x.jsx)(M,{onClick:W,variant:S.PRIMARY,isLoading:D,disabled:!h,children:"Save"})]}),[E,h,D,t,W]);return(0,x.jsx)(fe,{size:Ce.MEDIUM,open:!0,onOpenChange:t,header:(0,x.jsx)(s,{variant:p.H2,children:"Add a Webhook"}),headerBorder:At.NONE,footerBorder:St.NONE,footerActions:Y,children:(0,x.jsx)(Bo,{ref:i,collectionId:e,webhooks:o,selectedWebhook:h,onWebhookChange:g,onClose:t,errorMessage:T,isSuccess:E})})}var Dn=r(B(),1);var H=r(a(),1);function Ho({collectionId:e,emailAlertEnabled:o}){let t=(0,Dn.useRef)(null),n=()=>{t.current?.requestSubmit()};return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(P,{method:"post",ref:t,children:[(0,H.jsx)("input",{type:"hidden",name:re.COLLECTION_ID,value:e,readOnly:!0}),(0,H.jsx)("input",{type:"hidden",name:re.EMAIL_ALERT_ENABLED,value:(!o).toString(),readOnly:!0}),(0,H.jsx)("input",{type:"hidden",name:re.FETCHER_KEY,value:Co,readOnly:!0}),(0,H.jsx)(K,{})]}),(0,H.jsx)(G,{asChild:!0,children:(0,H.jsxs)("button",{onClick:n,role:"menuitem",children:[(0,H.jsx)(f,{name:o?"notification-off":"notification-2",mode:o?"fill":"line"}),o?"Remove Email Notifications":"Add Email Notifications"]})})]})}var wn={menu:"v4Whr"};var l=r(a(),1);function kn({collectionId:e,fetcherKey:o,formRef:t}){return(0,l.jsxs)(P,{method:"post",ref:t,children:[(0,l.jsx)("input",{type:"hidden",name:"collection_id",value:e,readOnly:!0}),(0,l.jsx)("input",{type:"hidden",name:"fetcherKey",value:o,readOnly:!0}),(0,l.jsx)(K,{})]})}function Pn({label:e,iconName:o,iconMode:t,formRef:n}){return(0,l.jsx)(G,{asChild:!0,children:(0,l.jsxs)("button",{onClick:()=>{n.current?.requestSubmit()},role:"menuitem",children:[(0,l.jsx)(f,{name:o,mode:t}),e]})})}function Qe({collection:e,isLoading:o,isCollectionsLimitReached:t,setCollectionToArchive:n,setCollectionToUnarchive:i,setCollectionToDelete:c}){let{webhooks:m}=ke(),h=eo(),[g,E]=(0,Ne.useState)(!1),{accessState:d}=(0,Ne.useContext)(mo),T=(0,Ne.useRef)(null),R=(0,Ne.useRef)(null),D=d?.currentPlanType==="Free",W=Kt(d,1),Y=d?.userId===e.created_by,me=po("collection-emails"),Te=Y&&me,b=e.status===X.Status.ARCHIVED,q=e.status===X.Status.POPULATING,Q=W||Y,be=!b&&!q,Re=b&&!q&&!D,De=be||Re||Q,we=Fe(e,d).get("Configuration"),$e=W&&e.webhook_config_id,ye=W&&!e.webhook_config_id&&!b,Ke=m.length>0,Ee=()=>{E(Ze=>!Ze)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(kn,{collectionId:e.collection_id,fetcherKey:In,formRef:T}),(0,l.jsx)(kn,{collectionId:e.collection_id,fetcherKey:Mn,formRef:R}),(0,l.jsxs)(Ot,{modal:!1,children:[(0,l.jsx)(Rt,{asChild:!0,children:(0,l.jsx)(Nt,{iconName:"more-2",iconMode:"line",variant:S.GHOST,"aria-label":"More options"})}),(0,l.jsxs)(Dt,{align:"end",className:wn.menu,children:[(0,l.jsx)(kt,{children:(0,l.jsx)(s,{variant:p.H5,children:"Actions"})}),(0,l.jsxs)(wt,{children:[e.pinned_at?(0,l.jsx)(Pn,{label:"Unpin",iconName:"unpin",iconMode:"fill",formRef:R}):(0,l.jsx)(Pn,{label:"Pin",iconName:"pushpin",iconMode:"line",formRef:T}),Te&&(0,l.jsx)(Ho,{collectionId:e.collection_id,emailAlertEnabled:e.email_alert_enabled??!1}),we?(0,l.jsx)(G,{asChild:!0,children:(0,l.jsxs)(ne,{to:`/collections/${e.collection_id}/settings`,children:[(0,l.jsx)(f,{name:"settings-3",mode:"line"}),"Configure Collection"]})}):(0,l.jsx)(G,{asChild:!0,children:(0,l.jsxs)(ne,{to:`/collections/${e.collection_id}`,children:[(0,l.jsx)(f,{name:"eye",mode:"line"}),"View Collection"]})}),$e&&(0,l.jsx)(G,{asChild:!0,children:(0,l.jsxs)(ne,{to:`/settings/webhooks/${e.webhook_config_id}`,isExternal:!0,children:[(0,l.jsx)(f,{name:"webhook",mode:"line"}),"View Webhook"]})}),ye&&Ke&&(0,l.jsx)(G,{asChild:!0,children:(0,l.jsxs)("button",{onClick:Ee,role:"menuitem",children:[(0,l.jsx)(f,{name:"webhook",mode:"line"}),"Add a Webhook"]})}),ye&&!Ke&&(0,l.jsx)(G,{asChild:!0,children:(0,l.jsxs)(ne,{to:`/settings/webhooks/new?collection_id=${e.collection_id}`,isExternal:!0,children:[(0,l.jsx)(f,{name:"webhook",mode:"line"}),"Add a Webhook"]})}),De&&(0,l.jsx)(Pt,{}),be&&(0,l.jsx)(G,{asChild:!0,children:(0,l.jsxs)("button",{onClick:()=>n(e.collection_id),role:"menuitem",children:[(0,l.jsx)(f,{name:"archive",mode:"line"}),"Archive"]})}),Re&&(0,l.jsx)(G,{asChild:!0,children:(0,l.jsxs)("button",{onClick:()=>i(e.collection_id),role:"menuitem",disabled:t,children:[(0,l.jsx)(f,{name:"archive",mode:"line"}),"Reactivate"]})}),Q&&(0,l.jsx)(G,{asChild:!0,children:(0,l.jsxs)("button",{onClick:()=>c(e),role:"menuitem",disabled:o,children:[(0,l.jsx)(f,{name:"delete-bin-2",mode:"line"}),"Delete Collection"]})})]})]})]}),g&&(0,l.jsx)(Rn,{collectionId:e.collection_id,webhooks:m,onClose:Ee,onSuccess:h.revalidate})]})}var L=r(a(),1);function Yo({collection:e,user:o,...t}){let n=Pe(),i=Xt("(max-width: 1200px)"),c=Fe(e,n),m=c.get("Overview"),h=c.get("Configuration"),g=m?`/collections/${e.collection_id}`:h?`/collections/${e.collection_id}/settings`:null,E=(0,L.jsxs)("div",{className:Z.collectionNameContainer,children:[e.pinned_at&&(0,L.jsx)(J,{content:"Pinned",children:(0,L.jsx)(f,{"aria-label":"Pinned",name:"pushpin",size:"md",mode:"fill",className:Z.icon})}),(0,L.jsx)(s,{variant:p.H2,className:Z.collectionName,children:e.name})]}),d=o?ho(o.identity):null;return(0,L.jsxs)("div",{className:Z.headerContainer,children:[(0,L.jsxs)("div",{className:Z.headerContainerLeft,children:[g?(0,L.jsx)(ne,{"aria-label":`Navigate to ${e.name}`,to:g,className:Z.collectionLink,children:E}):E,e.category!==X.Category.CATEGORY_UNSPECIFIED&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Le,{variant:"dot"}),(0,L.jsx)(s,{className:Z.noMargin,variant:p.H5,children:e.category.replaceAll("_"," ")})]}),(0,L.jsx)(un,{collection:e})]}),(0,L.jsxs)("div",{className:Z.headerContainerRight,children:[d&&!i&&(0,L.jsx)("div",{className:Z.fadeIn,children:(0,L.jsxs)(s,{variant:p.SMALL,children:["Creator: ",d]})}),d&&e.update_time&&!i&&(0,L.jsx)("div",{className:Z.fadeIn,children:(0,L.jsx)(Le,{variant:"dot"})}),e.update_time&&(0,L.jsx)(go,{labelText:"Last Update",timestamp:e.update_time.value,variant:"long",includeTooltip:!1,includeTime:!i}),(0,L.jsx)(Qe,{...t,collection:e})]})]})}var $o=r(a(),1);function Ko({collection:e}){let o=En(e);if(!o)return null;let{variant:t,icon:n,text:i}=o;return(0,$o.jsx)(fo,{variant:t,children:(0,$o.jsx)(Ln,{iconName:n,children:i})})}var yo=r(B(),1);var Je={linkContainer:"YPnfl",statContainer:"b46iP",stat:"LkqkV",noWrap:"Hknkf"};var z=r(a(),1);function Xe({value:e,text:o,linkTo:t}){let n=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(s,{variant:p.H1_SUB_HEADLINE,className:Je.stat,children:(0,z.jsx)(dn,{value:e})}),(0,z.jsx)(s,{variant:p.H6,className:Je.noWrap,children:o})]});return(0,z.jsx)(z.Fragment,{children:t?(0,z.jsx)(ne,{to:t,className:Je.linkContainer,children:n}):(0,z.jsx)("div",{className:Je.statContainer,children:n})})}var bo={noWrap:"Qr4A1",container:"uTQIM",chart:"_5O-7s"};var Ae=r(a(),1);function Go({collection:e}){let o=e.size_metrics.map(qt);if(o.length<2)return null;let t=`${o.length} ${rn("Day",o.length)}`;return(0,Ae.jsxs)("div",{className:bo.container,children:[(0,Ae.jsx)(J,{content:"The trend line is updated at the end of the day",side:"top",children:(0,Ae.jsx)("div",{className:bo.chart,children:(0,Ae.jsx)(bn,{title:"Assets",stats:o,min:0})})}),(0,Ae.jsxs)(s,{variant:p.H6,className:bo.noWrap,children:["Trend | ",t]})]})}var zo={stats:"FADl8"};var he=r(a(),1);function qo({collection:e,isDisabled:o}){let t=(0,yo.useMemo)(()=>Qt(e),[e.status]),n=(0,yo.useMemo)(()=>Temporal.Now.zonedDateTimeISO().toPlainDate().toString(),[]),i=(0,yo.useMemo)(()=>{let c=new Date;return c.setDate(c.getDate()-1),c.toISOString().split("T")[0]},[]);return o?(0,he.jsx)("div",{className:zo.stats,children:(0,he.jsx)(Xe,{value:t,text:"Total Assets | Now"})}):(0,he.jsxs)("div",{className:zo.stats,children:[(0,he.jsx)(Go,{collection:e}),(0,he.jsx)(Xe,{linkTo:`/collections/${e.collection_id}/results`,value:t,text:"Total Assets | Now"}),(0,he.jsx)(Xe,{linkTo:`/collections/${e.collection_id}/history?event_type=${"asset_added"}&start=${i}&end=${n}`,value:e.added_assets_24_hours.value,text:"New Assets | 24 Hrs"})]})}var j={cardDisabled:"w-M7-",cardPinned:"wNydO",content:"o5QOD",bodyContainer:"lqAN8",bodyContainerPinned:"Di9of",queryDescriptionContainer:"jic98",query:"aOb5r",description:"CCqlb",tooltip:"CET1X"};function Fn(e){let{users:o}=xe();return o.get(e)}var F=r(a(),1);function Un({collection:e,...o}){let t=Fn(e.created_by),n=yn(e);return(0,F.jsx)("div",{className:ue(e.pinned_at&&j.cardPinned),children:(0,F.jsxs)(Mt,{variant:n?ko.DEFAULT:ko.INTERACTIVE,headerPadding:It.NONE,className:ue(n&&j.cardDisabled),children:[(0,F.jsx)(Yo,{collection:e,user:t,...o}),(0,F.jsxs)("div",{className:j.content,children:[(0,F.jsx)(Ko,{collection:e}),(0,F.jsxs)("div",{className:ue(j.bodyContainer,e.pinned_at&&j.bodyContainerPinned),children:[(0,F.jsxs)("div",{className:j.queryDescriptionContainer,children:[(0,F.jsx)(J,{content:e.query,contentClassName:j.tooltip,children:(0,F.jsx)(s,{variant:p.SMALL_SOURCE,className:j.query,children:e.query})}),e.description&&(0,F.jsx)(J,{content:e.description,contentClassName:j.tooltip,children:(0,F.jsx)(s,{variant:p.SMALL_SOURCE,className:j.description,children:e.description})})]}),(0,F.jsx)(qo,{collection:e,isDisabled:n})]})]})]},e.collection_id)})}var Qo=r(a(),1);function Jo({collections:e,isLoading:o,isCollectionsLimitReached:t,setCollectionToArchive:n,setCollectionToUnarchive:i,setCollectionToDelete:c}){return(0,Qo.jsx)("div",{className:Sn.collectionsList,children:e.map(m=>(0,Qo.jsx)(Un,{collection:m,isLoading:o,isCollectionsLimitReached:t,setCollectionToArchive:n,setCollectionToUnarchive:i,setCollectionToDelete:c},m.collection_id))})}var Kn=r(B(),1);var Vn={actionColumn:"mljPp"};var Xo=r(a(),1);function Zo({collection:e,...o}){let t=n=>n.stopPropagation();return(0,Xo.jsx)(so.Cell,{className:Vn.actionColumn,onClick:t,children:(0,Xo.jsx)(Qe,{collection:e,...o})})}var Wn={assetsColumn:"Pgktr"};var jo={tableCell:"ou8g6",left:"BJOVu",center:"Vy7e2"};var Bn=r(a(),1);function U({align:e="left",className:o,children:t}){return(0,Bn.jsx)(so.Cell,{className:ue(jo.tableCell,jo[e],o),children:t})}var et=r(a(),1);function Eo({count:e}){return(0,et.jsx)(U,{align:"center",className:Wn.assetsColumn,children:(0,et.jsx)(s,{children:e.toLocaleString()})})}var Lo={nameColumn:"_9EWaR",name:"GX-5X",pinnedIcon:"oCONa"};var le=r(a(),1);function ot({collection:e,link:o,stopPropagation:t}){let{name:n,pinned_at:i}=e;return(0,le.jsx)(hn,{className:Lo.nameColumn,children:(0,le.jsxs)("div",{className:Lo.name,children:[i&&(0,le.jsx)(J,{content:"Pinned",children:(0,le.jsx)(f,{"aria-label":"Pinned",name:"pushpin",size:"md",mode:"fill",className:Lo.pinnedIcon})}),(0,le.jsx)("span",{children:o?(0,le.jsx)(ie,{href:o,onClick:t,children:n}):(0,le.jsx)(s,{children:n})})]})})}var No=r(B(),1);var Ve={alertColumn:"ZXyEn",switchContainer:"bfGfQ",icon:"_3Qgl9",negativeText:"_1-U-p"};var se=r(a(),1);function tt({isCreator:e,emailAlertEnabled:o,collectionId:t}){if(!e)return(0,se.jsx)(U,{className:Ve.alertColumn});let n=Tt(),i=no(),[c,m]=(0,No.useState)(o),h=(0,No.useCallback)(d=>{m(d);let T=new FormData;T.append(re.COLLECTION_ID,t),T.append(re.EMAIL_ALERT_ENABLED,d.toString()),T.append(re.FETCHER_KEY,Co),T.append(re.CSRF,i),n.submit(T,{method:"post"})},[t,n,i]),g=c?(0,se.jsxs)(s,{children:["Weekly Emails",(0,se.jsx)(f,{name:"notification-2",size:"sm",mode:"fill",className:Ve.icon})]}):(0,se.jsx)(s,{className:ue(Ve.negativeText),children:"None"}),E=d=>{d.stopPropagation()};return(0,se.jsx)(U,{className:Ve.alertColumn,children:(0,se.jsx)("div",{onClick:E,className:Ve.switchContainer,children:(0,se.jsx)(Vt,{labelPosition:"right",label:g,checked:c,onCheckedChange:h})})})}var We={expandedContent:"VpqS0",expandedRow:"uxiQL",queryText:"_7fSfs",descriptionText:"prlwi"};var Se=r(a(),1);function nt({query:e,description:o}){return!e&&!o?null:(0,Se.jsxs)("div",{className:We.expandedContent,children:[(0,Se.jsx)("div",{className:We.expandedRow,children:(0,Se.jsx)(s,{variant:p.SMALL_SOURCE,className:We.queryText,children:e})}),o&&(0,Se.jsx)("div",{className:We.expandedRow,children:(0,Se.jsx)(s,{variant:p.SMALL,className:We.descriptionText,children:o})})]})}var Hn=r(B(),1);var Ao={webhookColumn:"l0Unf",webhookLink:"_44cf-"};var _e=r(a(),1);function it({webhookId:e}){let{webhooks:o}=ke(),t=(0,Hn.useMemo)(()=>{if(e)return o.find(i=>vo(i.name)===e)},[o,e]),n=i=>i.stopPropagation();return t?(0,_e.jsx)(U,{className:Ao.webhookColumn,children:(0,_e.jsx)(ie,{href:`/settings/webhooks/${e}`,onClick:n,isExternal:!0,children:(0,_e.jsxs)("div",{className:Ao.webhookLink,children:[(0,_e.jsx)(f,{name:"webhook",mode:"line",size:"md"}),t.display_name||"Unnamed Webhook"]})})}):(0,_e.jsx)(U,{className:Ao.webhookColumn})}var Be={tableCell:"A6gy6",shared:"DpXV7",hideOnSmallScreen:"x2hP-"};var A=r(a(),1);function rt({collection:e,user:o,...t}){let{collection_id:n,category:i,total_assets:c,added_assets_24_hours:m,create_time:h,shared_with_org:g,email_alert_enabled:E,webhook_config_id:d,query:T,description:R,created_by:D}=e,W=Pe(),Y=Fe(e,W),me=Y.get("Overview"),Te=Y.get("Configuration"),b=me?`/collections/${n}`:Te?`/collections/${n}/settings`:null,q=o?ho(o.identity):"",Q=De=>De.stopPropagation(),be=Boolean(T||R),Re=D===W?.userId;return(0,A.jsxs)(fn,{isExpandable:be,testId:`collection-${n}`,expandedContent:(0,A.jsx)(nt,{query:T,description:R}),expandedContentColSpan:10,children:[(0,A.jsx)(ot,{collection:e,link:b,stopPropagation:Q}),(0,A.jsx)(U,{className:Be.hideOnSmallScreen,children:i&&i!==X.Category.CATEGORY_UNSPECIFIED&&(0,A.jsx)(s,{children:mn(i.toLowerCase())})}),(0,A.jsx)(Eo,{count:Number(c?.value??0)}),(0,A.jsx)(Eo,{count:Number(m?.value??0)}),(0,A.jsx)(U,{className:Be.hideOnSmallScreen,children:q&&(0,A.jsx)(s,{children:q})}),(0,A.jsx)(U,{children:h&&(0,A.jsx)(go,{timestamp:h.value,variant:"short",includeTime:!1,includeTooltip:!1})}),(0,A.jsx)(U,{align:"center",children:g&&(0,A.jsx)(J,{content:"Shared",children:(0,A.jsx)(f,{name:"group",size:"sm",mode:"line",className:Be.shared})})}),(0,A.jsx)(tt,{isCreator:Re,emailAlertEnabled:E,collectionId:n}),(0,A.jsx)(it,{webhookId:d}),(0,A.jsx)(Zo,{collection:e,...t})]})}var Yn=[{id:"name",label:"Collection",sortable:!0,className:"flexStartPadded"},{id:"category",label:"Category",sortable:!0,className:"flexStart",hideOnSmallScreen:!0},{id:"total_assets",label:"Total Assets",sortable:!0},{id:"new_assets",label:"New Assets",sortable:!0},{id:"created_by",label:"Creator",sortable:!0,className:"flexStart",hideOnSmallScreen:!0},{id:"created_at",label:"Created",sortable:!0,className:"flexStart"},{id:"shared_with_org",label:"Shared",sortable:!0},{id:"notification",label:"Notification",sortable:!0,className:"flexStart"},{id:"webhook",label:"Webhook",sortable:!0,className:"flexStart"},{id:"actions",label:"",sortable:!1,className:"actionColumn"}];function $n(e){return{name:{internalSort:(o,t)=>{let n=o.name?.toLowerCase()||"",i=t.name?.toLowerCase()||"";return n.localeCompare(i)}},category:{internalSort:(o,t)=>{let n=o.category?.toString()||"",i=t.category?.toString()||"";return n.localeCompare(i)}},total_assets:{internalSort:(o,t)=>{let n=Number(o.total_assets?.value)||0,i=Number(t.total_assets?.value)||0;return n-i}},new_assets:{internalSort:(o,t)=>{let n=Number(o.added_assets_24_hours?.value)||0,i=Number(t.added_assets_24_hours?.value)||0;return n-i}},created_by:{internalSort:(o,t)=>{let n=e.get(o.created_by),i=e.get(t.created_by),c=n?.identity?`${n.identity.firstName||""} ${n.identity.lastName||""}`.toLowerCase():"",m=i?.identity?`${i.identity.firstName||""} ${i.identity.lastName||""}`.toLowerCase():"";return c.localeCompare(m)}},created_at:{internalSort:(o,t)=>{let n=o.create_time?.value.toString()||"",i=t.create_time?.value.toString()||"";return n.localeCompare(i)}},shared_with_org:{internalSort:(o,t)=>{let n=o.shared_with_org?1:0,i=t.shared_with_org?1:0;return n-i}},notification:{internalSort:(o,t)=>{let n=o.email_alert_enabled?1:0,i=t.email_alert_enabled?1:0;return n-i}},webhook:{internalSort:(o,t)=>{let n=o.webhook_config_id?1:0,i=t.webhook_config_id?1:0;return n-i}}}}var at=r(a(),1);function lt({collections:e,isLoading:o,isCollectionsLimitReached:t,setCollectionToArchive:n,setCollectionToUnarchive:i,setCollectionToDelete:c}){let{users:m}=xe(),{sortedData:h,sortSettings:g,getSortCallback:E}=gn(e,$n(m)),d=(0,Kn.useCallback)(T=>{let R=m.get(T.created_by);return(0,at.jsx)(rt,{collection:T,user:R,isLoading:o,isCollectionsLimitReached:t,setCollectionToArchive:n,setCollectionToUnarchive:i,setCollectionToDelete:c},T.collection_id)},[m,o,t,n,i,c]);return(0,at.jsx)(Cn,{columns:Yn,data:h,renderRow:d,sortSettings:g,onSort:E,testId:"collections-table",headerCellClassName:Be.tableCell})}var So=r(a(),1);function st({collections:e,isLoading:o,isCollectionsLimitReached:t,setCollectionToArchive:n,setCollectionToUnarchive:i,setCollectionToDelete:c,activeView:m}){return e.length===0?(0,So.jsx)(Tn,{}):m==="table"?(0,So.jsx)(lt,{collections:e,isLoading:o,isCollectionsLimitReached:t,setCollectionToArchive:n,setCollectionToUnarchive:i,setCollectionToDelete:c}):(0,So.jsx)(Jo,{collections:e,isLoading:o,isCollectionsLimitReached:t,setCollectionToArchive:n,setCollectionToUnarchive:i,setCollectionToDelete:c})}var Ie={textContainer:"cjJgl",loadingSpinner:"_0NiE1",gray8:"pRabd"};var w=r(a(),1);function ct({title:e,count:o,limit:t,isLoading:n=!1}){let i=t;return(0,w.jsxs)("span",{className:Ie.textContainer,children:[(0,w.jsx)(s,{variant:p.H5,children:`${e}:`}),n?(0,w.jsx)("div",{className:Ie.loadingSpinner,children:(0,w.jsx)(Lt,{size:Et.SMALL})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s,{variant:p.H4,className:Ie.gray8,children:o===-1?"N/A":o.toLocaleString()}),i&&o!==-1&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s,{variant:p.H5,className:Ie.gray8,children:"/"}),t===-1||t===Number.MAX_SAFE_INTEGER?(0,w.jsx)(s,{variant:p.H5,className:Ie.gray8,children:"Unlimited"}):(0,w.jsx)(s,{variant:p.H5,className:Ie.gray8,children:en(t).toLocaleString()})]})]})]})}var oe=r(B(),1);var Gn=500,zn="collectionsFilters",He="q",ge="category",Me="sort",Oe="owner",_o="all",Io=[...Uo.map(e=>({label:zt(e),value:e}))],qn=[{label:"Most Recent",value:"CreateTime"},{label:"Last Updated",value:"UpdateTime"},{label:"Collection Name",value:"Name"},{label:"Total Assets",value:"TotalAssets"},{label:"New Assets",value:"NewAssets_24Hours"}],yi=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,Ei=pe.optional(pe.union([pe.string().regex(yi),pe.string()])),Li=pe.enum(Uo).optional(),Ni=pe.string().optional(),Ai=pe.enum(uo).optional(),Qn={[He]:Ei,[ge]:Li,[Me]:Ai,[Oe]:Ni};var ve={form:"nwr4f",filters:"_90evQ",searchInput:"cuP64",ownerSelect:"lswn3",categorySelect:"_2e-eJ",sortSelect:"_55uR3",inlineLabel:"APThF",divider:"cMchC"};var Jn=e=>[{label:"All",value:_o},...Array.from(e.values()).filter(o=>o.identity).sort((o,t)=>o.identity.firstName?t.identity.firstName?o.identity.firstName.localeCompare(t.identity.firstName):-1:1).map(o=>({label:`${o.identity.firstName}${o.identity.lastName?` ${o.identity.lastName}`:""}`,value:o.id}))];var k=r(a(),1);function mt(){let e=$(),{users:o}=xe(),t=e.state==="loading",n=cn(),[i]=oo(),c=Jn(o),[m,h]=(0,oe.useState)(i.get("q")||""),{handleValueChange:g,handleSubmit:E,formState:d}=sn(Qn,{[He]:m,[ge]:i.get("category")??"",[Me]:i.get("sort")??"CreateTime",[Oe]:i.get("owner")??_o},zn,n,!0),T=Yt({value:m,delay:Gn});(0,oe.useEffect)(()=>{g(He,T),n({[He]:T})},[T]);let R=(0,oe.useCallback)(b=>{h(b.target.value)},[]),D=(0,oe.useCallback)(()=>h(""),[]),W=b=>{g(Oe,b),n({[Oe]:b})},Y=(0,oe.useMemo)(()=>Io.filter(b=>d.values[ge].split(",").includes(b.value)),[d.values[ge],Io]),me=b=>{let q=b.map(Q=>Q.value).join(",");g(ge,q),n({[ge]:q})},Te=(0,oe.useCallback)(b=>{g(Me,b),n({[Me]:b})},[g,n]);return(0,k.jsxs)(P,{"data-testid":"filters-form",onSubmit:E,className:ve.form,children:[(0,k.jsxs)("div",{className:ve.filters,children:[(0,k.jsx)("div",{className:ve.ownerSelect,children:(0,k.jsx)(ze,{name:Oe,options:c,contentLeft:(0,k.jsx)(co,{iconName:"filter-3",label:"Creator"}),value:d.values[Oe],onValueChange:W,disabled:c.length===0||t})}),(0,k.jsx)(_t,{name:ge,options:Io,selectedOptions:Y,placeholder:"Select",onChange:me,className:ve.categorySelect,disabled:t,contentLeft:(0,k.jsx)(co,{iconName:"filter-3",label:"Category"})}),(0,k.jsx)("div",{className:ve.sortSelect,children:(0,k.jsx)(ze,{name:Me,options:qn,value:d.values[Me],onValueChange:Te,contentLeft:(0,k.jsx)(co,{icon:"sort-desc",label:"Sort"})})}),(0,k.jsx)("div",{className:ve.divider,children:(0,k.jsx)(Le,{variant:"line--vertical",spacing:8})})]}),(0,k.jsx)(pn,{className:ve.searchInput,name:He,value:m,disabled:t,onChange:R,onClear:D,placeholder:"Search collection name or UUID...",autoComplete:"off"})]})}var ce={filterBar:"_1JGPm",filtersGroup:"H1Or1",topGroup:"UYDSx",filters:"Nh9S6",createButton:"UaCbc",cardLabel:"_4hDm-",divider:"uCSzh"};var _=r(a(),1);function dt({title:e,count:o,limit:t,isLoading:n,isCollectionsLimitReached:i,activeView:c,setActiveView:m}){let h=po("collection-emails"),g=Zt(),E=Jt({source:"collections-index"});return(0,_.jsxs)("div",{className:ce.filterBar,children:[(0,_.jsxs)("div",{className:ce.filtersGroup,children:[(0,_.jsxs)("div",{className:ce.topGroup,children:[h&&(0,_.jsxs)(Ut,{"aria-label":"Filter options",value:c,onValueChange:m,variant:Ft.SECONDARY,children:[(0,_.jsx)(Po,{value:"card",label:(0,_.jsxs)("div",{className:ce.cardLabel,children:[(0,_.jsx)(f,{name:"layout-grid",mode:c==="card"?"fill":"line"}),"Card"]}),"aria-label":"Card"}),(0,_.jsx)(Po,{value:"table",label:(0,_.jsxs)("div",{className:ce.cardLabel,children:[(0,_.jsx)(f,{name:"table",mode:c==="table"?"fill":"line"}),"Table"]}),"aria-label":"Table"})]}),(0,_.jsx)(ct,{title:e,count:o,limit:t,isLoading:n})]}),(0,_.jsxs)("div",{className:ce.filters,children:[(0,_.jsx)("div",{className:ce.divider,children:(0,_.jsx)(Le,{variant:"line--vertical"})}),(0,_.jsx)(mt,{})]})]}),(0,_.jsx)(M,{"data-testid":"create-collection-button",iconLeft:"add",onClick:()=>g(E),disabled:i,className:ce.createButton,children:"Create Collection"})]})}var Xn=r(B(),1);var Ye={modalContent:"Qr13N"};var O=r(a(),1);function Zn({collectionToArchive:e,setCollectionToArchive:o}){let t=$(),n=(0,Xn.useCallback)(i=>{i||o(null)},[o]);return(0,O.jsx)(fe,{size:Ce.MEDIUM,open:!0,onOpenChange:n,footerActions:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(M,{onClick:()=>o(null),variant:S.DEFAULT,children:"No, keep it"}),(0,O.jsxs)(P,{method:"post",onSubmit:()=>o(null),children:[(0,O.jsx)("input",{hidden:!0,name:"collection_id",value:e,readOnly:!0}),(0,O.jsx)("input",{hidden:!0,name:"fetcherKey",value:To,readOnly:!0}),(0,O.jsx)("input",{hidden:!0,name:"archive",value:"true",readOnly:!0}),(0,O.jsx)(K,{}),(0,O.jsx)(M,{isLoading:t.state==="submitting",variant:S.PRIMARY,children:"Yes, archive it"})]})]}),header:(0,O.jsx)(s,{variant:p.H1,children:"Archive this Collection?"}),children:(0,O.jsxs)("div",{className:Ye.modalContent,children:[(0,O.jsx)(s,{variant:p.DEFAULT_SEMIBOLD,children:"TIP: Collection settings will be preserved and can be reactivated later if needed."}),(0,O.jsx)(s,{variant:p.DEFAULT,children:"This action will remove all assets and history. Assets will no longer be added to this collection and will no longer consume credits."})]})})}var Mo=r(B(),1);var I=r(a(),1);function jn({collectionToDelete:e,setCollectionToDelete:o}){let{accessState:t}=(0,Mo.useContext)(mo),n=t?.organization?.organizationId,i=$(),c=(0,Mo.useCallback)(m=>{m||o(null)},[o]);return(0,I.jsx)(fe,{size:Ce.MEDIUM,open:!0,onOpenChange:c,footerActions:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(M,{onClick:()=>o(null),variant:S.DEFAULT,children:"No, keep it"}),(0,I.jsxs)(P,{method:"post",onSubmit:()=>o(null),children:[(0,I.jsx)("input",{hidden:!0,name:"collection_id",value:e.collection_id,readOnly:!0}),(0,I.jsx)("input",{hidden:!0,name:"org",value:n,readOnly:!0}),(0,I.jsx)("input",{hidden:!0,name:"fetcherKey",value:_n,readOnly:!0}),(0,I.jsx)("input",{hidden:!0,name:"delete",value:"true",readOnly:!0}),(0,I.jsx)(K,{}),(0,I.jsx)(M,{isLoading:i.state==="submitting",variant:S.ALERT,children:"Yes, delete it"})]})]}),header:(0,I.jsx)(s,{variant:p.H1,children:"Delete this Collection?"}),children:(0,I.jsx)("div",{className:Ye.modalContent,children:(0,I.jsxs)(s,{children:["Deleting collections is permanent and cannot be undone. Are you sure you want to delete the ",(0,I.jsx)("strong",{children:e.name})," ","Collection?"]})})})}var V=r(a(),1);function ei({collectionToUnarchive:e,setCollectionToUnarchive:o}){let t=$();return(0,V.jsx)(fe,{size:Ce.MEDIUM,open:!0,onOpenChange:n=>{n||o(null)},footerActions:[(0,V.jsx)(M,{onClick:()=>o(null),variant:S.DEFAULT,children:"No, leave it"}),(0,V.jsxs)(P,{method:"post",onSubmit:()=>o(null),children:[(0,V.jsx)("input",{hidden:!0,name:"collection_id",value:e,readOnly:!0}),(0,V.jsx)("input",{hidden:!0,name:"archive",value:"false",readOnly:!0}),(0,V.jsx)("input",{hidden:!0,name:"fetcherKey",value:To,readOnly:!0}),(0,V.jsx)(K,{}),(0,V.jsx)(M,{isLoading:t.state==="submitting",variant:S.PRIMARY,children:"Yes, reactivate it"})]})],header:(0,V.jsx)(s,{variant:p.H1,children:"Reactivate this Collection?"}),children:(0,V.jsxs)("div",{className:Ye.modalContent,children:[(0,V.jsx)(s,{variant:p.DEFAULT_SEMIBOLD,children:"TIP: Collection settings have been preserved but the assets will need to repopulate."}),(0,V.jsx)(s,{variant:p.DEFAULT,children:"This action will reactivate an archived collection and you will be charged credits daily for consumption."})]})})}var Oo={topBar:"bvFBV",selectItem:"nxR6m",selectLabel:"I1y28",searchInput:"eYspM",barAndTabContainer:"sCY5Q",tabContainer:"nFKis",errorWrapper:"mH-Ct",loadMoreContainer:"I3tgw",loadMoreButton:"_1Nu-k"};var Ii=r(Ci(),1),Mi=r(fi(),1),v=r(a(),1),Si=an("Censys Collections - All");function oi({query:e="",slots:o={},children:t}){let{t:n}=bt(),i=[{pathName:n("Collections")}];return(0,v.jsx)(tn,{initialQuery:e,breadcrumbs:i,slots:{searchHeader:(0,v.jsx)(on,{breadcrumbs:i}),header:o.header,actions:o.actions,navTabs:o.navTabs},children:t})}function ti(){let e=to(),{collections:o,isCollectionsLimitReached:t,collectionsLimit:n,activeCount:i,archivedCount:c,toast:m,successToast:h,nextPageToken:g,view:E}=ke(),d=xo(),T=xo(),R=eo(),[D,W]=oo(),Y=no(),[me,Te]=(0,C.useState)(E),[b,q]=(0,C.useState)(o),[Q,be]=(0,C.useState)(g),[Re,De]=(0,C.useState)(!1),[we,$e]=(0,C.useState)(null),[ye,Ke]=(0,C.useState)(null),[Ee,Ze]=(0,C.useState)(null),[pt,Ro]=(0,C.useState)(null),[ni,ut]=(0,C.useState)([]);(0,C.useEffect)(()=>{e?.state===1&&e?.errorMessage&&Ro(e.errorMessage)},[e]),(0,C.useEffect)(()=>{m&&ut(u=>[...u,m])},[m]);let Ct=$(),[te,ii]=(0,C.useState)("All Collections"),[ri,ai]=(0,C.useState)(new Set),[li,Do]=(0,C.useState)([]),[si,ft]=(0,C.useState)(!0);(0,C.useEffect)(()=>{ft(!1)},[b]),(0,C.useEffect)(()=>{if(we||ye||Ee)return;let u=setInterval(()=>{Re||R.revalidate()},Wo);return()=>{clearInterval(u)}},[we,Ee,ye,Wo,R.revalidate,D]),(0,C.useEffect)(()=>{Ct.state==="submitting"&&(Ro(null),$e(null))},[te]),(0,C.useEffect)(()=>{let u=b.filter(({collection_id:y,status:de})=>ri.has(y)&&de===X.Status.ACTIVE);u.length>0&&Do(y=>[...y,...u.map(de=>`${de.name} has been populated and is ready to view`)]),ai(new Set(b.filter(y=>y.status===X.Status.POPULATING).map(y=>y.collection_id)))},[b]),(0,C.useEffect)(()=>{let u=new URLSearchParams(D);te==="Archived"?u.set("archived","true"):u.delete("archived"),u.toString()!==D.toString()&&W(u)},[D,te,o,g]),(0,C.useEffect)(()=>{q(o),be(g),De(!1)},[o,g]);let ht=(0,C.useCallback)(u=>{ii(u),ft(!0)},[]),ci=(0,C.useCallback)(u=>{open||Do(y=>y.filter((de,Ge)=>Ge!==u))},[Do]),mi=(0,C.useCallback)(u=>{open||ut(y=>y.filter((de,Ge)=>Ge!==u))},[]),di=(0,C.useCallback)(()=>{if(Q){De(!0);let u=new URLSearchParams(D);u.set("nextPageToken",Q),d.load(`?index&${u}`)}},[Q,d.load,D]);(0,C.useEffect)(()=>{if(d.data){let{collections:u,nextPageToken:y}=d.data;q(de=>{let Ge=new Set(de.map(je=>je.collection_id)),ui=u.filter(je=>!Ge.has(je.collection_id)&&(te!=="Archived"||je.status===X.Status.ARCHIVED));return[...de,...ui]}),be(y)}},[d.data]);let pi=(0,C.useCallback)(u=>{Te(u);let y=new FormData;y.append("csrf",Y),y.append("fetcherKey",On),y.append("view",u),T.submit(y,{method:"post"})},[T,Y]);return(0,v.jsx)(oi,{slots:{header:pt?(0,v.jsx)(ro,{variant:io.ERROR,onDismiss:()=>Ro(null),children:pt}):void 0,navTabs:(0,v.jsxs)(ln,{children:[(0,v.jsx)(Fo,{id:"all-collections",isActive:te==="All Collections",onClick:()=>ht("All Collections"),children:"All Collections"}),(0,v.jsx)(Fo,{id:"archived",isActive:te==="Archived",onClick:()=>ht("Archived"),"data-testid":"archived-test-id",children:"Archived"})]})},children:(0,v.jsx)(Ht,{children:(0,v.jsxs)("div",{children:[(0,v.jsx)(dt,{title:te==="All Collections"?"TOTAL COLLECTIONS":"TOTAL ARCHIVED",count:te==="All Collections"?i:c,limit:te==="All Collections"?n:void 0,isLoading:si,isCollectionsLimitReached:t,activeView:me,setActiveView:pi}),t&&(0,v.jsx)(Vo,{}),we&&(0,v.jsx)(Zn,{collectionToArchive:we,setCollectionToArchive:$e}),ye&&(0,v.jsx)(ei,{collectionToUnarchive:ye,setCollectionToUnarchive:Ke}),Ee&&(0,v.jsx)(jn,{collectionToDelete:Ee,setCollectionToDelete:Ze}),(0,v.jsx)(st,{collections:b,isLoading:Ct.state==="submitting",isCollectionsLimitReached:t,setCollectionToArchive:$e,setCollectionToUnarchive:Ke,setCollectionToDelete:Ze,activeView:me}),Q&&b.length>0&&(0,v.jsx)("div",{className:Oo.loadMoreContainer,children:(0,v.jsx)(M,{className:Oo.loadMoreButton,variant:S.DEFAULT,onClick:di,isLoading:d.state==="loading",children:"Load More"})}),h&&(0,v.jsx)(lo,{title:h,variant:wo.SUCCESS,behavior:ao.DISMISSIVE}),ni.map((u,y)=>(0,v.jsx)(lo,{title:u,behavior:ao.DISMISSIVE,onOpenChange:()=>mi(y)},`action-toast-${u}-${y}`)),li.map((u,y)=>(0,v.jsx)(lo,{title:u,variant:wo.SUCCESS,behavior:ao.DISMISSIVE,onOpenChange:()=>ci(y)},`populated-${u}-${y}`))]})})})}function _i(){let e=vt();return(0,v.jsx)(oi,{children:(0,v.jsx)("div",{className:Oo.errorWrapper,children:gt(e)&&Bt(e.data)?(0,v.jsx)(vn,{errorCode:e.data.code}):(0,v.jsx)(nn,{error:e})})})}export{_i as ErrorBoundary,ti as default,Si as meta};
