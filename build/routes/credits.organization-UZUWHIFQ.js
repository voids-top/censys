import{a as J}from"/censys/build/_shared/chunk-3EQD62QC.js";import{b as k,d as Y,e as Z,f as q}from"/censys/build/_shared/chunk-5PKHBRVZ.js";import"/censys/build/_shared/chunk-6BMUL27E.js";import"/censys/build/_shared/chunk-XLW6D2H7.js";import"/censys/build/_shared/chunk-4KKS33MW.js";import"/censys/build/_shared/chunk-IUMSQHOS.js";import{a as K}from"/censys/build/_shared/chunk-JAEJ7XSF.js";import{a as ee}from"/censys/build/_shared/chunk-IC5AY47K.js";import{a as A}from"/censys/build/_shared/chunk-7C4UGOB7.js";import{b as U}from"/censys/build/_shared/chunk-LOKTUJJ3.js";import"/censys/build/_shared/chunk-OQUAXVLV.js";import{c as G}from"/censys/build/_shared/chunk-4DOFQKLI.js";import"/censys/build/_shared/chunk-MB47ZWHU.js";import"/censys/build/_shared/chunk-URNZPFSF.js";import"/censys/build/_shared/chunk-WK35ORSL.js";import"/censys/build/_shared/chunk-XTODG4BZ.js";import"/censys/build/_shared/chunk-426SZY5O.js";import"/censys/build/_shared/chunk-HPK4AUA3.js";import"/censys/build/_shared/chunk-TTVDHAYB.js";import"/censys/build/_shared/chunk-6EMU7K4F.js";import{a as w}from"/censys/build/_shared/chunk-M5RKE22T.js";import"/censys/build/_shared/chunk-ZP3FOFQD.js";import"/censys/build/_shared/chunk-E7FS2ZQL.js";import{f as E}from"/censys/build/_shared/chunk-ST66DGSY.js";import"/censys/build/_shared/chunk-QJVHIZ52.js";import"/censys/build/_shared/chunk-N7X32FEJ.js";import{$ as O,A as p,B as b,H as M,J as z,ea as L,wa as H,xa as $,z as c}from"/censys/build/_shared/chunk-DN2SN5ZC.js";import{c as V}from"/censys/build/_shared/chunk-F5K75D4K.js";import"/censys/build/_shared/chunk-44DVAK2X.js";import"/censys/build/_shared/chunk-OLCKCRUU.js";import{z as P}from"/censys/build/_shared/chunk-JMZ2MZXD.js";import{b as d}from"/censys/build/_shared/chunk-ZST4CTCB.js";import{a as T}from"/censys/build/_shared/chunk-MOHCJWAV.js";import{e as a}from"/censys/build/_shared/chunk-2TWE7TSA.js";var S=a(T(),1);var N=a(T(),1);var f={email:"ri6HE",row:"i2A7g",rowContent:"fYpAK",rowContentBar:"t5puq",rowHeader:"_6GJr9"};var t=a(d(),1);function _({color:r,count:s,email:i,percentage:o,userName:y,widthPercentage:n}){return(0,t.jsxs)("div",{className:f.row,children:[(0,t.jsxs)("div",{className:f.rowHeader,children:[(0,t.jsx)(p,{variant:c.DEFAULT,children:y}),(0,t.jsx)(w,{variant:"line--vertical",spacing:8}),(0,t.jsx)(p,{variant:c.DEFAULT,className:f.email,children:i})]}),(0,t.jsxs)("div",{className:f.rowContent,children:[(0,t.jsx)("div",{className:f.rowContentBar,style:{width:`${Math.min(Math.max(n,0),100)}%`,backgroundColor:r}}),(0,t.jsx)(p,{variant:c.DEFAULT_SEMIBOLD,children:(0,t.jsx)(L,{value:s})}),(0,t.jsxs)(p,{variant:c.DEFAULT,children:["(",(0,t.jsx)(L,{value:Math.round(o)}),"%)"]})]})]})}var F=[U.FEEDBACK_INFO,`rgb(from ${U.FEEDBACK_INFO} r g b / 0.87)`,`rgb(from ${U.FEEDBACK_INFO} r g b / 0.74)`,`rgb(from ${U.FEEDBACK_INFO} r g b / 0.61)`,`rgb(from ${U.FEEDBACK_INFO} r g b / 0.48)`];var m={body:"ncd1I",card:"jGwZP",header:"IZv9L",headerText:"_7Chrn",loading:"-V6cZ",subHeadingText:"Izapl",viewAllButton:"_14et6"};var e=a(d(),1),X=a(T(),1);function x({rows:r,isLoading:s,isError:i}){let[o,y]=(0,N.useState)(r.length<=5&&r.length>0),n=(0,N.useMemo)(()=>[...r].sort((g,u)=>u.count-g.count),[r]),C=n[0]?.count??0,B=n.slice(0,o?r.length:5),h=s?(0,e.jsx)("div",{className:m.loading,children:(0,e.jsx)(z,{size:M.EXTRA_LARGE})}):i?(0,e.jsx)(G,{"data-testid":"error_USAGE_BY_USER_CARD",iconName:"pulse",title:"No credit information available at this time.",children:"Try again another time."}):B.map((g,u)=>{let D=F[u>=F.length?F.length-1:u],R=Math.max(g.count/C*100,.1);return(0,X.createElement)(_,{...g,color:D,widthPercentage:R,key:`${g.userName}-${u}`})}),v=!s&&!i;return(0,e.jsxs)($,{bodyPadding:H.NONE,className:m.card,children:[(0,e.jsxs)("div",{className:m.header,children:[(0,e.jsx)(p,{variant:c.H4,className:m.headerText,children:"Usage by User"}),(0,e.jsx)(w,{variant:"line--vertical",spacing:8}),(0,e.jsx)(p,{variant:c.H5,className:m.subHeadingText,children:"Past 30 Days"})]}),(0,e.jsx)("div",{className:m.body,children:h}),v&&(0,e.jsx)(e.Fragment,{children:o?(0,e.jsx)(O,{variant:b.DEFAULT,className:m.viewAllButton,onClick:()=>y(!1),children:"View Less"}):(0,e.jsxs)(O,{variant:b.DEFAULT,className:m.viewAllButton,onClick:()=>y(!0),children:["View All (",r.length,")"]})})]})}var Q=a(d(),1);function I(){let r=E(),s=A(()=>"/api/credits/usageByUser",[r?.organizationId]),i=s.state===0,o=s.state===2;return(0,Q.jsx)(x,{rows:s.data?.rows??[],isLoading:i,isError:o})}var W={usageSection:"lgks4"};var te=a(ee(),1),l=a(d(),1),ae={daily:[],monthly:[]};function j(){let{t:r}=V(),s=E(),{showEnhancedUI:i}=P(),[o,y]=(0,S.useState)(Z[1].value),n=A(()=>`/api/credits/org/accountStats?timeFrame=${o}`,[s?.organizationId,o]),C=n.state===0,B=n.state===2,h,v;if(n.data){let{aggregations:D,usageOverTime:R}=K(n.data);h=D,v=R}let{totalCount:g}=h??{},u=(0,S.useMemo)(()=>[{count:g??0,description:r("Total Credits Used"),timeFrame:r("Past 30 Days")}],[g,r]);return(0,l.jsxs)("section",{className:W.usageSection,children:[i?(0,l.jsx)(q,{timeFrame:o,setTimeFrame:y,isLoading:C}):(0,l.jsx)(k,{values:u,isLoading:C,isError:B}),(0,l.jsx)(Y,{usageOverTime:v??ae,aggregations:h,subHeading:r("Monthly"),isLoading:C,isError:B,showEnhancedUi:i,timeFrame:Number(o??"30"),isOrgView:!0}),(0,l.jsx)(J,{isOrgView:!0}),(0,l.jsx)(I,{})]})}export{j as default};
