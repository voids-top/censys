import{a as le}from"/censys/build/_shared/chunk-THY7OD5Y.js";import"/censys/build/_shared/chunk-6JZTKLEX.js";import{a as ce,b as M}from"/censys/build/_shared/chunk-UWRUBCCK.js";import{a as pe}from"/censys/build/_shared/chunk-ULGJ3ZYU.js";import{a as ge}from"/censys/build/_shared/chunk-EAJKCKTG.js";import{d as ae,e as ie,f as se}from"/censys/build/_shared/chunk-ZMYU5ULY.js";import"/censys/build/_shared/chunk-WMKH6XX3.js";import"/censys/build/_shared/chunk-3JU625ZU.js";import"/censys/build/_shared/chunk-I5BA26X4.js";import"/censys/build/_shared/chunk-RAMDI2JB.js";import"/censys/build/_shared/chunk-O3SGPCPK.js";import{a as me}from"/censys/build/_shared/chunk-CJIEOTRC.js";import"/censys/build/_shared/chunk-JLZAPT5W.js";import"/censys/build/_shared/chunk-FSKKJDZY.js";import"/censys/build/_shared/chunk-M7IO6GB7.js";import"/censys/build/_shared/chunk-W5Y6TOHF.js";import"/censys/build/_shared/chunk-AEP7YWHE.js";import"/censys/build/_shared/chunk-URNZPFSF.js";import"/censys/build/_shared/chunk-WK35ORSL.js";import"/censys/build/_shared/chunk-HG7D3PDC.js";import"/censys/build/_shared/chunk-ZKAH2G64.js";import"/censys/build/_shared/chunk-G6DKMBFA.js";import"/censys/build/_shared/chunk-KIDII43I.js";import"/censys/build/_shared/chunk-RPAGMMSK.js";import"/censys/build/_shared/chunk-2G5R6E4Q.js";import"/censys/build/_shared/chunk-6XVOHWMX.js";import"/censys/build/_shared/chunk-HLRAT4GD.js";import"/censys/build/_shared/chunk-HPK4AUA3.js";import{a as ne}from"/censys/build/_shared/chunk-W2GUOEY7.js";import"/censys/build/_shared/chunk-FQAS3FYV.js";import{a as oe}from"/censys/build/_shared/chunk-P2FXGQA2.js";import{f as te}from"/censys/build/_shared/chunk-FH7VNUY3.js";import"/censys/build/_shared/chunk-B7DSLLNE.js";import"/censys/build/_shared/chunk-GYDCO7LL.js";import{f as D}from"/censys/build/_shared/chunk-KMD3IRPL.js";import"/censys/build/_shared/chunk-Y7XN4DST.js";import{A as h,B as i,C as G,E as W,G as z,I as $,Ta as ee,Xa as re,aa as U,ca as J,da as X,ua as Z,va as j,z as R}from"/censys/build/_shared/chunk-UYH4GQ7Z.js";import"/censys/build/_shared/chunk-6URBRDCL.js";import{C as L,q as H,z as V}from"/censys/build/_shared/chunk-Q6RLBVJI.js";import{a as x,c as p}from"/censys/build/_shared/chunk-XJAPXWKX.js";import{d as n}from"/censys/build/_shared/chunk-2QEWK57A.js";var c=n(x(),1);var _="convert-query-form",F="query-to-convert",d={method:"get",action:ae,fetcherKey:_};var S={convertQueryForm:"GdGIp",inputContainer:"Ufo01"};var T=n(p(),1);function I({initialQuery:e}){let[t,a]=(0,c.useState)(e||""),[o,C]=(0,c.useState)(""),[v,b]=(0,c.useState)(!1),y=L({key:d.fetcherKey}),{isLoading:u}=M(d.fetcherKey),s=!!(!v&&o&&t&&!u);(0,c.useEffect)(()=>{y.data&&y.state==="idle"&&("errorMessage"in y.data?C(y.data.errorMessage):C(""))},[y]),(0,c.useEffect)(()=>{if(e){a(e);let m=new FormData;m.append(ie,e),y.submit(m,d)}},[e]);let Q=(0,c.useCallback)(m=>{let B=m.currentTarget.form;t.trim()&&!s&&B&&y.submit(new FormData(B),d),b(!1)},[t,s]),Te=(0,c.useCallback)(m=>{a(m.target.value),b(!0)},[]),Ce=(0,c.useCallback)(()=>{a(m=>m.trim())},[]),Ee=(0,c.useCallback)(m=>{m.key==="Enter"&&(m.preventDefault(),t&&!s&&Q(m))},[t,s,Q]);return(0,T.jsxs)(y.Form,{className:S.convertQueryForm,id:d.fetcherKey,action:d.action,method:d.method,"aria-label":"Query convert form",onSubmit:Q,children:[(0,T.jsx)(re,{label:"Original Query",labelFor:F,errorText:s&&o,required:!0,children:(0,T.jsxs)("div",{className:S.inputContainer,children:[(0,T.jsx)(W,{id:F,name:F,value:t,onChange:Te,onKeyDown:Ee,onBlur:Ce,placeholder:"Enter original query here...",isValid:!s,rows:1,required:!0,autoGrow:!0,isFullWidth:!0,disabled:u}),(0,T.jsx)(R,{icon:"search-line",size:"lg"})]})}),(0,T.jsx)(U,{type:"submit",isLoading:u,disabled:!t.trim()||s||!v,children:"Convert"})]},d.fetcherKey)}var q=n(x(),1);var ye=e=>{e.submit({},{action:ce,method:"post"})};var fe=n(x(),1);function P(e){return e.length===0?[]:e.map((t,a)=>{let o="";return a===e.length-2?o=e.length>2?", and ":" and ":a<e.length-2&&(o=", "),{joinerAfter:o,text:t}})}var g=n(p(),1);function ue(e){let t=[...new Set(e.map(Qe).filter(o=>Boolean(o)))];if(t.length===0)return(0,g.jsx)(i,{children:"Alternative query"});let a=P(t);return(0,g.jsxs)(i,{children:["Query for"," ",a.map(({joinerAfter:o,text:C},v)=>(0,g.jsxs)(fe.Fragment,{children:[(0,g.jsx)(i,{variant:h.DEFAULT_SEMIBOLD,children:C}),o]},`${C}-${v}`))]})}function Qe(e){switch(e){case D.ConvertQueryResponse_Target.TARGET_HOST:return"hosts";case D.ConvertQueryResponse_Target.TARGET_CERT:return"certificates";case D.ConvertQueryResponse_Target.TARGET_WEB:return"web properties";default:return}}var w=n(x(),1);var E={queryContainer:"E6Tn8",queryContent:"FTl2l",error:"nOzJT",actions:"OPBkN",errorContent:"_2tLGc",errorHeader:"UUG-Z"};var r=n(p(),1);function N({convertedQuery:e,headerText:t,errorMessages:a,isLoading:o}){let C=H(),v=te(),b=(0,w.useCallback)(async()=>{e&&await me(e)},[e]),y=(0,w.useCallback)(()=>{if(!e)return;let s=new FormData;s.set("q",e),v&&s.set(oe,v.organizationId),C(s,{action:"/censys",method:"get"})},[e,v]),u=null;return o?u=(0,r.jsx)($,{size:z.LARGE}):a?.length?u=(0,r.jsxs)("div",{className:E.errorContent,children:[(0,r.jsxs)("div",{className:E.errorHeader,children:[(0,r.jsx)(R,{icon:"close-circle-fill",size:"xl",className:E.error}),(0,r.jsx)(i,{children:"Original query contains the following errors:"})]}),(0,r.jsx)("ul",{children:a.map((s,Q)=>(0,r.jsx)("li",{children:(0,r.jsx)(i,{children:s})},`${s}-${Q}`))})]}):e&&(u=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R,{icon:"checkbox-circle-fill",size:"xl"}),(0,r.jsx)(i,{variant:h.DEFAULT_SOURCE,children:e}),(0,r.jsxs)("div",{className:E.actions,children:[(0,r.jsx)(ee,{content:"Copy",children:(0,r.jsx)(X,{variant:G.TERTIARY,shape:J.SQUARE,iconName:"file-copy-2",iconMode:"line","aria-label":"Copy query",onClick:b})}),(0,r.jsx)(U,{onClick:y,children:"Search"})]})]})),u&&(0,r.jsxs)("div",{className:E.queryContainer,children:[(0,r.jsx)(i,{children:t}),(0,r.jsx)("div",{className:E.queryContent,children:u})]})}var de={alternativeQuery:"_-8GP5"};var f=n(p(),1);function k({alternativeQueries:e}){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:de.alternativeQuery,children:[(0,f.jsx)(i,{variant:h.DEFAULT_SEMIBOLD,children:"Query Options"}),(0,f.jsxs)(i,{children:["We have a new web property asset type. The fields you are querying will return results for both hosts and web properties."," ",(0,f.jsx)(ne,{href:"https://docs.censys.com/docs/censys-platform-syntax-differences#web-properties",isExternal:!0,showExternalIcon:!0,children:"Learn more about web properties"}),"."]})]}),e.map((t,a)=>(0,f.jsx)(N,{headerText:ue(t.targets),convertedQuery:t.query},`alternative-query-${a}`))]})}var ve="Censys Platform Query";var Y={convertedQueryContainer:"DKmO9",contentContainer:"TLRWX"};var A=n(p(),1);function K(){let[e,t]=(0,q.useState)(),{isLoading:a}=M(_),o=L({key:_});return(0,q.useEffect)(()=>{o.data&&o.state==="idle"&&("convertedQuery"in o.data?(t(o.data.convertedQuery),ye(o)):t(void 0))},[o]),(0,A.jsx)("div",{className:Y.convertedQueryContainer,children:(0,A.jsx)("div",{className:Y.contentContainer,children:e?.alternative_queries?.length&&e?.converted_query?(0,A.jsx)(k,{alternativeQueries:[{query:e.converted_query,targets:e.targets},...e.alternative_queries]}):(0,A.jsx)(N,{headerText:ve,convertedQuery:e?.converted_query,errorMessages:e?.errors,isLoading:a})})})}var O={contentContainer:"X84wr",cardBody:"QCcsU",header:"_35wfF",subheader:"_5Et-U"};var _e=n(ge(),1),l=n(p(),1),Re=pe("Censys Query Converter");function he(){let{legacyQuery:e}=V();return(0,l.jsxs)("div",{className:O.contentContainer,children:[(0,l.jsx)(j,{bodyPadding:Z.NONE,children:(0,l.jsxs)("div",{className:O.cardBody,children:[(0,l.jsxs)("div",{className:O.header,children:[(0,l.jsx)(i,{variant:h.H2,children:"Query Converter"}),(0,l.jsx)(i,{className:O.subheader,children:"The Query Converter automatically converts your Legacy Search query or identifies syntax issues."})]}),(0,l.jsx)(I,{initialQuery:e}),(0,l.jsx)(K,{})]})}),(0,l.jsx)(le,{resourceLinks:[{href:"https://docs.censys.com/docs/dataset-differences-legacy-search-censys-platform#/",label:"Dataset Differences",variant:"documentation",iconName:"database-2-line"},{href:se,label:"Syntax Differences",variant:"documentation",iconName:"code-s-slash-line"},{href:"/home/definitions",label:"Data Definitions",variant:"community",iconName:"file-list-2-line",isExternal:!1}]})]})}export{he as default,Re as meta};
