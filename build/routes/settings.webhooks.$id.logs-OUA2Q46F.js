import"/censys/build/_shared/chunk-77LARZVO.js";import{a as Pe,b as x}from"/censys/build/_shared/chunk-45E72UWH.js";import{a as Oe}from"/censys/build/_shared/chunk-ZIRXA77W.js";import{a as Ae,b as Be}from"/censys/build/_shared/chunk-KCNATP3M.js";import{a as Ie}from"/censys/build/_shared/chunk-XOYFCC6C.js";import{a as Je}from"/censys/build/_shared/chunk-EAJKCKTG.js";import{a as xe}from"/censys/build/_shared/chunk-LQXVLPA4.js";import"/censys/build/_shared/chunk-OKZWZKQL.js";import{a as Te,b as Ne,c as ke,d as De,e as Ee}from"/censys/build/_shared/chunk-MBWLTMZZ.js";import"/censys/build/_shared/chunk-6GD6JLZ2.js";import"/censys/build/_shared/chunk-FKAW57YX.js";import"/censys/build/_shared/chunk-W5Y6TOHF.js";import"/censys/build/_shared/chunk-AEP7YWHE.js";import"/censys/build/_shared/chunk-URNZPFSF.js";import"/censys/build/_shared/chunk-WK35ORSL.js";import{a as Le}from"/censys/build/_shared/chunk-HG7D3PDC.js";import{a as be}from"/censys/build/_shared/chunk-ZKAH2G64.js";import"/censys/build/_shared/chunk-G6DKMBFA.js";import{k as Ce}from"/censys/build/_shared/chunk-HLRAT4GD.js";import"/censys/build/_shared/chunk-HPK4AUA3.js";import"/censys/build/_shared/chunk-W2GUOEY7.js";import"/censys/build/_shared/chunk-FQAS3FYV.js";import"/censys/build/_shared/chunk-P2FXGQA2.js";import"/censys/build/_shared/chunk-FH7VNUY3.js";import"/censys/build/_shared/chunk-B7DSLLNE.js";import{h as S}from"/censys/build/_shared/chunk-KMD3IRPL.js";import"/censys/build/_shared/chunk-Y7XN4DST.js";import{$ as ue,A as D,B as E,C as F,F as H,U as pe,V as de,W as $,X as q,aa as fe,bb as U,fb as he,gb as ve,sa as ge,ua as Se,va as ye,z as R}from"/censys/build/_shared/chunk-UYH4GQ7Z.js";import"/censys/build/_shared/chunk-6URBRDCL.js";import{C as me,f as le,p as M,t as ne,z as ce}from"/censys/build/_shared/chunk-Q6RLBVJI.js";import{a as w,c as a}from"/censys/build/_shared/chunk-XJAPXWKX.js";import{d as o}from"/censys/build/_shared/chunk-2QEWK57A.js";var g=o(w(),1);var We={backButton:"fFgWL"};var J=o(a(),1);function Q({webhookName:e}){let t=[{linkElement:(0,J.jsx)(be,{link:{to:"/settings/webhooks"},button:{iconLeft:"arrow-left",iconLeftMode:"line",variant:F.TERTIARY,className:We.backButton,size:ue.SMALL},children:"Manage Webhooks"})},{pathName:`Delivery Logs \u2022 ${e}`}];return(0,J.jsx)(ve,{breadcrumbs:t,size:he.MEDIUM})}var B=o(w(),1);var we=o(w(),1);var _e={collection:"dWhnQ"};var I="all",u={success:"success",failure:"failure",all:"all"},Ve=e=>{switch(e){case u.success:case u.failure:return e;default:return u.all}};var b=o(a(),1),Qe={label:"All related collections",value:I};function X({collectionIds:e,selectedCollectionId:t,onSelectCollection:i}){let{collections:c}=le(),d=(0,we.useMemo)(()=>{let m=c?.filter(p=>e.includes(p.collection_id))||[];return[Qe].concat(Ce(m,!1))},[c,e]);return(0,b.jsxs)("div",{className:_e.collection,children:[(0,b.jsx)(H,{options:d,onValueChange:i,value:t,valueProps:{placeholder:"Filter by Collection"},contentLeft:(0,b.jsx)(U,{iconName:"filter-3",iconMode:"line"})}),(0,b.jsx)("input",{hidden:!0,name:"collection",value:t,readOnly:!0})]})}var Me=[{label:"All deliveries",value:u.all},{label:"Successful deliveries",value:u.success},{label:"Failed deliveries",value:u.failure}];var Re={status:"JIB5a"};var L=o(a(),1);function Z({selectedStatus:e,onSelectStatus:t}){return(0,L.jsxs)("div",{className:Re.status,children:[(0,L.jsx)(H,{options:Me,onValueChange:t,value:e,valueProps:{placeholder:"Filter by Status"},contentLeft:(0,L.jsx)(U,{iconName:"filter-3",iconMode:"line"})}),(0,L.jsx)("input",{hidden:!0,name:"status",value:e,readOnly:!0})]})}var C={filterBar:"VftMh",section:"wi709",loadMoreButton:"RnHB-",divider:"ml9X-"};var Ue=o(w(),1);var T={expanded:"PcvXo",responseHeader:"D-A8F",container:"_01GTu",tabsContent:"JTjKH",tabsList:"us3aU"};var j=e=>e===S.WebhookDeliveryLogStatus.WEBHOOK_DELIVERY_LOG_STATUS_SUCCESS,Fe=(e,t)=>{let i=j(t)?"Delivered":"Not delivered";return`${e} | ${i}`};var l=o(a(),1);function ee({deliveryLog:e}){let{payload:t,error:i,status:c,response:d}=e,m=d?.headers,p=d?.body,r=j(c);return(0,l.jsx)("div",{className:T.expanded,children:(0,l.jsxs)(pe,{defaultValue:"request",children:[(0,l.jsxs)(de,{className:T.tabsList,children:[(0,l.jsx)($,{value:"request",children:"Request"}),(0,l.jsx)($,{value:"response",children:(0,l.jsxs)("div",{className:T.responseHeader,children:["Response",(0,l.jsx)(Ie,{statusCode:e.status_code})]})})]}),(0,l.jsx)(q,{value:"request",className:T.tabsContent,children:(0,l.jsx)(x,{label:"Body",content:t})}),(0,l.jsxs)(q,{value:"response",className:T.tabsContent,children:[m&&(0,l.jsx)(Pe,{headers:m}),p&&(0,l.jsx)(x,{label:"Body",content:p}),i&&(0,l.jsx)(x,{label:"Error",content:i}),!m&&!p&&!i&&(0,l.jsx)(x,{label:"Body",content:{success:r}})]})]})})}var P={successWrapper:"FiBo8",errorWrapper:"PUma3",success:"TPgQF",error:"z85YG"};var He=e=>{switch(e){case S.WebhookDeliveryLogStatus.WEBHOOK_DELIVERY_LOG_STATUS_SUCCESS:return{icon:"checkbox-circle-fill",className:P.success,wrapperClassName:P.successWrapper,ariaLabel:"Success"};case S.WebhookDeliveryLogStatus.WEBHOOK_DELIVERY_LOG_STATUS_FAILURE:case S.WebhookDeliveryLogStatus.WEBHOOK_DELIVERY_LOG_STATUS_UNRECOGNIZED:default:return{icon:"close-circle-fill",className:P.error,wrapperClassName:P.errorWrapper,ariaLabel:"Failure"}}};var te=o(a(),1);function oe({status:e}){let t=He(e);return(0,te.jsx)("div",{className:t.wrapperClassName,children:(0,te.jsx)(R,{icon:t.icon,className:t.className,size:"xl","aria-hidden":"false","aria-label":t.ariaLabel})})}var f={container:"vP39S",accordionHeader:"h2ACi",accordionTrigger:"_-795E",right:"UmxeV",icons:"hRgrO",triggerIcon:"-zfbk",accordionItem:"IdLh5"};var n=o(a(),1);function re({webhookName:e,deliveryLog:t}){let[i,c]=(0,Ue.useState)(""),d=Fe(e,t.status);return(0,n.jsx)(Te,{type:"single",value:i,onValueChange:c,className:f.accordionRoot,collapsible:!0,children:(0,n.jsx)(ye,{variant:ge.INTERACTIVE,className:f.container,bodyPadding:Se.NONE,children:(0,n.jsxs)(Ne,{value:"expandedContent",className:f.accordionItem,children:[(0,n.jsx)(ke,{className:f.accordionHeader,children:(0,n.jsxs)(De,{"data-testid":"accordion-trigger",className:f.accordionTrigger,children:[(0,n.jsx)(E,{variant:D.DEFAULT,children:d}),(0,n.jsxs)("div",{className:f.right,children:[(0,n.jsx)(xe,{timestamp:t.timestamp,variant:"short",tooltip:"Timestamp at which the Webhook was sent",format:"HH:MM:SS"}),(0,n.jsxs)("div",{className:f.icons,children:[(0,n.jsx)(oe,{status:t.status}),(0,n.jsx)(R,{className:f.triggerIcon,"aria-hidden":!0,name:"arrow-up-s",mode:"line"})]})]})]})}),(0,n.jsx)(Ee,{children:(0,n.jsx)(ee,{deliveryLog:t})})]})})})}var Ge={container:"rK6Nl"};var O=o(a(),1);function N({description:e}){return(0,O.jsxs)("div",{className:Ge.container,children:[(0,O.jsx)(E,{variant:D.H1_SUB_HEADLINE,children:"No delivery logs to display at this time."}),(0,O.jsx)(E,{variant:D.H3,children:e})]})}var ae={list:"Q16EX",listItem:"-yT-2"};var G=e=>e?"No logs match the selected filters.":"Logs will display once an event is triggered.";var A=o(a(),1);function se({deliveryLogs:e,webhookName:t,isFiltering:i}){return e.length===0?(0,A.jsx)(N,{description:G(i)}):(0,A.jsx)("ul",{className:ae.list,children:e.map((c,d)=>(0,A.jsx)("li",{className:ae.listItem,children:(0,A.jsx)(re,{webhookName:t,deliveryLog:c})},`${c.timestamp}-${d}`))})}var s=o(a(),1);function ie({webhookId:e,collectionIds:t,nextPageToken:i,deliveryLogs:c,webhookName:d,isFiltering:m,onLoadMore:p}){if(c.length===0&&!m)return(0,s.jsx)(N,{description:G(m)});let[r,y]=M(),_=`/settings/webhooks/${e}/logs`,h=r.get("start")||"",V=r.get("end")||"",Y=r.get("collection")||I,v=Ve(r.get("status")),z=(0,B.useCallback)((k,qe)=>{r.set("start",k),r.set("end",qe),y(r)},[]),K=(0,B.useCallback)(k=>{r.set("collection",k),y(r)},[]),Ke=(0,B.useCallback)(k=>{r.set("status",k),y(r)},[]),$e=(0,B.useCallback)(()=>{r.delete("start"),r.delete("end"),r.set("collection",I),r.set("status",u.all),y(r)},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ne,{action:_,method:"get",children:(0,s.jsxs)("div",{className:C.filterBar,children:[(0,s.jsxs)("div",{className:C.section,children:[(0,s.jsx)(Z,{selectedStatus:v,onSelectStatus:Ke}),(0,s.jsx)(X,{collectionIds:t,selectedCollectionId:Y,onSelectCollection:K})]}),(0,s.jsxs)("div",{className:C.section,children:[(0,s.jsx)("div",{className:C.divider,children:(0,s.jsx)(Le,{variant:"line--vertical",spacing:4})}),(0,s.jsx)(Be,{startDate:h,endDate:V,onApply:z,isClearable:!1}),m&&(0,s.jsx)(Ae,{onClick:$e,type:"button"})]})]})}),(0,s.jsx)(se,{deliveryLogs:c,webhookName:d,isFiltering:m}),i&&(0,s.jsx)(fe,{type:"button",variant:F.TERTIARY,iconRight:"arrow-down",iconRightMode:"line",onClick:p,className:C.loadMoreButton,children:"Load More"})]})}var Ye={container:"tzFPM"};var Xe=o(Je(),1),W=o(a(),1);function ze(){let{deliveryLogs:e,webhookName:t,webhookId:i,collectionIds:c,isFiltering:d,nextPageToken:m}=ce(),p=me(),[r]=M(),[y,_]=(0,g.useState)(e),[h,V]=(0,g.useState)(m);(0,g.useEffect)(()=>{if(p.data){let{nextPageToken:v,deliveryLogs:z}=p.data;_(K=>K.concat(z)),V(v)}},[p.data]),(0,g.useEffect)(()=>{_(e),V(m)},[e,m]);let Y=(0,g.useCallback)(()=>{if(h){let v=new URLSearchParams(r);v.set("page_token",h),p.load(`/settings/webhooks/${i}/logs?${v}`)}},[h,p.load,r]);return(0,W.jsxs)("div",{className:Ye.container,children:[(0,W.jsx)(Q,{webhookName:t}),(0,W.jsx)(ie,{deliveryLogs:y,webhookId:i,webhookName:t,collectionIds:c,nextPageToken:h,onLoadMore:Y,isFiltering:d})]})}export{Oe as ErrorBoundary,ze as default};
