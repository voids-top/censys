import{a as Ae,b as Fe}from"/censys/build/_shared/chunk-6HSN5L3Z.js";import{a as Me}from"/censys/build/_shared/chunk-5KJBEHFA.js";import{a as De}from"/censys/build/_shared/chunk-3LJRVTRQ.js";import{a as S}from"/censys/build/_shared/chunk-Y5QAV372.js";import{a as Re}from"/censys/build/_shared/chunk-4NXR4FZK.js";import{b as ve}from"/censys/build/_shared/chunk-BCFPRQGQ.js";import{b as ke}from"/censys/build/_shared/chunk-UWRUBCCK.js";import{b as w}from"/censys/build/_shared/chunk-JZYLTBAZ.js";import{a as Se}from"/censys/build/_shared/chunk-5PS6SCVZ.js";import{g as be}from"/censys/build/_shared/chunk-22JANVKU.js";import{r as ye,s as ge}from"/censys/build/_shared/chunk-HUE44QRB.js";import{c as _e}from"/censys/build/_shared/chunk-ZI7DUXMR.js";import{a as h}from"/censys/build/_shared/chunk-EZHABQF2.js";import{b as Q}from"/censys/build/_shared/chunk-OZE6EA6M.js";import{e as Ie,j as fe}from"/censys/build/_shared/chunk-D5QEORL2.js";import{A as c,B as me,C as de,D as Ce,E as pe,T as ue,U as Ee,V as Oe,Va as Ne,W as Le,Za as I,_a as ee,aa as Te,cb as he,x as se,y as _,z as ce}from"/censys/build/_shared/chunk-GALQBYYN.js";import{c as le}from"/censys/build/_shared/chunk-B7DSLLNE.js";import{d as N}from"/censys/build/_shared/chunk-6URBRDCL.js";import{p as re,q as ne}from"/censys/build/_shared/chunk-Q6RLBVJI.js";import{a as j,c as d}from"/censys/build/_shared/chunk-XJAPXWKX.js";import{d as a}from"/censys/build/_shared/chunk-2QEWK57A.js";var m=a(j(),1);var W=a(j(),1);var A=a(d(),1);function xe({collectionMaxSize:e}){return(0,A.jsx)(S,{title:"Collection Details",iconName:"collections",children:(0,A.jsxs)(c,{children:["Monitor your search queries with Collections to get continuous updates on new results and track changes. Collections can hold up to"," ",(0,A.jsx)(w,{value:e})," results. Learn how to"," ",(0,A.jsx)(h,{href:"https://docs.censys.com/docs/platform-collections#/",isExternal:!0,children:"use and create collections"}),"."]})})}var V={container:"_2OcIe",header:"JpMny",description:"oTAxI",collectionQuery:"ScCAi",sizeEstimator:"tcxjG"};var C={COLLECTION_NAME:"collectionName",COLLECTION_DESCRIPTION:"collectionDescription",COLLECTION_QUERY:"q",COLLECTION_CATEGORY:"collectionCategory",COLLECTION_ID:"collectionId",SHARED_WITH_ORG:"sharedWithOrg"},qe="Enter valid query here...",He="Enter valid query or use natural language...",o={ESTIMATE_COLLECTION_SIZE:{QUERY_FIELD_NAME:"query",QUERY_FIELD_SCHEMA:N.string({required_error:"A query is required"}).min(1,{message:"A query is required"})},COLLECTION_FORM:{NAMES:C,SCHEMAS:{[C.COLLECTION_NAME]:N.string({required_error:"A collection name is required."}).min(1,{message:"A collection name is required."}).max(100,{message:"Collection name must be less than 100 characters."}),[C.COLLECTION_DESCRIPTION]:N.string().max(500,{message:"Collection description must be less than 500 characters."}),[C.COLLECTION_QUERY]:N.string({required_error:"A collection query is required."}).min(1,{message:"A collection query is required."}),[C.COLLECTION_CATEGORY]:N.string({required_error:"A collection category is required."}).min(1,{message:"A collection category is required."}),[C.COLLECTION_ID]:N.optional(N.string()),[C.SHARED_WITH_ORG]:N.enum(["on","off"]).optional()},INITIAL_VALUES:{[C.COLLECTION_NAME]:"",[C.COLLECTION_DESCRIPTION]:"",[C.COLLECTION_QUERY]:"",[C.COLLECTION_CATEGORY]:"",[C.SHARED_WITH_ORG]:"off"}}};var t=a(d(),1),Je=Ae.map(e=>({label:_e(e),value:e})),G=({onBlur:e,onChange:O,onValueChange:p,errors:l,fieldValues:s,queryProps:g,collectionMaxSize:L})=>{let F=fe(),{initialQuery:R,collectionEstimatedSize:T,collectionEstimatedSizeError:k,collectionEstimatedSizeLoading:D,handleEstimateQuerySize:x,handleQueryChange:q,handleIsQueryValid:H}=g,U=(0,W.useCallback)(u=>{p(o.COLLECTION_FORM.NAMES.COLLECTION_CATEGORY,u)},[p]),$=(0,W.useCallback)(u=>{q(u.target.value)},[q]),z=(0,W.useCallback)(()=>{x(s.q)},[x,s.q]),b=l.q||k,M=D?"One moment while we estimate the query size...":T!==null?(0,t.jsxs)("span",{"aria-live":"polite",children:["Accepted. Size estimator of results:"," ",(0,t.jsx)(w,{value:T})]}):void 0;return(0,t.jsxs)("div",{className:V.container,"data-testid":"collection-details",children:[(0,t.jsx)(xe,{collectionMaxSize:L}),(0,t.jsx)(I,{label:"Collection Name",labelFor:"collection-name",errorText:l.collectionName,required:!0,children:(0,t.jsx)(de,{name:o.COLLECTION_FORM.NAMES.COLLECTION_NAME,value:s.collectionName,isValid:!l.collectionName,id:"collection-name",type:"text",isFullWidth:!0,onBlur:e,onChange:O,autoComplete:"off",placeholder:"Enter collection name here...","data-testid":"collection-name-input"})}),(0,t.jsx)(I,{label:"Collection Category",labelFor:"collection-category",description:"Add more context for your team to understand what kind of collection you are monitoring.",errorText:l.collectionCategory,required:!0,children:(0,t.jsx)(pe,{defaultValue:s.collectionCategory,name:o.COLLECTION_FORM.NAMES.COLLECTION_CATEGORY,options:Je,onValueChange:U,"data-testid":"collection-category-select"})}),(0,t.jsx)(I,{label:"Collection Query",labelFor:"collection-query",required:!0,hintText:M,errorText:!M&&b&&(0,t.jsx)("span",{"aria-live":"polite",children:b}),children:(0,t.jsx)("div",{className:V.collectionQuery,children:(0,t.jsx)(be,{id:"collection-query",name:o.COLLECTION_FORM.NAMES.COLLECTION_QUERY,inputLabel:"Collection Query",initialValue:R,placeholder:F?He:qe,onChange:$,rightContainerSlot:({query:u,isValid:J})=>(0,t.jsx)(Te,{type:"button",variant:me.TERTIARY,className:V.sizeEstimator,isLoading:D,disabled:!!b||!u||!J,onClick:z,children:Fe.SIZE_ESTIMATOR}),onIsValidChange:H})})}),(0,t.jsx)(I,{label:"Description",labelFor:"collection-description",description:"Note: In lieu of a description, the query syntax will be used.",errorText:l.collectionDescription,children:(0,t.jsx)(Ce,{name:o.COLLECTION_FORM.NAMES.COLLECTION_DESCRIPTION,id:"collection-description",isValid:!l.collectionDescription,isFullWidth:!0,onBlur:e,onChange:O,value:s.collectionDescription,placeholder:"Optional text to provide context describing your collection.","data-testid":"collection-description-input"})})]})};var Ue=a(j(),1);var Y={container:"_7OzZN",sharedCollectionContainer:"a4WzL",sharedCollectionLabel:"kV3-a"};var r=a(d(),1),B=({onValueChange:e,fieldValues:O,hasSharingCapability:p,currentPlan:l})=>{let s=Q("ACCOUNTS_SITE_URL"),g=(0,Ue.useContext)(le),L=ge(g),F=l==="Free"?`${s}/settings/billing/plan`:L,R=l==="Enterprise"?"Collections can be shared with members of your organization. They cannot be shared with users outside of your organization.":"Collections that belong to Free or Starter users cannot be shared. Enterprise users can share collections with other users in their organization.";return(0,r.jsxs)("div",{className:Y.container,"data-testid":"collection-collaborators",children:[(0,r.jsx)(S,{title:"Collaborators (Optional)",iconName:"collaborators",children:(0,r.jsx)(c,{children:R})}),p?(0,r.jsx)(I,{children:(0,r.jsxs)(he,{"data-testid":"collection-collaborators-radio-buttons",name:o.COLLECTION_FORM.NAMES.SHARED_WITH_ORG,value:O[o.COLLECTION_FORM.NAMES.SHARED_WITH_ORG],"aria-label":o.COLLECTION_FORM.NAMES.SHARED_WITH_ORG,onValueChange:T=>{e(o.COLLECTION_FORM.NAMES.SHARED_WITH_ORG,T)},children:[(0,r.jsx)(ee,{label:"My Collection (Default, private)",value:"off","aria-label":"My Collection"},"my-collection"),(0,r.jsx)("div",{className:Y.sharedCollectionContainer,children:(0,r.jsx)(ee,{label:(0,r.jsxs)("div",{className:se(Y.sharedCollectionLabel),children:[(0,r.jsx)("span",{children:"Shared Collection"}),(0,r.jsx)(_,{"aria-hidden":!0,name:"group",mode:"line",size:"xl"})]}),value:"on","aria-label":"Shared Collection"},"shared-with-org")})]})}):(0,r.jsxs)(c,{children:[(0,r.jsx)(h,{href:F,isExternal:!0,children:"Upgrade your plan"})," ","to share collections."]})]})};var f={container:"UhZDW",alertsSection:"_6Duur",label:"U5-gN",alerts:"zwQep",bold:"UCWzv",webhookConfigured:"-uDTV",webhookLink:"V1Mrf",linkContent:"_85yq8"};var i=a(d(),1);function Z({hasWebhookCapability:e,isFreePlan:O,webhook:p}){let l=Q("ACCOUNTS_SITE_URL"),s=p&&Re(p.name);return(0,i.jsxs)("div",{className:f.container,children:[(0,i.jsx)(S,{title:"Notifications (Optional)",iconName:"notifications",children:(0,i.jsx)(c,{children:"Use webhooks to receive automated updates whenever assets are added to or removed from your collections. This lets you send Censys data directly to other applications so you can monitor events and automate workflows."})}),(0,i.jsxs)("div",{className:f.alertsSection,children:[e&&(0,i.jsxs)(c,{"data-testid":"collection-notifications-manage-webhooks",children:["Manage your webhooks in"," ",(0,i.jsxs)(h,{size:"md",href:"/settings/webhooks",className:f.bold,children:["Settings ",">"," Alerts & Notifications ",">"," Webhooks"]}),"."]}),e&&s&&(0,i.jsxs)("div",{"data-testid":"collection-notifications-webhook-configured",className:f.webhookConfigured,children:[(0,i.jsx)(c,{children:"Webhook applied to this Collection:"}),(0,i.jsx)(h,{size:"md",href:`/settings/webhooks/${s}`,isExternal:!0,className:f.webhookLink,children:(0,i.jsxs)("div",{className:f.linkContent,children:[(0,i.jsx)(_,{name:"webhook",mode:"line",size:"lg"}),p.display_name||"Unnamed Webhook"]})})]}),!O&&!e&&(0,i.jsx)(c,{"data-testid":"collection-notifications-non-admin",children:"You do not have access. Contact your admin to set up webhooks."}),O&&(0,i.jsxs)(c,{"data-testid":"collection-notifications-free-plan",children:["Ready to create webhooks?"," ",(0,i.jsx)(h,{size:"md",href:`${l}/settings/plan`,isExternal:!0,children:"Upgrade"})," ","to a Starter account."]})]})]})}var ze={title:"LZ4Gk",shared:"GDqUp"};var X=a(d(),1),oe=({collection:e})=>e?(0,X.jsxs)(c,{variant:ce.H2,className:ze.title,children:["Update ",e.name,(0,X.jsx)(Me,{collection:e})]}):"Create New Collection";var y={tab:"_8DeC6",tabContent:"_6RUBM",tooltip:"xNcsN",lockIcon:"_6lt-0",tabFiller:"U0f8L"};var n=a(d(),1),je=({existingCollection:e,formKey:O,hasSharingCapability:p,hasWebhookCapability:l,...s})=>{let[g,L]=(0,m.useState)(),F=ne(),{isLoading:R,errorMessage:T,status:k}=ke(O),[D,x]=(0,m.useState)(!1),q=ye(),H=Ie(),U=H?.currentPlanType==="Free",[$]=re(),z=$.get("query")||e?.query||o.COLLECTION_FORM.INITIAL_VALUES.q;(0,m.useEffect)(()=>{L(T)},[T]);let{handleBlur:b,handleChange:M,handleValueChange:u,handleSubmit:J,isValid:Pe,isDirty:Qe,formState:v}=Se(o.COLLECTION_FORM.SCHEMAS,{[o.COLLECTION_FORM.NAMES.COLLECTION_CATEGORY]:e?.category||o.COLLECTION_FORM.INITIAL_VALUES.collectionCategory,[o.COLLECTION_FORM.NAMES.COLLECTION_DESCRIPTION]:e?.description||o.COLLECTION_FORM.INITIAL_VALUES.collectionDescription,[o.COLLECTION_FORM.NAMES.COLLECTION_NAME]:e?.name||o.COLLECTION_FORM.INITIAL_VALUES.collectionName,[o.COLLECTION_FORM.NAMES.COLLECTION_QUERY]:z,[o.COLLECTION_FORM.NAMES.COLLECTION_ID]:e?.collection_id||"",[o.COLLECTION_FORM.NAMES.SHARED_WITH_ORG]:e?.shared_with_org?"on":"off"},O,F),{clear:te,handleEstimateCollectionSize:ie,size:we,errorMessage:ae,loading:Ve}=De(),We=(0,m.useCallback)(E=>{L(void 0),ie(E)},[ie]),Ge=(0,m.useCallback)(E=>{te(),L(void 0),u(o.COLLECTION_FORM.NAMES.COLLECTION_QUERY,E)},[te,u]);(0,m.useEffect)(()=>{k==="HAS_SUCCESS"&&q("/collections")},[k]),(0,m.useEffect)(()=>{L(T)},[T]);let Ye=Pe&&D&&!!v.values.q&&!g&&!ae,P=(0,m.useMemo)(()=>[{id:"collection-details",label:"Collection Details",component:(0,n.jsx)(G,{...s,onBlur:b,onChange:M,onValueChange:u,errors:v.errors,fieldValues:v.values,queryProps:{initialQuery:z,collectionEstimatedSize:we,collectionEstimatedSizeError:ae,collectionEstimatedSizeLoading:Ve,handleEstimateQuerySize:We,handleQueryChange:Ge,handleIsQueryValid:x}})},{id:"collection-collaborators",label:"Collaborators",isLocked:!p,lockedMessage:"Upgrade to unlock",component:(0,n.jsx)(B,{hasSharingCapability:p,currentPlan:H?.currentPlanType,fieldValues:v.values,onValueChange:u})},{id:"collection-notifications",label:"Notifications",isLocked:!l,lockedMessage:U?"Upgrade to unlock":"Requires Administrator permission to unlock",component:(0,n.jsx)(Z,{hasWebhookCapability:l,isFreePlan:U,webhook:e?.webhook})}],[s,v.errors,b,M,u]),[Be,Ze]=(0,m.useState)(P[0].id);return(0,n.jsxs)(ve,{cancelFallbackUrl:"/collections",onSubmit:E=>{L(void 0),J(E)},errorMessage:g,title:(0,n.jsx)(oe,{collection:e}),submitButtonTextLoading:e?"Saving...":"Creating...",submitButtonText:e?"Save":"Create New Collection",submitButtonIcon:e?void 0:"add",isLoading:R,isDirty:Qe,isValid:Ye,children:[e?.collection_id&&(0,n.jsx)("input",{type:"hidden",name:o.COLLECTION_FORM.NAMES.COLLECTION_ID}),(0,n.jsxs)(ue,{orientation:"vertical",value:Be||P[0].id,onValueChange:Ze,children:[(0,n.jsxs)(Ee,{className:y.tabs,children:[P.map(({id:E,label:K,isLocked:Xe,lockedMessage:$e})=>(0,n.jsxs)(Oe,{value:E,className:y.tab,children:[K," ",Xe&&(0,n.jsx)(Ne,{content:$e,side:"right",triggerClassName:y.tooltip,children:(0,n.jsx)(_,{"aria-hidden":!0,name:"lock-star",mode:"line",size:"md",className:y.lockIcon})})]},E)),(0,n.jsx)("div",{className:y.tabFiller})]}),P.map(({id:E,component:K})=>(0,n.jsx)(Le,{value:E,className:y.tabContent,children:K},E))]})]})};export{je as a};
