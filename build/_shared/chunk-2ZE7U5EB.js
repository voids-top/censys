import{d as b}from"/censys/build/_shared/chunk-FH7VNUY3.js";import{C as p}from"/censys/build/_shared/chunk-Q6RLBVJI.js";import{a as v,c as C}from"/censys/build/_shared/chunk-XJAPXWKX.js";import{d as c}from"/censys/build/_shared/chunk-2QEWK57A.js";var e=c(v(),1);var J=c(C(),1),f="/api/censeye-tracked-job",x=5e3,y=(0,e.createContext)(void 0);function E({children:r,pollingEnabled:d=!1}){let{accessState:P}=b(),s=P?.organization?.organizationId,t=(0,e.useRef)(null),n=p(),o=n.data,a=(0,e.useMemo)(()=>{let u=new URLSearchParams;return s?(u.append("org",s),`${f}?${u}`):f},[s]),i=(0,e.useCallback)(()=>{!t.current&&d&&(n.load(a),t.current=setInterval(()=>{n.load(a)},x))},[n.load,a]),l=(0,e.useCallback)(()=>{t.current&&(clearInterval(t.current),t.current=null)},[]);(0,e.useEffect)(()=>{i()},[d]),(0,e.useEffect)(()=>{(o?.job===null||o?.job&&o?.job.state!=="STATE_STARTED")&&l()},[o,l]),(0,e.useEffect)(()=>()=>l(),[]);let m=(0,e.useMemo)(()=>({job:o?.job||null,error:o?.error||null,startPolling:i}),[o,i]);return(0,J.jsx)(y.Provider,{value:m,children:r})}function g(){let r=(0,e.useContext)(y);if(r===void 0)throw new Error("useCenseyeJobContext must be used within a CenseyeJobProvider");return r}export{E as a,g as b};
