import{a as j}from"/censys/build/_shared/chunk-ACWHCTH2.js";import{q as W}from"/censys/build/_shared/chunk-HUE44QRB.js";import{a as b}from"/censys/build/_shared/chunk-NJXUBBUP.js";import{a as Y,b as $,c as K,d as X,g as U,i as B,j as Z,n as J,o as q,u as Q}from"/censys/build/_shared/chunk-YZ2VHXR4.js";import{a as M}from"/censys/build/_shared/chunk-RPAGMMSK.js";import{o as G}from"/censys/build/_shared/chunk-WJEUPJRQ.js";import{j as z}from"/censys/build/_shared/chunk-OZE6EA6M.js";import{$a as k,A as g,F as S,H as x,_ as T,ab as H,bb as F,va as D,wa as R,z as E}from"/censys/build/_shared/chunk-GALQBYYN.js";import{a as P,c as p}from"/censys/build/_shared/chunk-XJAPXWKX.js";import{d as a}from"/censys/build/_shared/chunk-2QEWK57A.js";function ye(e){return!!e&&typeof e=="object"&&"code"in e&&z(e.code)}var C={body:"l1bIH",container:"iTRhd",description:"jmvIz",descriptionContainer:"dAdIL",statText:"kd7b4",timeFrame:"ekpwc"};var s=a(p(),1);function I({description:e,timeFrame:o,count:i=0,isLoading:l=!1,isError:n=!1}){return(0,s.jsx)(R,{bodyPadding:D.NONE,className:C.container,children:(0,s.jsxs)("div",{className:C.body,children:[(0,s.jsx)(g,{className:C.statText,children:l?(0,s.jsx)(x,{size:S.MEDIUM}):n?"-":(0,s.jsx)(T,{value:i})}),(0,s.jsxs)("div",{className:C.descriptionContainer,children:[(0,s.jsx)(g,{variant:E.H6,className:C.description,children:e}),o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{variant:"line--vertical",spacing:8}),(0,s.jsx)(g,{variant:E.H5,className:C.timeFrame,children:o})]})]})]})})}var ee={container:"HwoSo"};var V=a(p(),1);function re({values:e,isLoading:o=!1,isError:i=!1}){return(0,V.jsx)("div",{className:ee.container,children:e.map(({description:l,count:n,timeFrame:u})=>(0,V.jsx)(I,{description:l,count:n,timeFrame:u,isLoading:o,isError:i},l))})}var oe=a(P(),1);var ae=a(p(),1);function N({errorCode:e}){let o=(0,oe.useMemo)(()=>Ce(e),[e]);return(0,ae.jsx)(W,{"data-testid":`error_${String(e)}`,iconName:o.iconName,iconMode:o.iconMode,title:o.title,children:o.message})}function Ce(e){switch(e){case 140001:return{iconName:"pulse",title:"Could not get consumption information.",message:"Please try again later."};case 140002:return{iconName:"pulse",title:"Could not get usage information.",message:"Please try again later."};case 14e4:return{iconName:"database-2",title:"No data available.",message:"Please try again later."};case 1e5:default:return{iconName:"pulse",title:"An error occurred.",message:"Please try again later."}}}var le=a(P(),1);var v=a(P(),1);var f={chartContainer:"rb-Ep",tooltipContainer:"FyRDV",tooltip:"d1bEE",tooltipText:"_09Xss",mainFillColor:"Gwz8b",hoverFillColor:"_2dChZ",averageLine:"Rzm9t",loadingOverlay:"y1ufV"};var ne=a(p(),1);function ie({monthlyAverage:e,maxValue:o}){let{plotHeight:i,plotWidth:l}=Y();if(!i||!e)return null;let n=i*(1-e/o);return(0,ne.jsx)("line",{x1:0,x2:l,y1:n,y2:n,className:f.averageLine})}var r=a(p(),1);function ve({data:e,customBarWidth:o,fillColors:i=[M.BRAND_PEACH,M.BRAND_PEACH_DARK],title:l,monthlyAverage:n,isLoading:u}){if(!u&&(!e||e.length===0))return(0,r.jsx)(N,{errorCode:14e4});let y=(0,v.useRef)(null),[d,_]=(0,v.useState)(""),{showTooltip:me,setTooltipPosition:de,hideTooltip:ge}=K(),A=(0,v.useMemo)(()=>e.map(m=>({id:m.datetime.toString(),value:G(m.count??0)})),[e]),O=(0,v.useMemo)(()=>Math.max(...A.map(m=>Number(m.value))),[A]),w=m=>m.id===d?i[1]:i[0],ce=m=>{let h=m.currentTarget.getBoundingClientRect();de({clientX:h.left+h.width/2,clientY:h.top})},ue=(m,h)=>{me(h)(),_(h.id)},fe=()=>{ge(),_("")};return(0,r.jsxs)("div",{ref:y,className:f.chartContainer,role:"img","aria-label":`${l} bar chart showing credit usage over time`,children:[(0,r.jsxs)(X,{ref:y,margin:{top:48,right:24,bottom:64,left:64},children:[(0,r.jsx)(J,{variant:U.VERTICAL,data:A,children:(0,r.jsx)(q,{width:o,height:"value",type:"BAR",fill:w,stroke:w,variant:U.VERTICAL,onMouseMove:ce,onMouseEnter:ue,onMouseLeave:fe})}),(0,r.jsx)(ie,{monthlyAverage:n??void 0,maxValue:O}),(0,r.jsx)(B,{clip:"left",title:l,showGridLines:!0,strokeDasharray:"3,3",range:[0,O],extentRatio:0,numTicks:3}),(0,r.jsx)(B,{clip:"bottom",range:A.map(m=>Z(m.id,{month:"short",timeZone:"UTC"})),customBarWidth:o,title:"Past Year",extentRatio:0,showLine:!0})]}),u&&(0,r.jsx)("div",{className:f.loadingOverlay,children:(0,r.jsx)(x,{size:S.EXTRA_LARGE})})]})}function se({data:e,title:o,fillColors:i,customBarWidth:l,monthlyAverage:n,isLoading:u}){return(0,r.jsxs)($,{children:[(0,r.jsx)(Q,{render:({data:y})=>(0,r.jsx)("div",{className:f.tooltip,children:y?.id&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{as:"p",className:f.tooltipText,children:`${new Date(y?.id)?.toLocaleDateString("en-US",{month:"long",year:"numeric",timeZone:"UTC"})}`}),(0,r.jsx)(g,{as:"p",className:f.tooltipText,children:(0,r.jsx)(T,{value:y?.value})})]})}),className:f.tooltipContainer}),(0,r.jsx)(ve,{data:e,title:o,fillColors:i,customBarWidth:l,monthlyAverage:n,isLoading:u})]})}var L=[{value:"last 30",label:"Last 30 Days"},{value:"by month",label:"By Month"}];var c={wrapper:"rNL5d",body:"tL7az",container:"xr5ut",header:"-epWw",headerText:"UU1UM",toggleButtonContainer:"kKBcR",chartContainer:"DNjrV",aggregationsContainer:"ocKSu",aggregationsValue:"vlIJG",divider:"kmI7M"};var t=a(p(),1);function pe({usageOverTime:e,subHeading:o,isLoading:i,isError:l,aggregations:n}){let[u,y]=(0,le.useState)("last 30");return(0,t.jsx)("div",{className:c.wrapper,children:(0,t.jsxs)(R,{bodyPadding:D.NONE,className:c.container,children:[(0,t.jsxs)("div",{className:c.header,children:[(0,t.jsx)(g,{variant:E.H4,className:c.headerText,children:"Credit Usage"}),o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b,{variant:"line--vertical",spacing:8}),(0,t.jsx)(F,{variant:H.SECONDARY,"aria-label":"Trend",className:c.toggleButtonContainer,defaultValue:L[0].value,children:L.map(d=>(0,t.jsx)(k,{value:d.value,label:d.label,"aria-label":`${d.label} Trend`,onClick:()=>y(d.value)},d.value))}),n&&u==="by month"&&(0,t.jsxs)("div",{className:c.aggregationsContainer,children:[(0,t.jsx)(b,{variant:"line--horizontal",size:20,className:c.divider,inheritColor:!0}),(0,t.jsx)(g,{variant:E.H6,children:"Average Monthly Usage"}),(0,t.jsx)("span",{className:c.aggregationsValue,children:(0,t.jsx)(T,{value:n.monthlyAverage})})]})]})]}),(0,t.jsx)("div",{className:c.body,children:l?(0,t.jsx)(N,{errorCode:1e5}):u==="by month"?(0,t.jsx)(se,{data:e.monthly??[],title:"Credits",customBarWidth:20,monthlyAverage:n?.monthlyAverage,isLoading:i}):(0,t.jsx)(j,{title:"Credits",bottomTitle:"Past Month",stats:[{title:"Credits",stats:e.daily.map(d=>({...d,datetime:d.datetime.toString()}))}],isLoading:i})})]})})}export{ye as a,re as b,N as c,pe as d};
