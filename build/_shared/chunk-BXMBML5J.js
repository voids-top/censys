import{a as T}from"/censys/build/_shared/chunk-QJVHIZ52.js";import{a as N}from"/censys/build/_shared/chunk-MOHCJWAV.js";import{e as x}from"/censys/build/_shared/chunk-2TWE7TSA.js";var i=x(N(),1);var V=e=>e&&e.trim();function f(e,a,l){let t=V(l),n=e[a].safeParse(t);return n.success?{sanitizedValue:t}:{sanitizedValue:t,error:T.treeifyError(n.error)?.errors[0]}}function z(e,a){let l={values:{...a.values},errors:{}},t=!0;return Object.keys(a.values).forEach(n=>{let{sanitizedValue:u,error:m}=f(e,n,a.values[n]?.toString()||"");l.values[n]=u,m&&(l.errors[n]=m,t=!1)}),{isValid:t,updatedFormState:l}}function k(e,a){return Object.keys(e).map(t=>{let n=e[t];return a.values[t]!==n}).some(t=>t===!0)}function C(e,a,l,t,n){let[u,m]=(0,i.useState)({values:a,errors:{}}),[v,g]=(0,i.useState)(!1),p=(0,i.useMemo)(()=>!Object.keys(u.values).map(s=>{let c=u.values[s];return f(e,s,c).error}).some(s=>s),[u.values]),y=(0,i.useCallback)((o,r)=>{m(s=>{let c={...s,values:{...s.values,[o]:typeof r=="function"?r(s.values[o]):r},errors:{...s.errors,[o]:f(e,o,typeof r=="function"?r(s.values[o]):r).error}};return g(k(a,c)),c})},[]),h=(0,i.useCallback)(o=>{let{name:r,value:s}=o.target;y(r,s)},[u]),S=(0,i.useCallback)((o,r)=>{o.preventDefault(),o.stopPropagation();let c=new FormData(o.currentTarget).get("csrf"),{isValid:F,updatedFormState:d}=z(e,u);F&&(n?t({...d.values,...r},{method:"get"}):c&&t({...d.values,csrf:c,fetcherKey:l},{method:"post",fetcherKey:l,navigate:!1})),m(d),g(!1)},[u,p,t]),E=(0,i.useCallback)(o=>{let{name:r,value:s}=o.target,{sanitizedValue:c,error:F}=f(e,r,s);m(d=>({...d,values:{...d.values,[r]:c},errors:{...d.errors,[r]:F}}))},[]);return{formState:u,isDirty:v,isValid:p,handleChange:h,handleValueChange:y,handleSubmit:S,handleBlur:E}}export{z as a,C as b};
