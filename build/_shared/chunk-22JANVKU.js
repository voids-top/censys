import{b as js}from"/censys/build/_shared/chunk-FQTIU6PB.js";import{a as Qs}from"/censys/build/_shared/chunk-J6D36YFI.js";import{a as Js}from"/censys/build/_shared/chunk-EI6HYVQX.js";import{a as $s}from"/censys/build/_shared/chunk-J22KWXE5.js";import{b as Sr,c as Er}from"/censys/build/_shared/chunk-RAMDI2JB.js";import{a as Bs}from"/censys/build/_shared/chunk-O3SGPCPK.js";import{a as Ws}from"/censys/build/_shared/chunk-CJIEOTRC.js";import{a as Cr}from"/censys/build/_shared/chunk-GYDCO7LL.js";import{d as Fs}from"/censys/build/_shared/chunk-ATOZ4ARP.js";import{b as Xs,d as Zs,e as xe}from"/censys/build/_shared/chunk-DSG73WCA.js";import{a as zs}from"/censys/build/_shared/chunk-M7IO6GB7.js";import{A as _n,y as Uc}from"/censys/build/_shared/chunk-HUE44QRB.js";import{a as Hs}from"/censys/build/_shared/chunk-Z3PARXZG.js";import{a as de}from"/censys/build/_shared/chunk-NJXUBBUP.js";import{a as He}from"/censys/build/_shared/chunk-437XWWKH.js";import{c as D}from"/censys/build/_shared/chunk-G6DKMBFA.js";import{a as qs}from"/censys/build/_shared/chunk-EYKPJWWG.js";import{a as Be}from"/censys/build/_shared/chunk-RPAGMMSK.js";import{a as Vs}from"/censys/build/_shared/chunk-WJT5ZZXK.js";import{k as Ys,l as Ks}from"/censys/build/_shared/chunk-ZI7DUXMR.js";import{c as Ar}from"/censys/build/_shared/chunk-UKMMPQ5X.js";import{a as W}from"/censys/build/_shared/chunk-EZHABQF2.js";import{b as Lo}from"/censys/build/_shared/chunk-2RV3CGNA.js";import{b as te}from"/censys/build/_shared/chunk-OZE6EA6M.js";import{a as oo}from"/censys/build/_shared/chunk-HNL4CPAB.js";import{a as Cn,c as hr,d as Tr,e as yr,f as eo,h as ue,j as to,k as Gs}from"/censys/build/_shared/chunk-D5QEORL2.js";import{s as Ln,u as Nt,x as ws}from"/censys/build/_shared/chunk-VQ4M4AGG.js";import{$ as It,A as g,Aa as xs,B as x,Ba as bs,D as Zt,E as ys,Ea as Os,F as lr,H as cr,Ja as gr,Ma as Jt,Na as jt,Ra as Ms,Va as mt,Wa as Ps,Xa as Ds,Za as Co,aa as re,ba as me,ca as Ze,da as $,ea as As,fa as yn,ga as An,ha as pr,ia as mr,ib as ks,ja as ur,la as Cs,ma as Ls,n as ar,na as dr,nb as Us,o as sr,p as ir,q as Xe,r as Xt,s as Re,ta as _s,va as fr,w as pt,wa as vs,x as P,xa as Is,y as I,ya as Ns,z as A,za as Rs}from"/censys/build/_shared/chunk-GALQBYYN.js";import{d as M}from"/censys/build/_shared/chunk-6URBRDCL.js";import{C as X,c as nr,q as hs,t as Ts}from"/censys/build/_shared/chunk-Q6RLBVJI.js";import{a as v,c as f}from"/censys/build/_shared/chunk-XJAPXWKX.js";import{d as c}from"/censys/build/_shared/chunk-2QEWK57A.js";var Fe=c(v(),1);function Gc({currentData:e,nextPageToken:t,filters:o}){let[r,n]=(0,Fe.useState)([]),a=(0,Fe.useRef)(null),l=(0,Fe.useRef)([]),s=(0,Fe.useRef)(o),m=Object.keys(o).some(u=>s.current[u]!==o[u]);return(0,Fe.useEffect)(()=>{a.current===t&&!m||(m||t&&l.current.includes(t)?(n(e),l.current=[]):n(u=>[...u,...e]),a.current=t,t&&l.current.push(t),s.current=o)},[e,t,m]),(0,Fe.useMemo)(()=>({data:r,hasNextPage:!!t,filterChanged:m}),[r,t,m])}var ei={mainContent:"nN6Ut"};var oi=c(f(),1);function ti({children:e,testId:t}){return(0,oi.jsx)("div",{"data-testid":t,className:ei.mainContent,children:e})}var vn="exact-match-suggestion-item",In='""';var _o="Query Converter will automatically convert your Legacy Search queries into Platform queries until ",vo="2026-09-30T09:00:00.000Z",Io="https://docs.censys.com/docs/censys-platform-syntax-differences#/";var ee=c(v(),1);var w=c(v(),1);var Rt=c(v(),1);function wc({shouldShowBanner:e}){let[t,o]=(0,Rt.useState)(e),[r,n]=(0,Rt.useState)(e),a=Ln();(0,Rt.useEffect)(()=>{e?(o(!0),n(!0)):n(!1)},[e]);let l=(0,Rt.useCallback)(()=>{r?n(!1):e||setTimeout(()=>o(!1),500)},[r,e]);return{animationState:(()=>!a&&!e||a&&!e&&!t?"hidden":r?"animatingIn":!e&&t?"animatingOut":e&&!r?"visible":"hidden")(),handleAnimationEnd:l}}var ri=c(v(),1),Nn=()=>{let e=(0,ri.useRef)(!1);return{suppressOnce:()=>{e.current=!0},shouldSkip:()=>e.current?(e.current=!1,!0):!1}};var oc=c(v(),1);var Ql=c(v(),1);var Vr=c(v(),1);var xt=c(v(),1);var Je={content:"i10Wb",popoverHeading:"DFtR8",action:"p-GaJ",actionLink:"_7yCGq",lock:"thisC"};var Z=c(f(),1);function Rn({query:e,isValid:t}){let{t:o}=D(),[r,n]=(0,xt.useState)(!1),[a,l]=(0,xt.useState)(!1),m=!nr().pathname.startsWith("/collections"),u=Ks(),S=Ys({query:e,source:"search"}),T=(0,xt.useCallback)(()=>{n(!1)},[]),_=(0,xt.useCallback)(async()=>{try{let E=new URL(window.location.toString());E.searchParams.delete(oo),await Ws(E.toString()),l(!0),n(!1)}catch{}},[]),h=(0,xt.useCallback)(E=>{E||l(!1)},[]);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(Is,{children:[(0,Z.jsx)(Rs,{asChild:!0,children:(0,Z.jsx)($,{variant:r?x.PRIMARY:x.DEFAULT,shape:Ze.ROUND,size:me.LARGE,iconName:"list-settings",iconMode:"fill",type:"button","aria-label":o("Search Actions"),className:Je.moreActionsButton})}),(0,Z.jsx)(Ns,{children:(0,Z.jsxs)(xs,{align:"end",className:Je.content,children:[(0,Z.jsx)(Os,{children:(0,Z.jsx)(g,{variant:A.H4,as:"span",className:Je.popoverHeading,children:o("Search Actions")})}),(0,Z.jsxs)(bs,{children:[(0,Z.jsxs)("div",{className:Je.action,children:[(0,Z.jsx)(He,{link:{title:t?"Create a collection based on this query":"Invalid query",to:S},button:{className:Je.actionLink,disabled:!t||!u,iconLeft:"add",onClick:T,variant:x.DEFAULT},children:o("Create a Collection")}),!u&&(0,Z.jsx)(Ar,{className:Je.lock,action:"unlock"})]}),m&&(0,Z.jsx)("div",{className:Je.action,children:(0,Z.jsx)(re,{className:Je.actionLink,disabled:!t,onClick:_,title:o("Copy a shareable link to your clipboard"),variant:x.DEFAULT,iconLeft:"link",iconLeftMode:"",children:o("Share link")})})]})]})})]}),a&&(0,Z.jsx)(ur,{title:"Link copied",behavior:mr.DISMISSIVE,variant:pr.SUCCESS,onOpenChange:h,children:(0,Z.jsx)(g,{children:"The link was successfully copied to your clipboard."})})]})}var ni="Search Censys data for...",ai="Search Censys data using natural language or CenQL...",xn="global-search-bar-input",bn="q";var On={globalSearchBar:"I2r28"};var Lr="autocomplete-suggestions-group",_r="Will search across...",Mn="autocomplete-locked-suggestions-group",Pn="Upgrade to a higher tier",Dn="Exact Match",vr="example-queries-group",Ir="Example Queries",Hc="host-crushftp-vuln",Bc="hosts-exposed-polyfill",Fc="web-properties-google",Vc="certs-lets-encrypt",kn=[{id:Hc,value:Nt({kind:0,field:"host.services.cert.parsed.subject_dn",value:"OU=DEV, O=CrushFTP\\, LLC, L=Lake Tahoe, ST=NV, C=US, emailAddress=support@crushftp.com, CN=www.crushftp.com"}),label:"Hosts with CrushFTP zero-day virtual file system escape vulnerability CVE-2024-4040"},{id:Bc,value:Nt({kind:5,field:"host.services",content:'"cdn.bootcdn.net" or "cdn.bootcss.com" or "cdn.staticfile.net" or "cdn.staticfile.org"'}),label:"Exposed hosts referencing associated, potentially malicious Polyfill domains"},{id:Fc,value:Nt({kind:0,field:"web.hostname",value:"google.com"}),label:"Find Google Web Property"},{id:Vc,value:[Nt({kind:0,field:"cert.parsed.issuer.organization",value:"Let's Encrypt"}),Nt({kind:6,field:"cert.parsed.validity_period.not_before",value:"2024-10-29",operator:">"}),Nt({kind:0,field:"cert.parsed.signature.signature_algorithm.name",value:"SHA256-RSA"})].join(" and "),label:"Find certificates from a specific issuer, within a particular validity period, matching certain cryptographic standards"}];var Fr=c(v(),1);var Ot=c(v(),1);var si={listBox:"KxvzQ"};var Qc='li[role="option"]';function ii(e,t,o,r,n,a){let l=Array.from(e.currentTarget.querySelectorAll(Qc));if(l.length===0){n(void 0),o(null),a.current?.focus();return}let s=t!==null?t:l.findIndex(u=>u.id===r);switch(e.key){case"ArrowDown":s=(s+1)%l.length;break;case"ArrowUp":if(s===0){n(void 0),o(null),a.current?.focus(),e.preventDefault();return}s=(s-1+l.length)%l.length;break;case"Home":s=0;break;case"End":s=l.length-1;break;case"Tab":return;case"Escape":n(void 0),o(null),a.current?.focus(),e.preventDefault();return;default:(e.key==="ArrowRight"||e.key==="Enter"||e.key.length===1)&&s!==-1&&(l[s]?.click(),a.current?.focus(),o(null),n(void 0),e.key.length===1?a.current?.dispatchEvent(new InputEvent("input",{bubbles:!0,inputType:"insertText",data:e.key})):e.preventDefault());return}o(s),n(l[s]?.id);let m=l[s];m&&typeof window<"u"&&m.scrollIntoView({block:"center",behavior:"smooth"}),e.preventDefault()}var li=c(f(),1);function Yc({id:e,inputId:t,selectedOptionId:o,onSelectOption:r,inputRef:n,isLoading:a,children:l,className:s},m){let[u,S]=(0,Ot.useState)(null),T=(0,Ot.useCallback)(h=>{document.activeElement===h.currentTarget&&ii(h,u,S,o,r,n)},[u,o,r,n]),_=(0,Ot.useCallback)(()=>{S(null),r(void 0)},[r]);return(0,li.jsx)("div",{className:P(si.listBox,s),role:"listbox",ref:m,id:e,"aria-labelledby":t,"aria-activedescendant":o,tabIndex:0,onBlur:_,onKeyDown:T,"aria-busy":a,children:l})}var Nr=(0,Ot.forwardRef)(Yc);var No=c(v(),1);function Rr({suggestions:e,defaultSuggestions:t,inputValue:o,setInputValue:r,inputRef:n,handleCloseListBox:a}){let[l,s]=(0,No.useState)(void 0),u=o.length>0||!t?e:t,S=(0,No.useCallback)(h=>{s(h===-1?u[u.length-1]?.id:u[h]?.id)},[u]),T;if(l){let h=u.find(E=>E.id===l);h&&(T=h.replacement?ci(o,h.replacement):h.value)}let _=(0,No.useCallback)(h=>{if(!h){r(""),s(void 0),n.current?.focus();return}let E=u.find(R=>R.id===h);E&&(r(E.replacement?ci(o,E.replacement):E.value||o),s(void 0),n.current?.focus(),requestAnimationFrame(()=>{E.onSelect?.(),a&&E.shouldCloseListBoxOnSelect&&a()}))},[u,o,r,a]);return{activeDescendantId:l,tempInputValue:T,setActiveDescendantId:s,setInputValueById:_,selectOptionByIndex:S}}function ci(e,t){let{from:o,to:r,value:n}=t;return e.slice(0,o)+n+e.slice(r)}var pi={list:"QPZT7"};var mi=c(f(),1);function oe({className:e,describedBy:t,children:o,...r}){return(0,mi.jsx)("ul",{className:P(pi.list,e),role:"group","aria-labelledby":"groupLabelId"in r?r.groupLabelId:void 0,"aria-label":"groupLabel"in r?r.groupLabel:void 0,"aria-describedby":t,children:o})}var ui={listGroupLabel:"_8um59"};var Ro=c(f(),1);function Ae({id:e,groupName:t,slots:o}){let{t:r}=D();return(0,Ro.jsxs)("li",{className:ui.listGroupLabel,role:"presentation",id:e,children:[(0,Ro.jsxs)("div",{children:[(0,Ro.jsx)(g,{variant:A.H5,as:"span",children:r(t)}),o?.bottom]}),o?.right]})}var xr=c(v(),1);var di={listItem:"V50b2"};var br=c(f(),1);function ae({id:e,onSelectOption:t,isSelected:o,ariaDisabled:r,ariaBusy:n,slots:a,children:l}){let s=(0,xr.useRef)(null);(0,xr.useEffect)(()=>{o&&s.current&&s.current.scrollIntoView?.({block:"nearest"})},[o]);let m=()=>{r||n||t(e)};return(0,br.jsxs)("li",{className:di.listItem,id:e,ref:s,role:"option","aria-disabled":r,"aria-busy":n,"aria-selected":o,onClick:m,children:[a?.left,(0,br.jsx)(g,{children:l}),a?.right]})}var xo={icon:"mSe0P",backgroundPulse:"M6kTk",colorPulse:"J6pWS",loading:"_5pIaX",error:"xJBlL",loadingText:"yrZTs",shimmer:"DURLG",errorText:"XZHxU"};var bo=c(f(),1);function ro({id:e,onSelectOption:t,isSelected:o,itemState:r,loadingMessage:n,errorMessage:a,icon:l,children:s}){let m=s;return r==="loading"?m=(0,bo.jsx)(g,{className:xo.loadingText,children:n}):r==="error"&&(m=(0,bo.jsx)(g,{className:xo.errorText,children:a})),(0,bo.jsx)(ae,{id:e,onSelectOption:t,isSelected:o,ariaDisabled:r!=="idle",ariaBusy:r==="loading",slots:{left:l&&(0,bo.jsx)(I,{"aria-hidden":!0,icon:l.name,className:P(xo.icon,xo[r],l.className)})},children:m})}var Ti=c(v(),1);var Gn=c(f(),1);function Oo({id:e,onSelectOption:t,isSelected:o,optionValue:r,inputValue:n}){return(0,Gn.jsx)(ae,{id:e,onSelectOption:t,isSelected:o,children:(0,Gn.jsx)(Vs,{value:r,searchTerm:n,highlightVariant:"bold"})})}var Mo=(S=>(S.COLON=":",S.EQUALS="=",S.REGEX="=~",S.LESS_THAN="<",S.LESS_THAN_OR_EQUAL="<=",S.GREATER_THAN=">",S.GREATER_THAN_OR_EQUAL=">=",S.AND="and",S.OR="or",S.NOT="not",S))(Mo||{}),Po=(r=>(r.CERT="cert",r.HOST="host",r.WEB="web",r))(Po||{});var Te=c(f(),1),fi={[":"]:{label:"Contains",slotLeft:":"},["="]:{label:"Exact Match",slotLeft:"="},["=~"]:{label:"Regex",slotLeft:"=~"},["<"]:{label:"Less Than",slotLeft:"<"},["<="]:{label:"Less Than or Equal To",slotLeft:"<="},[">"]:{label:"Greater Than",slotLeft:">"},[">="]:{label:"Greater Than or Equal To",slotLeft:">="},["and"]:{label:"AND",slotRight:(0,Te.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 12",children:[(0,Te.jsx)("path",{fill:Be.TEXT_SECONDARY,fillRule:"evenodd",d:"M9.342 9.935A5.484 5.484 0 0 0 11 6a5.484 5.484 0 0 0-1.658-3.935 4.1 4.1 0 1 1 0 7.87ZM8 10.9a5.5 5.5 0 1 1 0-9.8 5.5 5.5 0 1 1 0 9.8Zm-1.342-.965A4.104 4.104 0 0 1 1.399 6a4.1 4.1 0 0 1 5.259-3.935A5.484 5.484 0 0 0 5 6c0 1.542.635 2.937 1.658 3.935ZM8 9.251A4.094 4.094 0 0 1 6.4 6c0-1.324.626-2.501 1.6-3.251.974.75 1.6 1.927 1.6 3.251A4.094 4.094 0 0 1 8 9.251Z",clipRule:"evenodd"}),(0,Te.jsx)("path",{fill:Be.TEXT_SECONDARY,d:"M8 1.5C5.736 3 3.5 7 8 10.5c2.264-1.5 4.5-6 0-9Z"})]})},["or"]:{label:"OR",slotRight:(0,Te.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 12",children:[(0,Te.jsx)("path",{fill:Be.TEXT_SECONDARY,stroke:Be.TEXT_SECONDARY,d:"M15.5 6c0 2.787-2.137 5-4.717 5-2.581 0-4.718-2.213-4.718-5s2.137-5 4.718-5c2.58 0 4.717 2.213 4.717 5Z"}),(0,Te.jsx)("path",{fill:Be.TEXT_SECONDARY,stroke:Be.TEXT_SECONDARY,d:"M9.935 6c0 2.787-2.137 5-4.718 5C2.637 11 .5 8.787.5 6s2.137-5 4.717-5c2.581 0 4.718 2.213 4.718 5Z"})]})},["not"]:{label:"NOT",slotRight:(0,Te.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 12",children:[(0,Te.jsx)("mask",{id:"a",fill:Be.SURFACE_BG_CARD_1,children:(0,Te.jsx)("path",{fillRule:"evenodd",d:"M8 10.653C9.463 9.68 10.435 7.96 10.435 6c0-1.96-.972-3.679-2.435-4.653A5 5 0 0 1 10.783.5C13.664.5 16 2.962 16 6s-2.336 5.5-5.217 5.5A5 5 0 0 1 8 10.653Zm0 0a5 5 0 0 1-2.783.847C2.336 11.5 0 9.038 0 6S2.336.5 5.217.5A5 5 0 0 1 8 1.347C6.537 2.32 5.565 4.04 5.565 6c0 1.96.972 3.679 2.435 4.653Z",clipRule:"evenodd"})}),(0,Te.jsx)("path",{fill:Be.TEXT_SECONDARY,fillRule:"evenodd",d:"M8 10.653C9.463 9.68 10.435 7.96 10.435 6c0-1.96-.972-3.679-2.435-4.653A5 5 0 0 1 10.783.5C13.664.5 16 2.962 16 6s-2.336 5.5-5.217 5.5A5 5 0 0 1 8 10.653Zm0 0a5 5 0 0 1-2.783.847C2.336 11.5 0 9.038 0 6S2.336.5 5.217.5A5 5 0 0 1 8 1.347C6.537 2.32 5.565 4.04 5.565 6c0 1.96.972 3.679 2.435 4.653Z",clipRule:"evenodd"}),(0,Te.jsx)("path",{fill:Be.TEXT_SECONDARY,d:"M9.435 6c0 1.626-.806 3.033-1.99 3.821l1.11 1.665c1.742-1.16 2.88-3.194 2.88-5.486h-2Zm-1.99-3.821C8.63 2.967 9.436 4.374 9.436 6h2c0-2.292-1.138-4.325-2.88-5.486L7.444 2.18Zm1.11 0a4 4 0 0 1 2.228-.679v-2A6 6 0 0 0 7.446.514L8.554 2.18Zm2.228-.679C13.063 1.5 15 3.464 15 6h2c0-3.54-2.735-6.5-6.217-6.5v2ZM15 6c0 2.536-1.937 4.5-4.217 4.5v2C14.265 12.5 17 9.54 17 6h-2Zm-4.217 4.5c-.817 0-1.58-.247-2.229-.679l-1.108 1.665a6 6 0 0 0 3.337 1.014v-2Zm-3.337-.679a3.999 3.999 0 0 1-2.229.679v2a6 6 0 0 0 3.337-1.014L7.446 9.82Zm-2.229.679C2.937 10.5 1 8.536 1 6h-2c0 3.54 2.735 6.5 6.217 6.5v-2ZM1 6c0-2.536 1.937-4.5 4.217-4.5v-2C1.735-.5-1 2.46-1 6h2Zm4.217-4.5a4 4 0 0 1 2.229.679L8.554.514A6 6 0 0 0 5.217-.5v2ZM6.565 6c0-1.626.806-3.033 1.99-3.821L7.444.514C5.704 1.674 4.566 3.708 4.566 6h2Zm1.99 3.821C7.37 9.033 6.564 7.626 6.564 6h-2c0 2.292 1.138 4.325 2.88 5.486l1.11-1.665Z",mask:"url(#a)"})]})}};var gi={operatorDisplaySlot:"o7OdN"};var Hn=c(f(),1);function wn({id:e,operator:t,onSelectOption:o,isSelected:r}){let{t:n}=D(),a=Kc(t);return a?(0,Hn.jsx)(ae,{id:e,onSelectOption:o,isSelected:r,slots:{left:a.slotLeft&&Si(a.slotLeft),right:a.slotRight&&Si(a.slotRight)},children:n(a.label)}):null}var Si=e=>(0,Hn.jsx)(g,{"aria-hidden":!0,className:gi.operatorDisplaySlot,children:e}),Kc=e=>e?fi[e]:void 0;var Ei=c(v(),1);var Bn={queryAssetDetails:"L2lQL",assetName:"_2PG8e"};var no=c(f(),1);function Fn({assets:e}){return e.length?(0,no.jsx)("div",{className:Bn.queryAssetDetails,children:e.map((t,o)=>(0,no.jsxs)(Ei.Fragment,{children:[(0,no.jsxs)("span",{className:Bn.assetName,children:[" ",t," "]}),o<e.length-1&&(0,no.jsx)(de,{variant:"dot",spacing:12})]},t))}):null}var Or={["host"]:"Hosts",["web"]:"Web Properties",["cert"]:"Certificates"};function hi(e){let t=new Set,o=Object.values(Or),r=Object.values(Po);for(let n of e){for(let a of r)if(new RegExp(`(?<!\\.)\\b${a}\\b`,"i").test(n)&&(t.add(Or[a]),t.size===r.length))break;if(t.size===r.length)break}return Array.from(t).sort((n,a)=>o.indexOf(n)-o.indexOf(a))}var be=c(f(),1);function Vn({inputValue:e,onSelectOption:t,selectedOptionId:o,suggestions:r,isHeaderHidden:n=!1}){let{operatorSuggestions:a,fieldSuggestions:l,uniqueAssets:s}=(0,Ti.useMemo)(()=>{let m=[],u=[];r.forEach(T=>{Object.values(Mo).includes(T.value)?m.push(T):u.push(T)});let S=hi([...r.map(T=>T.value),e]);return{operatorSuggestions:m,fieldSuggestions:u,uniqueAssets:S}},[r]);return(0,be.jsxs)(oe,{groupLabel:_r,groupLabelId:s.length?Lr:void 0,children:[s.length&&!n?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ae,{id:Lr,groupName:_r,slots:{bottom:(0,be.jsx)(Fn,{assets:s})}}),(0,be.jsx)(de,{variant:"line--horizontal",size:"100%"})]}):null,a.map(m=>(0,be.jsx)(wn,{id:m.id,operator:m.value,onSelectOption:t,isSelected:o===m.id},m.id)),l.map(m=>(0,be.jsx)(Oo,{id:m.id,optionValue:m.value,inputValue:e,onSelectOption:t,isSelected:o===m.id},m.id))]})}var ao={list:"_3JO-5",header:"yOSNd",divider:"exUYA",headerTitle:"adnfh",link:"XsUWP"};var je=c(f(),1);function Mr({inputValue:e,onSelectOption:t,selectedOptionId:o,suggestions:r}){let n=te("ACCOUNTS_SITE_URL");return(0,je.jsxs)(oe,{className:ao.list,groupLabelId:Mn,children:[(0,je.jsxs)("li",{className:ao.header,id:Mn,role:"presentation",children:[(0,je.jsx)(de,{className:ao.divider,variant:"line--horizontal",size:"100%"}),(0,je.jsxs)(g,{className:ao.headerTitle,variant:A.SMALL,children:[(0,je.jsx)(W,{href:`${n}/settings/plan`,className:ao.link,children:(0,je.jsx)(I,{icon:"lock-star-line",size:"sm"})}),Pn]})]}),r.map(a=>(0,je.jsx)(Oo,{id:a.id,optionValue:a.value,inputValue:e,onSelectOption:t,isSelected:o===a.id},a.id))]})}var Qn={icon:"F5w2p",scope:"Miq0Q"};var Do=c(f(),1);function Yn({inputValue:e,suggestions:t,selectedOptionId:o,onSelectOption:r}){let{t:n}=D();return!e||t.length===0?null:(0,Do.jsx)(oe,{groupLabel:"Query context suggestions",children:t.map(a=>(0,Do.jsx)(ae,{id:a.id,onSelectOption:r,isSelected:a.id===o,slots:{left:(0,Do.jsx)(I,{className:Qn.icon,name:"search",mode:"line"}),right:(0,Do.jsx)(g,{className:Qn.scope,variant:A.H6,as:"span",children:a.label?n(a.label):a.value})},children:e},a.id))})}var yi={icon:"qExpG"};var Kn=c(f(),1);function Wn({id:e,onSelectOption:t,isSelected:o,children:r}){return(0,Kn.jsx)(ae,{id:e,onSelectOption:t,isSelected:o,slots:{left:(0,Kn.jsx)(I,{"aria-hidden":!0,name:"lightbulb",mode:"line",className:yi.icon})},children:r})}var Pr={docLink:"MElVo",linkContent:"OUQ11",linkText:"_4cwbZ"};var Mt=c(f(),1);function Pt({to:e,onClick:t,isExternal:o,children:r}){return(0,Mt.jsx)(W,{className:Pr.docLink,href:e,size:"sm",onClick:t,isExternal:o,children:(0,Mt.jsxs)("span",{className:Pr.linkContent,children:[(0,Mt.jsx)(I,{name:"booklet",mode:"line"}),(0,Mt.jsx)("span",{className:Pr.linkText,children:r}),(0,Mt.jsx)(I,{name:o?"external-link":"arrow-right",mode:"line"})]})})}var so=c(f(),1);function zn({onSelectOption:e,selectedOptionId:t,exampleQueries:o,handleCloseListBox:r}){let{t:n}=D();return(0,so.jsxs)(oe,{groupLabel:Ir,groupLabelId:vr,children:[(0,so.jsx)(Ae,{id:vr,groupName:n(Ir),slots:{right:(0,so.jsx)(Pt,{to:"/home/examples",onClick:r,children:n("See More Examples")})}}),o.map(a=>(0,so.jsx)(Wn,{id:a.id,onSelectOption:e,isSelected:a.id===t,children:a.label?n(a.label):a.value},a.id))]})}var Ai={icon:"yMIoU"};var qn=c(f(),1);function $n({id:e,onSelectOption:t,isSelected:o,children:r}){return(0,qn.jsx)(ae,{id:e,onSelectOption:t,isSelected:o,slots:{left:(0,qn.jsx)(I,{"aria-hidden":!0,name:"search",mode:"line",className:Ai.icon})},children:r})}var Xn="Recent Searches",Zn="recent-searches-group";var ko=c(f(),1);function Jn({recentSearches:e,selectedOptionId:t,onSelectOption:o}){return e.length?(0,ko.jsxs)(oe,{groupLabel:Xn,groupLabelId:Zn,children:[(0,ko.jsx)(Ae,{id:Zn,groupName:Xn}),e.map(r=>(0,ko.jsx)($n,{id:r.id,onSelectOption:o,isSelected:r.id===t,children:r.value},r.id))]}):null}var io={listBox:"M5TMl",suggestionListsContainer:"mTBJB",loadingSpinner:"a1GwD"};var et=c(f(),1);function jn({exampleQueries:e,recentSearches:t,isLoadingRecentSearches:o,...r}){return!e?.length&&!t?.length&&!o?null:(0,et.jsxs)(et.Fragment,{children:[o?(0,et.jsx)("div",{className:io.loadingSpinner,"aria-hidden":!0,"data-testid":"loading-spinner",children:(0,et.jsx)(cr,{size:lr.LARGE})}):(0,et.jsx)(Jn,{recentSearches:t||[],...r}),!!e?.length&&(0,et.jsx)(zn,{exampleQueries:e,...r})]})}var Dr={exactMatchSuggestion:"_5lQbi",icon:"P-ILu",value:"drzAM"};var ut=c(f(),1);function ea({id:e,onSelectOption:t,isSelected:o,optionValue:r}){return(0,ut.jsx)("div",{className:Dr.exactMatchSuggestion,"data-testid":"exact-match-suggestion",children:(0,ut.jsx)(oe,{groupLabel:Dn,children:(0,ut.jsx)(ae,{id:e,onSelectOption:t,isSelected:o,slots:{left:(0,ut.jsx)(I,{className:Dr.icon,"aria-hidden":!0,mode:"line",name:"search",size:"lg"})},children:(0,ut.jsxs)(g,{children:[(0,ut.jsx)("span",{className:Dr.value,children:r})," - Search for everything with value"]})})})})}var Ci="Generated Query",ta="query-assistant-group",Li="query-assistant-generated-query-option",_i="Generating query...",vi="The Censys Query Assistant failed to generate a valid query from the input";var Oe=c(v(),1);var Ii="/api/assistant/feedback";var tt=c(v(),1);var kr={feedbackModal:"Z3wU6",inputField:"vMYUJ",characterCount:"iNMWH"};var Ve=c(f(),1),Ni="feedback-comment-input",Ri="feedback-character-count";function oa({onClose:e,onSubmit:t}){let[o,r]=(0,tt.useState)(""),n=o.length<=250,a=(0,tt.useCallback)(()=>{n&&t(o)},[o,t,n]),l=(0,tt.useCallback)(u=>{let S=u.target.value;S.length<=250&&r(S)},[]),s=(0,tt.useCallback)(u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),a())},[a]),m=(0,tt.useCallback)(u=>{u||e()},[e]);return(0,tt.useEffect)(()=>{let u=S=>{S.stopPropagation(),S.stopImmediatePropagation()};return document.addEventListener("mousedown",u,!0),()=>{document.removeEventListener("mousedown",u,!0)}},[]),(0,Ve.jsx)(dr,{open:!0,onOpenChange:m,header:(0,Ve.jsx)(g,{variant:A.H2,children:"Help us improve"}),footerActions:[(0,Ve.jsx)(re,{variant:x.SECONDARY,onClick:e,"aria-label":"Cancel feedback submission",children:"Cancel"},"cancel-button"),(0,Ve.jsx)(re,{onClick:a,disabled:!n,"aria-label":"Submit feedback comment",children:"Submit Feedback"},"submit-button")],children:(0,Ve.jsxs)("div",{className:kr.feedbackModal,children:[(0,Ve.jsx)(Co,{label:"Additional feedback (optional)",labelFor:Ni,className:kr.inputField,errorText:n?void 0:`Comment must be ${250} characters or less`,children:(0,Ve.jsx)(Zt,{id:Ni,value:o,isFullWidth:!0,onChange:l,onKeyDown:s,placeholder:"Tell us what went wrong or how we can improve...",rows:4,"aria-describedby":Ri})}),(0,Ve.jsxs)(g,{id:Ri,className:kr.characterCount,variant:A.SMALL,"aria-live":"polite",children:[o.length,"/",250," characters"]})]})})}var Gr={feedbackContainer:"VC8Dd",successText:"ovVhr",text:"nuu8r"};var fe=c(f(),1),Wc="query-assistant-feedback-controls";function ra({queryAssistantSuggestion:e,queryAssistantState:t,generatedQueryId:o}){let[r,n]=(0,Oe.useState)(!1),[a,l]=(0,Oe.useState)(!1),s=Sr(),m=X(),u=ue("query-assistant-feedback"),S=Gs(),T=(0,Oe.useCallback)((L,i)=>{if(!o)return;let p=new FormData;p.set("csrf",s),p.set("auditLogEntryId",o.toString()),p.set("thumbsUp",L==="positive"?"true":"false"),i&&p.set("feedback",i),m.submit(p,{method:"post",action:Ii}),n(!0),l(!1)},[o,s]);(0,Oe.useEffect)(()=>{o&&n(!1)},[o]);let _=(0,Oe.useCallback)(()=>{T("positive")},[T]),h=(0,Oe.useCallback)(()=>{l(!0)},[]),E=(0,Oe.useCallback)(()=>{l(!1)},[]),R=(0,Oe.useCallback)(L=>{T("negative",L)},[T]);return!u||!S||!e||!o||t!=="idle"?null:r?(0,fe.jsxs)(g,{variant:A.SMALL,className:Gr.successText,"aria-live":"polite",children:[(0,fe.jsx)(I,{icon:"checkbox-circle-line",size:"sm"}),"Thank you for your feedback!"]}):(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsxs)("div",{className:Gr.feedbackContainer,"data-testid":Wc,children:[(0,fe.jsx)(g,{variant:A.SMALL,className:Gr.text,children:"Was this helpful?"}),(0,fe.jsx)(de,{variant:"line--vertical",spacing:8}),(0,fe.jsx)(re,{iconLeft:"thumb-up",iconLeftMode:"line",type:"button",variant:x.TERTIARY,size:It.SMALL,onClick:_,"aria-label":"Mark this query suggestion as helpful",children:"Yes"}),(0,fe.jsx)(de,{variant:"line--vertical",spacing:8}),(0,fe.jsx)(re,{iconLeft:"thumb-down",iconLeftMode:"line",type:"button",variant:x.TERTIARY,size:It.SMALL,onClick:h,"aria-label":"Mark this query suggestion as not helpful and provide feedback",children:"No"})]}),a&&(0,fe.jsx)(oa,{onClose:E,onSubmit:R})]})}var xi=c(f(),1);function na({id:e,onSelectOption:t,isSelected:o,itemState:r,children:n}){let a=r==="loading"?"loading":r==="error"?"error":"idle";return(0,xi.jsx)(ro,{id:e,onSelectOption:t,isSelected:o,itemState:a,loadingMessage:_i,errorMessage:vi,icon:{name:"sparkling-2-line"},children:n})}var lo=c(f(),1);function wr({queryAssistantSuggestion:e,queryAssistantState:t,generatedQueryId:o,selectedOptionId:r,onSelectOption:n}){return!e&&t==="idle"?null:(0,lo.jsxs)(oe,{groupLabelId:ta,children:[(0,lo.jsx)(Ae,{id:ta,groupName:Ci,slots:{right:(0,lo.jsx)(ra,{queryAssistantSuggestion:e,queryAssistantState:t,generatedQueryId:o})}}),(0,lo.jsx)(na,{id:e?.id||"",itemState:t,isSelected:!!e&&r===e?.id,onSelectOption:n,children:e?.value})]})}var co=c(v(),1);var bi="assistant-fetcher";function Oi({prompt:e,isSyntaxInvalid:t,isLegacyQuery:o=!1}){let r=e.trim();return!r||o?!1:r.includes(" ")?t:!/[:=]|(=~)|(<=)|(>=)|[<>]/.test(r)}function aa(e,t,o,r){let[n,a]=(0,co.useState)("idle"),[l,s]=(0,co.useState)(void 0),u=eo()?.organizationId,S=to(),T=ue("auto-legacy-query-conversion"),_=`${bi}-${t}`,h=X({key:_}),E=e.trim();return(0,co.useEffect)(()=>{if(!S)return;let L=Oi({prompt:E,isSyntaxInvalid:o,isLegacyQuery:T&&r});if(s(void 0),!L){a("idle");return}a("loading");let i=setTimeout(()=>{h.load(`/api/assistant/generateQuery?prompt=${encodeURIComponent(E)}${u?`&org=${u}`:""}`)},2e3);return()=>{clearTimeout(i)}},[o,r,E,u,S,T]),(0,co.useEffect)(()=>{h.state==="idle"&&h.data&&typeof h.data=="object"&&("code"in h.data||"error"in h.data)?(s(void 0),a("error")):h.data&&h.state==="idle"&&(s(h.data&&"query"in h.data&&h.data.query?{id:`${Li}-${h.data.id}`,query:`${h.data.query} `,generatedQueryId:h.data.id}:void 0),a("idle"))},[h.state,h.data]),!S||!E||E===l?.query.trim()?{queryAssistantSuggestion:void 0,queryAssistantState:void 0,generatedQueryId:void 0}:{queryAssistantSuggestion:l?{id:l.id,value:l.query,onSelect:()=>{s(void 0)},shouldCloseListBoxOnSelect:!0}:void 0,queryAssistantState:n,generatedQueryId:l?.generatedQueryId}}var Mi="Query Conversions",sa="legacy-query-converter-group",ia="query-converter-option",Pi="Converting query...",Di="Original query failed to convert";var ki={icon:"aauAa"};var Ui=c(f(),1);function la({itemState:e,children:t,...o}){let r=e==="loading"?"loading":e==="error"?"error":"idle";return(0,Ui.jsx)(ro,{...o,itemState:r,loadingMessage:Pi,errorMessage:Di,icon:{name:"swap-2-line",className:ki.icon},children:t})}var Gi={description:"c-97V"};var Me=c(f(),1),qc=[{id:"converted-query-special-state-option",value:null}],wi="query-converter-suggestions-description";function Br({queryConverterState:e,convertedQueries:t=[],selectedOptionId:o,onSelectOption:r}){return t?.length===0&&e==="idle"?null:(0,Me.jsxs)(oe,{groupLabelId:sa,describedBy:wi,children:[(0,Me.jsx)(Ae,{id:sa,groupName:Mi,slots:{right:(0,Me.jsx)(Pt,{to:Io,isExternal:!0,children:"Learn About Platform Syntax"})}}),(e!=="idle"?qc:t).map(({id:n,value:a})=>(0,Me.jsx)(la,{id:n,isSelected:o===n,onSelectOption:r,itemState:e,children:a},n)),(0,Me.jsxs)("li",{role:"presentation",id:wi,className:Gi.description,children:[(0,Me.jsx)(I,{icon:"alert-fill",size:"xl"}),(0,Me.jsxs)(g,{children:[_o,(0,Me.jsx)(g,{variant:A.DEFAULT_SEMIBOLD,children:(0,Me.jsx)(gr,{timestamp:vo,format:"MMMM DD, YYYY"})}),"."]})]})]})}var po=c(v(),1);var NS="/api/convertQuery",Hi="query-to-convert",Bi="convert-query-fetcher";function Fi(e,t){let o=[];return e.converted_query&&o.push({id:ia,value:e.converted_query,onSelect:t,shouldCloseListBoxOnSelect:!0}),e.alternative_queries&&e.alternative_queries.forEach((r,n)=>{o.push({id:`${ia}-alt-${n}`,value:r.query,onSelect:t,shouldCloseListBoxOnSelect:!0})}),o}function ca(e,t,o){let[r,n]=(0,po.useState)("idle"),[a,l]=(0,po.useState)(void 0),s=`${Bi}-${t}`,m=X({key:s}),u=ue("auto-legacy-query-conversion"),S=e.trim(),T=o&&!!S;return(0,po.useEffect)(()=>{if(!u)return;if(!T){n("idle"),l(void 0);return}n("loading"),l(void 0);let _=new URLSearchParams({[Hi]:S}).toString();m.load(`/api/convertQuery?${_}`)},[u,T,S]),(0,po.useEffect)(()=>{if(typeof m.data=="object"&&"errorMessage"in m.data){l(void 0),n("error");return}m.state!=="idle"||!m.data||"convertedQuery"in m.data&&m.data.convertedQuery&&T&&(l(Fi(m.data.convertedQuery,()=>{l(void 0)})),n("idle"))},[m.state,m.data,T]),{queryConverterSuggestions:a,queryConverterState:r}}var se=c(f(),1);function $c({inputId:e,listBoxId:t,inputRef:o,onSelectOption:r,selectedOptionId:n,autocomplete:a,exactMatch:l,defaults:s={},contexts:m,recentSearches:u,queryAssistantSuggestion:S,queryAssistantState:T,generatedQueryId:_,queryConverterSuggestions:h,queryConverterState:E,inputValue:R,setActiveDescendantId:L,isLoading:i,isLoadingRecentSearches:p,handleCloseListBox:d},C){let{queries:y}=s,b=!!m?.length,K=ue("auto-legacy-query-conversion")&&(h?.length||E!=="idle"),[B,Q]=(0,Fr.useMemo)(()=>{let z=[],q=[];for(let Ge of a)Ge.isLocked?q.push(Ge):z.push(Ge);return[z,q]},[a]),N;return R?B.length||Q.length?N=(0,se.jsxs)(se.Fragment,{children:[B.length>0&&(0,se.jsx)(Vn,{suggestions:B,inputValue:R,selectedOptionId:n,onSelectOption:r,isHeaderHidden:b}),Q.length>0&&(0,se.jsx)(Mr,{suggestions:Q,inputValue:R,selectedOptionId:n,onSelectOption:r})]}):i&&(N=(0,se.jsx)("div",{className:io.loadingSpinner,"aria-hidden":!0,"data-testid":"loading-spinner",children:(0,se.jsx)(cr,{size:lr.LARGE})})):N=(0,se.jsx)(jn,{exampleQueries:y,recentSearches:u,selectedOptionId:n,onSelectOption:r,handleCloseListBox:d,isLoadingRecentSearches:p}),N||l||b||T?(0,se.jsxs)(Nr,{ref:C,className:io.listBox,id:t,inputId:e,inputRef:o,selectedOptionId:n,onSelectOption:L,isLoading:i||p||T==="loading"||E==="loading",children:[b&&!!R&&(0,se.jsx)(Yn,{suggestions:m,inputValue:R,selectedOptionId:n,onSelectOption:r}),!!T&&(0,se.jsx)(wr,{queryAssistantState:T,selectedOptionId:n,onSelectOption:r,queryAssistantSuggestion:S,generatedQueryId:_}),!!E&&(0,se.jsx)(Br,{queryConverterState:E,convertedQueries:h,selectedOptionId:n,onSelectOption:r}),N&&(0,se.jsx)("div",{className:io.suggestionListsContainer,children:N}),l&&!!R&&!K&&(0,se.jsx)(ea,{id:l.id,optionValue:l.value,onSelectOption:r,isSelected:n===l.id})]}):null}var pa=(0,Fr.forwardRef)($c);function Vi(e){return e?`/collections/${e}/results`:"/censys"}function Qi(e){let t={};return e||(t.queries=kn),t}function Yi(e,t){if(!(!e||!t))return[{id:"collection-search",label:"Search within Collection",value:"",onSelect:t},{id:"global-search",label:"Search within Global Dataset",value:"",onSelect:()=>t(void 0,"/censys")}]}function Ki(e){let{t}=D();return t(e?ai:ni)}var Go=c(f(),1);function ua({q:e,placeholder:t,collectionId:o}){let r=eo(),n=to(),a=(0,Vr.useRef)(null),l=hs(),s=Vi(o),m=(0,Vr.useCallback)((_,h)=>{_?.preventDefault();let E=new FormData(a.current);r&&E.set(oo,r.organizationId),l(E,{action:h||s,method:"get"})},[r,s,a]),u=Qi(o),S=Yi(o,m),T=Ki(n);return(0,Go.jsx)(Ts,{action:s,method:"get",role:"search",ref:a,onSubmit:m,children:(0,Go.jsx)("div",{className:On.globalSearchBar,children:(0,Go.jsx)(ma,{id:xn,name:bn,inputLabel:"Global Search Bar",placeholder:t||T,onEnterKeyDown:m,size:"large",variant:"rounded",defaultSuggestions:u,contextSuggestions:S,initialValue:e,rightInputSlot:(0,Go.jsx)($,{className:On.searchButton,name:"Search",type:"submit",iconName:"arrow-right",iconMode:"line","aria-label":"Search",shape:Ze.ROUND,variant:x.PRIMARY}),rightContainerSlot:Rn})})})}var zi=c(v(),1);var F={dropdownContent:"auXfc",dropdownGroup:"ckI63",captionHeading:"Nzc5M",dropdownItem:"eSGyu",dropdownItemText:"aebcD",externalLink:"IgQ-K",dropdownSeparator:"sJ355",dropdownLinkItem:"H79PL",feedbackButton:"Di-ye"};var O=c(f(),1);function qi(){let e=(0,zi.useRef)(null),{t}=D(),o=te("COMMUNITY_SITE_URL"),r=te("SUPPORT_SITE_URL"),n=te("STATUS_SITE_URL"),a=l=>{(l.key==="Enter"||l.key===" ")&&e.current?.click()};return(0,O.jsxs)(ar,{children:[(0,O.jsx)(sr,{asChild:!0,children:(0,O.jsx)($,{icon:"question-mark",size:me.LARGE,variant:x.DEFAULT,"aria-label":t("Help")})}),(0,O.jsxs)(ir,{align:"end",className:F.dropdownContent,children:[(0,O.jsxs)(Xe,{className:F.dropdownGroup,children:[(0,O.jsx)(Xt,{children:(0,O.jsx)(g,{className:F.captionHeading,variant:A.H4,as:"span",children:t("Help and Support")})}),(0,O.jsx)(Re,{className:F.dropdownItem,asChild:!0,children:(0,O.jsx)(W,{href:`${r}/docs`,className:F.externalLink,isExternal:!0,shouldOmitOrg:!0,children:(0,O.jsxs)(g,{className:F.dropdownItemText,children:[(0,O.jsx)(I,{name:"booklet",mode:"line",size:"lg"}),t("Product Documentation")]})})}),(0,O.jsx)(Re,{className:F.dropdownItem,asChild:!0,children:(0,O.jsx)(W,{href:o,className:F.externalLink,isExternal:!0,shouldOmitOrg:!0,children:(0,O.jsxs)(g,{className:F.dropdownItemText,children:[(0,O.jsx)(I,{name:"community",mode:"line",size:"lg"}),t("Community")]})})})]}),(0,O.jsx)(pt,{className:F.dropdownSeparator}),(0,O.jsxs)(Xe,{className:F.dropdownGroup,children:[(0,O.jsx)(Xt,{children:(0,O.jsx)(g,{className:F.captionHeading,variant:A.H4,as:"span",children:t("Release Notes and Status")})}),(0,O.jsx)(Re,{className:F.dropdownItem,asChild:!0,children:(0,O.jsx)(W,{href:`${r}/changelog`,className:F.externalLink,isExternal:!0,shouldOmitOrg:!0,children:(0,O.jsxs)(g,{className:F.dropdownItemText,children:[(0,O.jsx)(I,{name:"file-history",mode:"line",size:"lg"}),t("Release Notes")]})})}),(0,O.jsx)(Re,{className:F.dropdownItem,asChild:!0,children:(0,O.jsx)(W,{href:n,className:F.externalLink,isExternal:!0,shouldOmitOrg:!0,children:(0,O.jsxs)(g,{className:F.dropdownItemText,children:[(0,O.jsx)(I,{name:"dashboard-3",mode:"line",size:"lg"}),t("Service Status")]})})}),(0,O.jsx)(Re,{className:F.dropdownItem,asChild:!0,children:(0,O.jsx)(W,{href:"/certificates/logs",prefetch:"intent",children:(0,O.jsxs)(g,{className:F.dropdownItemText,children:[(0,O.jsx)(I,{name:"award",mode:"line",size:"lg"}),t("Certificate Transparency Logs")]})})})]}),(0,O.jsx)(pt,{className:F.dropdownSeparator}),(0,O.jsx)(Xe,{className:F.dropdownGroup,children:(0,O.jsx)(Re,{className:F.dropdownLinkItem,onKeyDown:a,children:(0,O.jsx)(He,{link:{to:zs,isExternal:!0,shouldOmitOrg:!0},button:{iconLeft:"feedback",iconLeftMode:"line",variant:x.PRIMARY,size:It.LARGE,className:F.feedbackButton},ref:e,children:t("Provide Feedback")})})})]})]})}var kt="assistant-chat-panel",V={PANEL_TRIGGER:"topnav-assistant-button",NEW_CHAT_BUTTON:"assistant-newchat-button",CLOSE_BUTTON:"assistant-close-button",CHATS_BREADCRUMB:"assistant-chats-button",CURRENT_CHAT_BREADCRUMB:"assistant-currentchat-button",HISTORY_LATEST_CARD:"assistant-historylatest-card",HISTORY_OTHER_CARD:"assistant-historyother-card",MESSAGE_INPUT:"assistant-message-input",SEND_MESSAGE_BUTTON:"assistant-sendmessage-button",FEEDBACK_THUMBS_UP_BUTTON:"assistant-chat-thumbsup-button",FEEDBACK_THUMBS_DOWN_BUTTON:"assistant-chat-thumbsdown-button",FEEDBACK_MODAL_CLOSE_BUTTON:"assistant-feedbackmodal-close-button",FEEDBACK_MODAL_REASON_TOGGLE_BUTTON:"assistant-feedbackmodal-toggle-button",FEEDBACK_MODAL_INPUT:"assistant-feedbackmodal-input",FEEDBACK_MODAL_SUBMIT_BUTTON:"assistant-feedbackmodal-submit-button",FEEDBACK_MODAL_CANCEL_BUTTON:"assistant-feedbackmodal-cancel-button"};function $i(e){return{["aria-expanded"]:e,["aria-controls"]:e?kt:void 0,["aria-label"]:`${e?"Close":"Open"} assistant chat panel`}}var Xi=c(f(),1);function Qr(){let{isFeatureEnabled:e,isOpen:t,onToggle:o}=Pe();return e?(0,Xi.jsx)($,{"data-pendoid":V.PANEL_TRIGGER,icon:"sparkling-2-line",size:me.LARGE,variant:x.DEFAULT,onClick:o,...$i(t)}):null}var mn=c(v(),1);var da={["empty-state-new-chat"]:{icon:"sparkling-fill",heading:"What can I help you with?",description:"Our assistant can answer any question about Censys Internet data."},["error-fetching-messages"]:{icon:"emotion-unhappy-fill",heading:"Couldn't load the chat.",description:`We seem to have hit a snag loading the chat.
Please reload the chat panel to try again.`},["error-fetching-conversations"]:{icon:"emotion-unhappy-fill",heading:"Couldn't load chats.",description:`We seem to have hit a snag loading your chats.
Please reload the chat panel to try again.`},["empty-conversations-history"]:{icon:"sparkling-fill",heading:"Chat history empty.",description:"When you create a new chat it will appear in this list."}};var mo={specialState:"CVbNp",icon:"a1sFV",text:"Icna6",heading:"zVtM7",description:"PRNWz"};var dt=c(f(),1);function Ut({state:e,action:t}){let o=da[e];return(0,dt.jsxs)("div",{className:mo.specialState,"data-testid":e,children:[(0,dt.jsx)(I,{className:mo.icon,icon:o.icon}),(0,dt.jsxs)("div",{className:mo.text,children:[(0,dt.jsx)(g,{className:mo.heading,variant:A.H1_SUB_HEADLINE,as:"span",children:o.heading}),(0,dt.jsx)(g,{className:mo.description,children:o.description})]}),!!t&&(0,dt.jsx)(re,{onClick:t.onClick,variant:x.TERTIARY,iconLeft:t.excludeIcon?void 0:"reset-right",iconLeftMode:"line",children:t.name})]})}var Se=c(v(),1);var Wr=c(v(),1);var Ji={chatMessage:"fg13W"};var Yr=c(v(),1);var ji=(e,t,o)=>{let r=(0,Yr.useRef)(null);(0,Yr.useEffect)(()=>{if(!e||!t.current)return;let n=a=>{switch(a.key){case"Tab":a.preventDefault(),a.stopPropagation();let l=Jc(t.current);if(l.length===0)return;let s=r.current?l.findIndex(S=>S===r.current):0,m;a.shiftKey?m=s<=0?l.length-1:s-1:m=s>=l.length-1?0:s+1;let u=l[m];u&&($s(u),u.focus(),r.current=u);break;case"Escape":a.preventDefault(),a.stopPropagation(),r.current=null,o();break}};return t.current.addEventListener("keydown",n),()=>t.current?.removeEventListener("keydown",n)},[e,o])},Jc=e=>{let t=[e],o=Array.from(e.querySelectorAll("a, button, table"));return o.sort((r,n)=>r.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1),t.push(...o),t};var el=c(f(),1);function wo({id:e,className:t,isSelected:o,onClick:r,navigationLevel:n,exitMessageNavigation:a,children:l,...s}){let m=(0,Wr.useRef)(null),u=o&&n==="message",S=(0,Wr.useCallback)(()=>{o||r(e)},[r,o,e]);return ji(u,m,a),(0,el.jsx)("li",{...s,ref:m,className:P(Ji.chatMessage,t),id:e,"aria-current":o,"aria-selected":u,tabIndex:n==="log"?0:-1,onClick:S,children:l})}var rt=c(v(),1);var zr="/api/censys-assistant/feedback";var De=c(v(),1);var ot={feedbackModal:"_5tmCi",pendoCloseButton:"Hn9em",buttonGroup:"_1mVO9",buttonOption:"SLJYi",labelText:"b6soK",hiddenCheckbox:"_5xkcu",inputField:"_41DqG",characterCount:"_9Eyz3"};var j={POSITIVE:"positive",NEGATIVE:"negative"};var J=c(f(),1),tl="feedback-comment-input",ol="feedback-character-count",ep=[{value:"inaccurate",label:"Inaccurate"},{value:"incomplete",label:"Incomplete"},{value:"repetitive",label:"Repetitive or wordy"},{value:"misformatted",label:"Poorly formatted"}];function fa({isOpen:e,messageId:t,conversationId:o,fetcher:r,onSubmit:n,onClose:a}){let l=(0,De.useRef)(null),[s,m]=(0,De.useState)(""),[u,S]=(0,De.useState)([]),T=s.length<=250,_=(s.trim().length>0||u.length>0)&&T,h=(0,De.useCallback)(()=>{m(""),S([]),a()},[a]),E=(0,De.useCallback)(p=>{if(!_){p.preventDefault();return}n?.(),h()},[_,n,h]),R=(0,De.useCallback)(p=>{let d=p.target.value;d.length<=250&&m(d)},[]),L=(0,De.useCallback)(p=>{S(d=>d.includes(p)?d.filter(C=>C!==p):[...d,p])},[]),i=(0,De.useCallback)(p=>{p||(l.current?.click(),h())},[h]);return(0,J.jsx)(dr,{modal:!0,open:e,onOpenChange:i,headerBorder:Cs.NONE,footerBorder:Ls.NONE,contentProps:{onMouseDown:p=>p.stopPropagation()},header:(0,J.jsx)(g,{variant:A.H2,children:"Help Us Improve"}),footerActions:[(0,J.jsx)(re,{"data-pendoid":V.FEEDBACK_MODAL_CANCEL_BUTTON,variant:x.SECONDARY,onClick:h,"aria-label":"Cancel feedback submission",children:"Cancel"},"cancel-button"),(0,J.jsx)(re,{"data-pendoid":V.FEEDBACK_MODAL_SUBMIT_BUTTON,type:"submit",form:"feedback-modal-form",name:"feedback_type",value:j.NEGATIVE,disabled:!_,"aria-label":"Submit feedback",children:"Submit"},"submit-button")],children:(0,J.jsxs)(r.Form,{id:"feedback-modal-form",method:"post",action:zr,onSubmit:E,children:[(0,J.jsx)(Er,{}),(0,J.jsx)("input",{type:"hidden",name:"message_id",value:t}),(0,J.jsx)("input",{type:"hidden",name:"conversation_id",value:o}),(0,J.jsxs)("div",{className:ot.feedbackModal,"data-testid":"feedback-modal-content",children:[(0,J.jsx)("button",{className:ot.pendoCloseButton,ref:l,"aria-hidden":"true",type:"button","data-pendoid":V.FEEDBACK_MODAL_CLOSE_BUTTON}),(0,J.jsx)(Co,{label:"Please tell us why this response wasn't helpful.",children:(0,J.jsx)("div",{className:ot.buttonGroup,role:"group","aria-label":"Feedback reasons",children:ep.map(p=>{let d=u.includes(p.value);return(0,J.jsxs)("label",{className:ot.buttonOption,"data-checked":d,children:[(0,J.jsx)("input",{type:"checkbox","data-pendoid":V.FEEDBACK_MODAL_REASON_TOGGLE_BUTTON,name:"reasons",value:p.value,checked:d,onChange:()=>L(p.value),className:ot.hiddenCheckbox}),(0,J.jsx)(g,{className:ot.labelText,children:p.label})]},p.value)})})}),(0,J.jsx)(Co,{label:"Additional feedback (optional)",labelFor:tl,className:ot.inputField,hintText:(0,J.jsxs)(g,{id:ol,className:ot.characterCount,variant:A.SMALL,"aria-live":"polite",children:[s.length,"/",250," characters"]}),errorText:T?void 0:`Comment must be ${250} characters or less`,children:(0,J.jsx)(Zt,{id:tl,"data-pendoid":V.FEEDBACK_MODAL_INPUT,name:"comment",value:s,isFullWidth:!0,onChange:R,placeholder:"Provide additional feedback to help us improve...",rows:4,"aria-describedby":ol})})]})]})})}var le=c(f(),1);function ga({messageId:e,conversationId:t,tabIndex:o}){let[r,n]=(0,rt.useState)(!1),[a,l]=(0,rt.useState)(void 0),[s,m]=(0,rt.useState)([]),u=X(),S=u.state==="submitting"||u.state==="loading",T=(0,rt.useCallback)(()=>{m(E=>[...E,{id:Date.now().toString()}])},[]),_=(0,rt.useCallback)(E=>{m(R=>R.filter(L=>L.id!==E))},[]);(0,rt.useEffect)(()=>{u.state==="idle"&&u.data&&(u.data.success||l(void 0))},[u.state,u.data]);function h(E){let L=E.nativeEvent.submitter?.value;if(S||L===j.POSITIVE&&a===j.POSITIVE||L===j.NEGATIVE&&a===j.NEGATIVE){E.preventDefault();return}T(),l(L)}return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)(u.Form,{method:"post",action:zr,onSubmit:h,children:[(0,le.jsx)(Er,{}),(0,le.jsx)("input",{type:"hidden",name:"message_id",value:e}),(0,le.jsx)("input",{type:"hidden",name:"conversation_id",value:t}),(0,le.jsx)(mt,{content:a===j.POSITIVE?"Thumbs up given":"Give thumbs up",tabIndex:-1,delayDuration:500,children:(0,le.jsx)($,{"data-pendoid":V.FEEDBACK_THUMBS_UP_BUTTON,type:"submit",name:"feedback_type",value:j.POSITIVE,tabIndex:o,shape:Ze.SQUARE,icon:a===j.POSITIVE?"thumb-up-fill":"thumb-up-line","aria-label":a===j.POSITIVE?"Thumbs up given":"Give thumbs up","aria-pressed":a===j.POSITIVE,"aria-disabled":S||a===j.POSITIVE,variant:x.GHOST})}),(0,le.jsx)(mt,{content:a===j.NEGATIVE?"Leave additional feedback":"Give thumbs down",tabIndex:-1,delayDuration:500,children:(0,le.jsx)($,{"data-pendoid":V.FEEDBACK_THUMBS_DOWN_BUTTON,type:"submit",name:"feedback_type",value:j.NEGATIVE,onClick:()=>{S||n(!0)},tabIndex:o,shape:Ze.SQUARE,icon:a===j.NEGATIVE?"thumb-down-fill":"thumb-down-line","aria-label":a===j.NEGATIVE?"Leave additional feedback":"Give thumbs down","aria-pressed":a===j.NEGATIVE,"aria-disabled":S||a===j.NEGATIVE,variant:x.GHOST})})]}),(0,le.jsx)(fa,{isOpen:r,messageId:e,conversationId:t,fetcher:u,onSubmit:T,onClose:()=>n(!1)}),s.map(E=>(0,le.jsx)(ur,{title:"Thank you for your feedback.",behavior:mr.DISMISSIVE,variant:pr.SUCCESS,onMouseDown:R=>{R.stopPropagation()},onOpenChange:R=>{R||_(E.id)}},E.id))]})}var rl={messageActions:"OQPk-"};var $r=c(f(),1);function Sa({isMessageActive:e,messageId:t,conversationId:o}){let r=e?0:-1;return(0,$r.jsx)("div",{className:rl.messageActions,role:"toolbar","aria-label":"Message actions",children:(0,$r.jsx)("div",{role:"group","aria-label":"Feedback controls",children:(0,$r.jsx)(ga,{messageId:t,conversationId:o,tabIndex:r})})})}var jr=c(v(),1);function Gt(){return Gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},Gt.apply(this,arguments)}var tp=["children","options"];var nl=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((e,t)=>(e[t.toLowerCase()]=t,e),{class:"className",for:"htmlFor"}),al={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"\xA0",quot:"\u201C"},op=["style","script","pre"],rp=["src","href","data","formAction","srcDoc","action"],np=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,ap=/mailto:/i,sp=/\n{2,}$/,sl=/^(\s*>[\s\S]*?)(?=\n\n|$)/,ip=/^ *> ?/gm,lp=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,cp=/^ {2,}\n/,pp=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,il=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,ll=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,mp=/^(`+)((?:\\`|(?!\1)`|[^`])+)\1/,up=/^(?:\n *)*\n/,dp=/\r\n?/g,fp=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,gp=/^\[\^([^\]]+)]/,Sp=/\f/g,Ep=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,hp=/^\s*?\[(x|\s)\]/,cl=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,pl=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,ml=/^([^\n]+)\n *(=|-){3,} *\n/,Ea=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,Tp=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,ul=/^<!--[\s\S]*?(?:-->)/,yp=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,ha=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,Ap=/^\{.*\}$/,Cp=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,Lp=/^<([^ >]+@[^ >]+)>/,_p=/^<([^ >]+:\/[^ >]+)>/,vp=/-([a-z])?/gi,dl=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,Ip=/^[^\n]+(?:  \n|\n{2,})/,Np=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,Rp=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,xp=/^\[([^\]]*)\] ?\[([^\]]*)\]/,bp=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,Op=/\t/g,Mp=/(^ *\||\| *$)/g,Pp=/^ *:-+: *$/,Dp=/^ *:-+ *$/,kp=/^ *-+: *$/,en="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|\\\\\\1|[\\s\\S])+?)",Up=RegExp(`^([*_])\\1${en}\\1\\1(?!\\1)`),Gp=RegExp(`^([*_])${en}\\1(?!\\1)`),wp=RegExp(`^(==)${en}\\1`),Hp=RegExp(`^(~~)${en}\\1`),Bp=/^(:[a-zA-Z0-9-_]+:)/,Fp=/^\\([^0-9A-Za-z\s])/,Vp=/\\([^0-9A-Za-z\s])/g,Qp=/^[\s\S](?:(?!  \n|[0-9]\.|http)[^=*_~\-\n:<`\\\[!])*/,Yp=/^\n+/,Kp=/^([ \t]*)/,Wp=/(?:^|\n)( *)$/,La="(?:\\d+\\.)",_a="(?:[*+-])";function El(e){return"( *)("+(e===1?La:_a)+") +"}var hl=El(1),Tl=El(2);function yl(e){return RegExp("^"+(e===1?hl:Tl))}var zp=yl(1),qp=yl(2);function Al(e){return RegExp("^"+(e===1?hl:Tl)+"[^\\n]*(?:\\n(?!\\1"+(e===1?La:_a)+" )[^\\n]*)*(\\n|$)","gm")}var $p=Al(1),Xp=Al(2);function Cl(e){let t=e===1?La:_a;return RegExp("^( *)("+t+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+t+" (?!"+t+" ))\\n*|\\s*\\n*$)")}var Ll=Cl(1),_l=Cl(2);function fl(e,t){let o=t===1,r=o?Ll:_l,n=o?$p:Xp,a=o?zp:qp;return{t:l=>a.test(l),o:uo(function(l,s){let m=Wp.exec(s.prevCapture);return m&&(s.list||!s.inline&&!s.simple)?r.exec(l=m[1]+l):null}),i:1,u(l,s,m){let u=o?+l[2]:void 0,S=l[0].replace(sp,`
`).match(n),T=!1;return{items:S.map(function(_,h){let E=a.exec(_)[0].length,R=RegExp("^ {1,"+E+"}","gm"),L=_.replace(R,"").replace(a,""),i=h===S.length-1,p=L.indexOf(`

`)!==-1||i&&T;T=p;let d=m.inline,C=m.list,y;m.list=!0,p?(m.inline=!1,y=Bo(L)+`

`):(m.inline=!0,y=Bo(L));let b=s(y,m);return m.inline=d,m.list=C,b}),ordered:o,start:u}},l:(l,s,m)=>e(l.ordered?"ol":"ul",{key:m.key,start:l.type==="20"?l.start:void 0},l.items.map(function(u,S){return e("li",{key:S},s(u,m))}))}}var Zp=RegExp(`^\\[((?:\\[[^\\[\\]]*(?:\\[[^\\[\\]]*\\][^\\[\\]]*)*\\]|[^\\[\\]])*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),Jp=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/;function Bo(e){let t=e.length;for(;t>0&&e[t-1]<=" ";)t--;return e.slice(0,t)}function Zr(e,t){return e.startsWith(t)}function jp(e,t,o){if(Array.isArray(o)){for(let r=0;r<o.length;r++)if(Zr(e,o[r]))return!0;return!1}return o(e,t)}function Ho(e){return e.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function em(e){return kp.test(e)?"right":Pp.test(e)?"center":Dp.test(e)?"left":null}function gl(e,t,o,r){let n=o.inTable;o.inTable=!0;let a=[[]],l="";function s(){if(!l)return;let m=a[a.length-1];m.push.apply(m,t(l,o)),l=""}return e.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach((m,u,S)=>{m.trim()==="|"&&(s(),r)?u!==0&&u!==S.length-1&&a.push([]):l+=m}),s(),o.inTable=n,a}function tm(e,t,o){o.inline=!0;let r=e[2]?e[2].replace(Mp,"").split("|").map(em):[],n=e[3]?function(l,s,m){return l.trim().split(`
`).map(function(u){return gl(u,s,m,!0)})}(e[3],t,o):[],a=gl(e[1],t,o,!!n.length);return o.inline=!1,n.length?{align:r,cells:n,header:a,type:"25"}:{children:a,type:"21"}}function Sl(e,t){return e.align[t]==null?{}:{textAlign:e.align[t]}}function uo(e){return e.inline=1,e}function ft(e){return uo(function(t,o){return o.inline?e.exec(t):null})}function gt(e){return uo(function(t,o){return o.inline||o.simple?e.exec(t):null})}function nt(e){return function(t,o){return o.inline||o.simple?null:e.exec(t)}}function Xr(e){return uo(function(t){return e.exec(t)})}var om=/(javascript|vbscript|data(?!:image)):/i;function rm(e){try{let t=decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"");if(om.test(t))return null}catch{return null}return e}function Qe(e){return e&&e.replace(Vp,"$1")}function Jr(e,t,o){let r=o.inline||!1,n=o.simple||!1;o.inline=!0,o.simple=!0;let a=e(t,o);return o.inline=r,o.simple=n,a}function nm(e,t,o){let r=o.inline||!1,n=o.simple||!1;o.inline=!1,o.simple=!0;let a=e(t,o);return o.inline=r,o.simple=n,a}function am(e,t,o){let r=o.inline||!1;o.inline=!1;let n=e(t,o);return o.inline=r,n}var Ta=(e,t,o)=>({children:Jr(t,e[2],o)});function ya(){return{}}function Aa(){return null}function sm(...e){return e.filter(Boolean).join(" ")}function Ca(e,t,o){let r=e,n=t.split(".");for(;n.length&&(r=r[n[0]],r!==void 0);)n.shift();return r||o}function im(e="",t={}){t.overrides=t.overrides||{},t.namedCodesToUnicode=t.namedCodesToUnicode?Gt({},al,t.namedCodesToUnicode):al;let o=t.slugify||Ho,r=t.sanitizer||rm,n=t.createElement||jr.createElement,a=[sl,il,ll,t.enforceAtxHeadings?pl:cl,ml,dl,Ll,_l],l=[...a,Ip,Ea,ul,ha];function s(i,p,...d){let C=Ca(t.overrides,i+".props",{});return n(function(y,b){let k=Ca(b,y);return k?typeof k=="function"||typeof k=="object"&&"render"in k?k:Ca(b,y+".component",y):y}(i,t.overrides),Gt({},p,C,{className:sm(p?.className,C.className)||void 0}),...d)}function m(i){i=i.replace(Ep,"");let p=!1;t.forceInline?p=!0:t.forceBlock||(p=bp.test(i)===!1);let d=E(h(p?i:Bo(i).replace(Yp,"")+`

`,{inline:p}));for(;typeof d[d.length-1]=="string"&&!d[d.length-1].trim();)d.pop();if(t.wrapper===null)return d;let C=t.wrapper||(p?"span":"div"),y;if(d.length>1||t.forceWrapper)y=d;else{if(d.length===1)return y=d[0],typeof y=="string"?s("span",{key:"outer"},y):y;y=null}return n(C,{key:"outer"},y)}function u(i,p){if(!p||!p.trim())return null;let d=p.match(np);return d?d.reduce(function(C,y){let b=y.indexOf("=");if(b!==-1){let k=function(N){return N.indexOf("-")!==-1&&N.match(yp)===null&&(N=N.replace(vp,function(z,q){return q.toUpperCase()})),N}(y.slice(0,b)).trim(),K=function(N){let z=N[0];return(z==='"'||z==="'")&&N.length>=2&&N[N.length-1]===z?N.slice(1,-1):N}(y.slice(b+1).trim()),B=nl[k]||k;if(B==="ref")return C;let Q=C[B]=function(N,z,q,Ge){return z==="style"?function(it){let Ie=[],$e="",we=!1,_t=!1,$t="";if(!it)return Ie;for(let Ne=0;Ne<it.length;Ne++){let ie=it[Ne];if(ie!=='"'&&ie!=="'"||we||(_t?ie===$t&&(_t=!1,$t=""):(_t=!0,$t=ie)),ie==="("&&$e.endsWith("url")?we=!0:ie===")"&&we&&(we=!1),ie!==";"||_t||we)$e+=ie;else{let ct=$e.trim();if(ct){let Ao=ct.indexOf(":");if(Ao>0){let tr=ct.slice(0,Ao).trim(),hn=ct.slice(Ao+1).trim();Ie.push([tr,hn])}}$e=""}}let lt=$e.trim();if(lt){let Ne=lt.indexOf(":");if(Ne>0){let ie=lt.slice(0,Ne).trim(),ct=lt.slice(Ne+1).trim();Ie.push([ie,ct])}}return Ie}(q).reduce(function(it,[Ie,$e]){return it[Ie.replace(/(-[a-z])/g,we=>we[1].toUpperCase())]=Ge($e,N,Ie),it},{}):rp.indexOf(z)!==-1?Ge(Qe(q),N,z):(q.match(Ap)&&(q=Qe(q.slice(1,q.length-1))),q==="true"||q!=="false"&&q)}(i,k,K,r);typeof Q=="string"&&(Ea.test(Q)||ha.test(Q))&&(C[B]=m(Q.trim()))}else y!=="style"&&(C[nl[y]||y]=!0);return C},{}):null}let S=[],T={},_={0:{t:[">"],o:nt(sl),i:1,u(i,p,d){let[,C,y]=i[0].replace(ip,"").match(lp);return{alert:C,children:p(y,d)}},l(i,p,d){let C={key:d.key};return i.alert&&(C.className="markdown-alert-"+o(i.alert.toLowerCase(),Ho),i.children.unshift({attrs:{},children:[{type:"27",text:i.alert}],noInnerParse:!0,type:"11",tag:"header"})),s("blockquote",C,p(i.children,d))}},1:{o:Xr(cp),i:1,u:ya,l:(i,p,d)=>s("br",{key:d.key})},2:{t:i=>{let p=i[0];return p==="-"||p==="*"||p==="_"},o:nt(pp),i:1,u:ya,l:(i,p,d)=>s("hr",{key:d.key})},3:{t:["    "],o:nt(ll),i:0,u:i=>({lang:void 0,text:Qe(Bo(i[0].replace(/^ {4}/gm,"")))}),l:(i,p,d)=>s("pre",{key:d.key},s("code",Gt({},i.attrs,{className:i.lang?"lang-"+i.lang:""}),i.text))},4:{t:["```","~~~"],o:nt(il),i:0,u:i=>({attrs:u("code",i[3]||""),lang:i[2]||void 0,text:i[4],type:"3"})},5:{t:["`"],o:gt(mp),i:3,u:i=>({text:Qe(i[2])}),l:(i,p,d)=>s("code",{key:d.key},i.text)},6:{t:["[^"],o:nt(fp),i:0,u:i=>(S.push({footnote:i[2],identifier:i[1]}),{}),l:Aa},7:{t:["[^"],o:ft(gp),i:1,u:i=>({target:"#"+o(i[1],Ho),text:i[1]}),l:(i,p,d)=>s("a",{key:d.key,href:r(i.target,"a","href")},s("sup",{key:d.key},i.text))},8:{t:["[ ]","[x]"],o:ft(hp),i:1,u:i=>({completed:i[1].toLowerCase()==="x"}),l:(i,p,d)=>s("input",{checked:i.completed,key:d.key,readOnly:!0,type:"checkbox"})},9:{t:["#"],o:nt(t.enforceAtxHeadings?pl:cl),i:1,u:(i,p,d)=>({children:Jr(p,i[2],d),id:o(i[2],Ho),level:i[1].length}),l:(i,p,d)=>s("h"+i.level,{id:i.id,key:d.key},p(i.children,d))},10:{o:nt(ml),i:0,u:(i,p,d)=>({children:Jr(p,i[1],d),level:i[2]==="="?1:2,type:"9"})},11:{t:["<"],o:Xr(Ea),i:1,u(i,p,d){let[,C]=i[3].match(Kp),y=RegExp("^"+C,"gm"),b=i[3].replace(y,""),k=(K=b,l.some(q=>q.test(K))?am:Jr);var K;let B=i[1].toLowerCase(),Q=op.indexOf(B)!==-1,N=(Q?B:i[1]).trim(),z={attrs:u(N,i[2]),noInnerParse:Q,tag:N};if(d.inAnchor=d.inAnchor||B==="a",Q)z.text=i[3];else{let q=d.inHTML;d.inHTML=!0,z.children=k(p,b,d),d.inHTML=q}return d.inAnchor=!1,z},l:(i,p,d)=>s(i.tag,Gt({key:d.key},i.attrs),i.text||(i.children?p(i.children,d):""))},13:{t:["<"],o:Xr(ha),i:1,u(i){let p=i[1].trim();return{attrs:u(p,i[2]||""),tag:p}},l:(i,p,d)=>s(i.tag,Gt({},i.attrs,{key:d.key}))},12:{t:["<!--"],o:Xr(ul),i:1,u:()=>({}),l:Aa},14:{t:["!["],o:gt(Jp),i:1,u:i=>({alt:Qe(i[1]),target:Qe(i[2]),title:Qe(i[3])}),l:(i,p,d)=>s("img",{key:d.key,alt:i.alt||void 0,title:i.title||void 0,src:r(i.target,"img","src")})},15:{t:["["],o:ft(Zp),i:3,u:(i,p,d)=>({children:nm(p,i[1],d),target:Qe(i[2]),title:Qe(i[3])}),l:(i,p,d)=>s("a",{key:d.key,href:r(i.target,"a","href"),title:i.title},p(i.children,d))},16:{t:["<"],o:ft(_p),i:0,u:i=>({children:[{text:i[1],type:"27"}],target:i[1],type:"15"})},17:{t:(i,p)=>!p.inAnchor&&!t.disableAutoLink&&(Zr(i,"http://")||Zr(i,"https://")),o:ft(Cp),i:0,u:i=>({children:[{text:i[1],type:"27"}],target:i[1],title:void 0,type:"15"})},18:{t:["<"],o:ft(Lp),i:0,u(i){let p=i[1],d=i[1];return ap.test(d)||(d="mailto:"+d),{children:[{text:p.replace("mailto:",""),type:"27"}],target:d,type:"15"}}},20:fl(s,1),33:fl(s,2),19:{o:nt(up),i:3,u:ya,l:()=>`
`},21:{o:uo(function(i,p){if(p.inline||p.simple||p.inHTML&&i.indexOf(`

`)===-1&&p.prevCapture.indexOf(`

`)===-1)return null;let d="";i.split(`
`).every(y=>(y+=`
`,!a.some(b=>b.test(y))&&(d+=y,!!y.trim())));let C=Bo(d);return C===""?null:[d,,C]}),i:3,u:Ta,l:(i,p,d)=>s("p",{key:d.key},p(i.children,d))},22:{t:["["],o:ft(Np),i:0,u:i=>(T[i[1]]={target:i[2],title:i[4]},{}),l:Aa},23:{t:["!["],o:gt(Rp),i:0,u:i=>({alt:i[1]?Qe(i[1]):void 0,ref:i[2]}),l:(i,p,d)=>T[i.ref]?s("img",{key:d.key,alt:i.alt,src:r(T[i.ref].target,"img","src"),title:T[i.ref].title}):null},24:{t:i=>i[0]==="["&&i.indexOf("](")===-1,o:ft(xp),i:0,u:(i,p,d)=>({children:p(i[1],d),fallbackChildren:i[0],ref:i[2]}),l:(i,p,d)=>T[i.ref]?s("a",{key:d.key,href:r(T[i.ref].target,"a","href"),title:T[i.ref].title},p(i.children,d)):s("span",{key:d.key},i.fallbackChildren)},25:{t:["|"],o:nt(dl),i:1,u:tm,l(i,p,d){let C=i;return s("table",{key:d.key},s("thead",null,s("tr",null,C.header.map(function(y,b){return s("th",{key:b,style:Sl(C,b)},p(y,d))}))),s("tbody",null,C.cells.map(function(y,b){return s("tr",{key:b},y.map(function(k,K){return s("td",{key:K,style:Sl(C,K)},p(k,d))}))})))}},27:{o:uo(function(i,p){let d;return Zr(i,":")&&(d=Bp.exec(i)),d||Qp.exec(i)}),i:4,u(i){let p=i[0];return{text:p.indexOf("&")===-1?p:p.replace(Tp,(d,C)=>t.namedCodesToUnicode[C]||d)}},l:i=>i.text},28:{t:["**","__"],o:gt(Up),i:2,u:(i,p,d)=>({children:p(i[2],d)}),l:(i,p,d)=>s("strong",{key:d.key},p(i.children,d))},29:{t:i=>{let p=i[0];return(p==="*"||p==="_")&&i[1]!==p},o:gt(Gp),i:3,u:(i,p,d)=>({children:p(i[2],d)}),l:(i,p,d)=>s("em",{key:d.key},p(i.children,d))},30:{t:["\\"],o:gt(Fp),i:1,u:i=>({text:i[1],type:"27"})},31:{t:["=="],o:gt(wp),i:3,u:Ta,l:(i,p,d)=>s("mark",{key:d.key},p(i.children,d))},32:{t:["~~"],o:gt(Hp),i:3,u:Ta,l:(i,p,d)=>s("del",{key:d.key},p(i.children,d))}};t.disableParsingRawHTML===!0&&(delete _[11],delete _[13]);let h=function(i){var p=Object.keys(i);function d(C,y){var b=[];if(y.prevCapture=y.prevCapture||"",C.trim())for(;C;)for(var k=0;k<p.length;){var K=p[k],B=i[K];if(!B.t||jp(C,y,B.t)){var Q=B.o(C,y);if(Q&&Q[0]){C=C.substring(Q[0].length);var N=B.u(Q,d,y);y.prevCapture+=Q[0],N.type||(N.type=K),b.push(N);break}k++}else k++}return y.prevCapture="",b}return p.sort(function(C,y){return i[C].i-i[y].i||(C<y?-1:1)}),function(C,y){return d(function(b){return b.replace(dp,`
`).replace(Sp,"").replace(Op,"    ")}(C),y)}}(_),E=(R=function(i,p){return function(d,C,y){let b=i[d.type].l;return p?p(()=>b(d,C,y),d,C,y):b(d,C,y)}}(_,t.renderRule),function i(p,d={}){if(Array.isArray(p)){let C=d.key,y=[],b=!1;for(let k=0;k<p.length;k++){d.key=k;let K=i(p[k],d),B=typeof K=="string";B&&b?y[y.length-1]+=K:K!==null&&y.push(K),b=B}return d.key=C,y}return R(p,i,d)});var R;let L=m(e);return S.length?s("div",null,L,s("footer",{key:"footer"},S.map(function(i){return s("div",{id:o(i.identifier,Ho),key:i.identifier},i.identifier,E(h(i.footnote,{inline:!0})))}))):L}var vl=e=>{let{children:t="",options:o}=e,r=function(n,a){if(n==null)return{};var l,s,m={},u=Object.keys(n);for(s=0;s<u.length;s++)a.indexOf(l=u[s])>=0||(m[l]=n[l]);return m}(e,tp);return jr.cloneElement(im(t,o),r)};var St={assistantMarkdown:"A5vJm",heading:"qyty3"};var Et=c(f(),1),Ye=(e={})=>({component:g,props:e}),lm={h1:Ye({variant:A.H1,as:"span",className:St.heading}),h2:Ye({variant:A.H2,as:"span",className:St.heading}),h3:Ye({variant:A.H3,as:"span",className:St.heading}),h4:Ye({variant:A.H4,as:"span",className:St.heading}),h5:Ye({variant:A.H5,as:"span",className:St.heading}),h6:Ye({variant:A.H6,as:"span",className:St.heading}),ul:{component:e=>(0,Et.jsx)("ul",{...e})},ol:{component:e=>(0,Et.jsx)("ol",{...e})},li:{component:({children:e,...t})=>(0,Et.jsx)("li",{...t,children:(0,Et.jsx)(g,{children:e})})},table:{component:({children:e,...t})=>(0,Et.jsx)("table",{...t,tabIndex:-1,children:e})},a:{component:({children:e,href:t})=>(0,Et.jsx)(W,{tabIndex:-1,href:t,isExternal:!0,breakWord:!0,shouldOmitOrg:!t?.includes("https://platform.censys.io/"),children:e})},strong:Ye({variant:A.DEFAULT_SEMIBOLD}),em:{component:({children:e})=>`_${e}_`},p:Ye(),code:Ye({variant:A.DEFAULT_SOURCE}),pre:Ye({variant:A.SMALL_SOURCE})};function va({content:e}){return(0,Et.jsx)(vl,{options:{overrides:lm},className:St.assistantMarkdown,children:e})}var fo={assistantMessage:"gcavD",shimmer:"Vf-XF",blink:"gYMFW",loadingText:"YVBDp",requestTime:"XWkWl",cursor:"_2jSVj",errorText:"RbuiA"};function Il(e){if(!e?.start||!e?.end)return;let t=Temporal.Now.instant(),o=Lo(e.start)||t,r=Lo(e.end)||t,n=Math.ceil(Number(r.epochMilliseconds-o.epochMilliseconds)/1e3);return n<=0?0:n}var Ce=c(f(),1);function Fo({message:e,hasFeedbackControls:t=!1,conversationId:o,...r}){let n=e.streamTime.end===void 0,a;if(e.sender==="assistant")if(n)a=(0,Ce.jsx)(g,{className:fo.loadingText,"data-testid":"assistant-streaming-loading-text",children:"Thinking..."});else{let s=Il(e.streamTime);s&&(a=(0,Ce.jsxs)(g,{variant:A.SMALL,className:fo.requestTime,"data-testid":"assistant-stream-duration",children:["Thought for ",s," seconds"]}))}let l=r.isSelected&&r.navigationLevel==="message";return(0,Ce.jsxs)(wo,{...r,className:fo.assistantMessage,id:e.id,role:n?"status":void 0,"aria-live":n?"polite":void 0,children:[a,(0,Ce.jsxs)("div",{children:[!!e.content&&(0,Ce.jsx)(va,{content:e.content}),n&&(0,Ce.jsx)("span",{className:fo.cursor,"aria-hidden":!0,"data-testid":"assistant-stream-cursor",children:"|"}),!!e.error&&(0,Ce.jsxs)(g,{variant:A.SMALL,className:fo.errorText,"data-testid":"assistant-stream-error-text",children:[(0,Ce.jsx)(I,{icon:"error-warning-line"}),(0,Ce.jsx)("span",{children:"Censys Assistant failed to generate a response."})]})]}),t&&!n&&!e.error&&(0,Ce.jsx)(Sa,{isMessageActive:l,messageId:e.id,conversationId:o})]})}var Ia={userMessage:"eQw-Y",textContainer:"ISiH9"};var Vo=c(f(),1);function on({message:e,userName:t,...o}){return(0,Vo.jsxs)(wo,{...o,className:Ia.userMessage,id:e.id,children:[(0,Vo.jsx)(g,{className:Ia.textContainer,"data-testid":"user-message-content",children:e.content}),(0,Vo.jsx)(jt,{label:t||"",size:Jt.SMALL})]})}var wt={messagesSkeleton:"RY7Yj",message:"xqP71",assistant:"Iyn3Y",user:"rjOB-",card:"Uc3Vm"};var ge=c(f(),1);function Na(){return(0,ge.jsx)("ul",{className:wt.messagesSkeleton,children:["assistant","user","assistant","user"].map((e,t)=>(0,ge.jsxs)("li",{children:[e==="assistant"&&(0,ge.jsxs)("div",{className:P(wt.message,wt.assistant),"aria-hidden":!0,children:[(0,ge.jsx)(xe,{variant:A.SMALL,color:"secondary",width:132}),(0,ge.jsxs)("div",{children:[(0,ge.jsx)(xe,{}),(0,ge.jsx)(xe,{width:200})]})]}),e==="user"&&(0,ge.jsxs)("div",{className:P(wt.message,wt.user),"aria-hidden":!0,children:[(0,ge.jsxs)("div",{className:wt.card,children:[(0,ge.jsx)(xe,{color:"secondary"}),(0,ge.jsx)(xe,{color:"secondary",width:200})]}),(0,ge.jsx)(Zs,{size:36,shape:"round"})]})]},`${e}-${t}`))})}var Ra={chatLog:"RgadK",panelNavigation:"_2FHrw"};function Nl({event:e,messages:t,streamingMessage:o,activeDescendantId:r,setActiveDescendantId:n,navigationLevel:a,setNavigationLevel:l}){let s=o?[...t,o]:t;if(!(s.length===0||a==="message")){if(e.key==="Home"){e.preventDefault(),rn("first",s,r,n),a==="panel"&&l("log");return}if(e.key==="End"){e.preventDefault(),rn("last",s,r,n),a==="panel"&&l("log");return}if(a==="panel"){e.key==="Enter"&&(e.preventDefault(),rn("last",s,r,n),l("log"));return}else switch(e.key){case"Tab":e.preventDefault(),rn(e.shiftKey?"previous":"next",s,r,n);break;case"Escape":e.preventDefault(),n(void 0),l("panel");break;case"Enter":e.preventDefault(),l("message"),typeof window<"u"&&r&&document.getElementById(r)?.focus();break}}}function rn(e,t,o,r){if(t.length===0)return;let n;switch(e){case"first":n=0;break;case"last":n=t.length-1;break;case"next":{let a=o?t.findIndex(l=>l.id===o):-1;n=a>=t.length-1?0:a+1;break}case"previous":{let a=o?t.findIndex(l=>l.id===o):-1;n=a<=0?t.length-1:a-1;break}}t[n]&&(r(t[n].id),typeof window<"u"&&document.getElementById(t[n].id)?.scrollIntoView({behavior:"smooth"}))}var ht=c(f(),1);function xa({messages:e,messageStreamState:t,conversationId:o,isStreaming:r,isFetching:n}){let[a,l]=(0,Se.useState)(void 0),[s,m]=(0,Se.useState)("panel"),u=(0,Se.useRef)(null),{accessState:S}=(0,Se.useContext)(hr),T=qs("(prefers-reduced-motion: reduce)"),_=ue("assistant-response-feedback"),h=t.isActive&&t.conversationId===o?t.message:void 0,E=(0,Se.useCallback)(p=>{Nl({event:p,messages:e,streamingMessage:h,activeDescendantId:a,setActiveDescendantId:l,navigationLevel:s,setNavigationLevel:m})},[e,h,a,s,m]),R=(0,Se.useCallback)(p=>{l(p),m("log")},[l,m]),L=(0,Se.useCallback)(()=>{m("log"),u.current?.focus(),typeof window<"u"&&a&&document.getElementById(a)?.scrollIntoView({behavior:T?"auto":"smooth"})},[m,u,a,T]);(0,Se.useEffect)(()=>{let p=d=>{!!u.current?.contains(d.target)||(l(void 0),m("panel"))};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]),(0,Se.useEffect)(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[n]);let i={exitMessageNavigation:L,onClick:R,navigationLevel:s};return(0,ht.jsx)("div",{ref:u,className:P(Ra.chatLog,s==="panel"&&Ra.panelNavigation),"aria-busy":r||n,role:"log","aria-live":"polite","aria-atomic":!1,"aria-label":"Conversation history","data-testid":"chat-messages-list","aria-activedescendant":a,tabIndex:0,onKeyDown:E,children:n?(0,ht.jsx)(Na,{}):(0,ht.jsxs)("ul",{"aria-label":"Chat messages in chronological order",children:[e.map(p=>p.sender==="user"?(0,ht.jsx)(on,{message:p,isSelected:p.id===a,userName:S?.firstName,...i},p.id):(0,ht.jsx)(Fo,{message:p,isSelected:p.id===a,hasFeedbackControls:_,conversationId:o,...i},p.id)),h&&(0,ht.jsx)(Fo,{message:h,isSelected:h.id===a,conversationId:o,...i})]})})}var yt=c(v(),1);var Rl="/api/censys-assistant/chat";var Tt={messageInput:"VQzuF",error:"Um67N",leftContent:"HtckC",inputContainer:"InJGE",submitButton:"dz0X5",disclaimer:"n4F8f"};var ye=c(f(),1),xl="ai-assistant-chat-panel-disclaimer";function ba({dispatch:e,conversationId:t,messageStream:o,onSubmitMessage:r}){let[n,a]=(0,yt.useState)(""),l=Sr(),m=!o.isActive&&!!n.trim(),u=o.isActive&&o.conversationId===t,S=(0,yt.useCallback)(E=>{u||a(E.target.value)},[u]),T=(0,yt.useCallback)(E=>{if(E.preventDefault(),m){let R=new FormData(E.currentTarget);R.append("csrf",l),r(R)}},[m,r,l]),_=(0,yt.useCallback)(E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),E.currentTarget.form?.requestSubmit())},[]),h=(0,ye.jsx)($,{"data-pendoid":V.SEND_MESSAGE_BUTTON,type:"submit",icon:"arrow-up-line","aria-label":"Send message",size:me.LARGE,isLoading:o.isActive&&t===o.conversationId&&!!n,disabled:!m});return(0,yt.useEffect)(()=>{o.message&&u&&a("")},[o,u]),(0,ye.jsxs)("div",{className:Tt.messageInput,children:[o.error&&o.conversationId===t&&(0,ye.jsxs)(g,{className:Tt.error,"aria-live":"assertive",children:[(0,ye.jsxs)("span",{className:Tt.leftContent,children:[(0,ye.jsx)(I,{icon:"error-warning-line"}),"Couldn't send message. Please try again."]}),(0,ye.jsx)($,{icon:"close-line","aria-label":"Dismiss error",onClick:()=>e({type:"message-stream/reset"}),variant:x.GHOST,size:me.SMALL})]}),(0,ye.jsxs)("form",{className:Tt.inputContainer,onSubmit:T,"aria-label":"Send message form",children:[(0,ye.jsx)(Zt,{"data-pendoid":V.MESSAGE_INPUT,value:n,name:"prompt",onChange:S,onKeyDown:_,placeholder:"Ask a question...",rows:3,disabled:u,isFullWidth:!0,"aria-describedby":xl,"aria-label":"Message input"}),o.isActive?(0,ye.jsx)(mt,{content:"Thinking...",triggerClassName:Tt.submitButton,delayDuration:500,tabIndex:-1,children:h}):(0,ye.jsx)("div",{className:Tt.submitButton,children:h})]}),(0,ye.jsx)(g,{id:xl,className:Tt.disclaimer,variant:A.SMALL,children:"AI responses are not guaranteed to be accurate. Please verify all responses."})]})}var bl={conversationView:"qfoSh",errorText:"otjNY"};var Ht=c(f(),1);function Oa({dispatch:e,messages:t,messageStreamState:o,fetchMessagesState:r,conversationId:n,onSubmitMessage:a}){let l;return r.error?l=(0,Ht.jsx)(Ut,{state:"error-fetching-messages",action:{onClick:()=>e({type:"fetch-messages/retry"}),name:"Reload chat"}}):!t.length&&!r.isLoading&&!r.shouldFetch?l=(0,Ht.jsx)(Ut,{state:"empty-state-new-chat"}):l=(0,Ht.jsx)(xa,{messages:t,messageStreamState:o,conversationId:n,isFetching:r.isLoading,isStreaming:o.isActive}),(0,Ht.jsxs)("section",{className:bl.conversationView,"aria-label":"Current chat",children:[l,(0,Ht.jsx)(ba,{dispatch:e,messageStream:o,conversationId:n,onSubmitMessage:a})]})}var Qo="new-conversation",go={id:Qo,name:"New Chat",summary:"",lastUpdated:Temporal.Now.instant().toString()};var nn=c(v(),1);function Ma(e,t){let[o,r]=(0,nn.useState)(0);return(0,nn.useEffect)(()=>{e.current&&t&&r(e.current.getBoundingClientRect().top)},[t]),{offsetHeightStyle:o?{height:`calc(100dvh - ${o}px)`}:void 0}}var Pa=c(v(),1);var Ol="/api/censys-assistant/getMessages";function Da(e,t,o){let r=X(),n=at();(0,Pa.useEffect)(()=>{r.data?.messages?e({type:"fetch-messages/success",payload:r.data.messages}):(r.data?.error||r.data!==void 0)&&e({type:"fetch-messages/error",payload:"Message history failed to load."})},[r.data,e]),(0,Pa.useEffect)(()=>{t&&o!==Qo&&(e({type:"fetch-messages/start"}),r.load(n(`${Ol}/${o}`)))},[t,o,n,e])}var ka=c(v(),1);var an="/api/censys-assistant/getConversations";function Ua(e,t){let o=X(),r=at();(0,ka.useEffect)(()=>{o.data?.conversations?e({type:"fetch-conversations/success",payload:o.data?.conversations}):(o.data?.error||o.data!==void 0)&&e({type:"fetch-conversations/error",payload:"Conversation history failed to load."})},[o.data,e]),(0,ka.useEffect)(()=>{t&&(e({type:"fetch-conversations/start"}),o.load(r(an)))},[t,r,e])}var Dl=c(v(),1);var mm=M.object({type:M.literal("message_start"),message_id:M.string(),conversation_id:M.string(),timestamp:M.string()}),um=M.object({type:M.literal("message_stop"),message_id:M.string(),stop_reason:M.string(),timestamp:M.string()}),dm=M.object({type:M.literal("tool_call_start")}),fm=M.object({type:M.literal("content_block_delta"),block_id:M.string(),delta:M.string(),timestamp:M.string()}),gm=M.object({type:M.literal("chat_title_generation"),title:M.string()}),Sm=M.object({type:M.literal("error"),timestamp:M.string()}),Em=M.object({type:M.literal("stream_error"),message:M.string()}),hm=M.object({type:M.literal("stream_disconnected"),timestamp:M.string()}),Tm=M.object({type:M.string()}).passthrough(),ym=M.union([mm,um,dm,fm,gm,Sm,Em,hm,Tm]);function Ml(e){let t=JSON.parse(e);return ym.parse(t)}async function Pl(e,t){for(;;){let{done:o,value:r}=await e.read();if(o)break;let a=new TextDecoder().decode(r).split(`
`);for(let l of a)if(l.startsWith("data: "))try{let s=l.slice(6),m=Ml(s),u=t[m.type];u&&u(m)}catch(s){console.error("Failed to parse event:",s)}}}function Bt(e){return e.id===Qo}function Am(e,t){return{message_start:o=>{e({type:"message-stream/start",payload:{...o,prompt:t}})},tool_call_start:()=>{e({type:"message-stream/tool-call-start"})},content_block_delta:o=>{e({type:"message-stream/content-block",payload:o})},message_stop:o=>{e({type:"message-stream/stop",payload:o})},chat_title_generation:o=>{e({type:"message-stream/title-generation",payload:o})},error:o=>{e({type:"message-stream/chat-error",payload:o})},stream_error:()=>{e({type:"message-stream/error"})},stream_disconnected:o=>{e({type:"message-stream/chat-error",payload:o})}}}function Ga(e,t){let o=at();return{handleSubmitMessage:(0,Dl.useCallback)(async n=>{let l=n.get("prompt")?.trim();if(!(!l||e.messageStream.isActive)){t({type:"message-stream/initiate"});try{n.set("prompt",l),Bt(e.conversation)||n.append("conversationId",e.conversation.id);let s=await fetch(o(Rl),{method:"POST",body:n});if(!s.ok){t({type:"message-stream/error"}),console.error(`Chat request failed: ${s.status}`);return}let m=s.body?.getReader();if(!m){t({type:"message-stream/error"}),console.error(`Chat request failed: ${s.status} - no response body`);return}let u=Am(t,l);await Pl(m,u)}catch(s){console.error(`Chat request failed with unknown error: ${s}`),t({type:"message-stream/error"})}}},[e.messageStream,e.conversation,o,t])}}var wa=c(v(),1);function Ha(e){let{isFeatureEnabled:t}=Pe(),o=X(),r=at();(0,wa.useEffect)(()=>{t&&o.state==="idle"&&!o.data&&o.load(r(an,{params:{limit:"1"}}))},[t,r]),(0,wa.useEffect)(()=>{o.data?.error?e({type:"ui/has-conversation-history",payload:!0}):o.data&&e({type:"ui/has-conversation-history",payload:!!o.data.conversations&&o.data.conversations.length>0})},[o.data,e])}var sn=c(v(),1);var So={conversationItem:"_8-dvK",conversationCard:"bChZU",header:"_9hML8",timestamp:"MtOrb",summary:"kSVvM"};var st=c(f(),1);function Ba({conversation:e,onSelectConversation:t,isMostRecentConversation:o}){let r=(0,sn.useMemo)(()=>{let a=Temporal.Now.instant(),l=Lo(e.lastUpdated)||a;return Js(l,a)},[e.lastUpdated]),n=(0,sn.useCallback)(()=>t(e),[t,e]);return(0,st.jsx)("li",{className:So.conversationItem,children:(0,st.jsx)("button",{onClick:n,"data-pendoid":o?V.HISTORY_LATEST_CARD:V.HISTORY_OTHER_CARD,children:(0,st.jsxs)(vs,{className:So.conversationCard,variant:_s.INTERACTIVE,bodyPadding:fr.NONE,children:[(0,st.jsxs)("div",{className:So.header,children:[(0,st.jsx)(g,{children:e.name}),(0,st.jsx)(g,{className:So.timestamp,variant:A.SMALL,children:r})]}),!!e.summary&&(0,st.jsx)(g,{className:So.summary,variant:A.SMALL,children:e.summary})]})})})}var kl=c(v(),1);var ln={historyItem:"bHpA8",header:"-ZRaW",text:"_9fKIp"};var ke=c(f(),1);function Fa(){return(0,ke.jsx)(kl.Fragment,{children:Array.from({length:3}).map((e,t)=>(0,ke.jsx)("li",{className:ln.historyItem,"aria-hidden":!0,children:(0,ke.jsxs)(Xs,{bodyPadding:fr.NONE,children:[(0,ke.jsxs)("div",{className:ln.header,children:[(0,ke.jsx)(xe,{color:"heading"}),(0,ke.jsx)(xe,{color:"secondary",variant:A.SMALL,width:100})]}),(0,ke.jsxs)("div",{className:ln.text,children:[(0,ke.jsx)(xe,{variant:A.SMALL}),(0,ke.jsx)(xe,{variant:A.SMALL,width:150})]})]})},`conversation-${t}`))})}var Va={historyView:"Z7Q2M",specialState:"urUPT"};var Ft=c(f(),1);function Qa({conversations:e,fetchConversations:t,dispatch:o}){Ua(o,t.shouldFetch);let r,n;return t.error?n=(0,Ft.jsx)(Ut,{state:"error-fetching-conversations",action:{onClick:()=>o({type:"fetch-conversations/retry"}),name:"Reload chats"}}):t.isLoading||t.shouldFetch?r=(0,Ft.jsx)(Fa,{}):e.length===0?n=(0,Ft.jsx)(Ut,{state:"empty-conversations-history",action:{onClick:()=>o({type:"conversation/select",payload:go}),name:"Start a new chat",excludeIcon:!0}}):r=e.map((a,l)=>(0,Ft.jsx)(Ba,{isMostRecentConversation:l===0,conversation:a,onSelectConversation:()=>o({type:"conversation/select",payload:a})},a.id)),(0,Ft.jsx)("section",{className:P(Va.historyView,!!n&&Va.specialState),"aria-label":"Conversation history",children:n||(0,Ft.jsx)("ul",{role:"list","aria-busy":t.isLoading,children:r})})}var Ya={header:"_1KsMo",text:"DiPye"};var Vt=c(f(),1);function Ka(){let{closeChatPanel:e}=Pe();return(0,Vt.jsxs)("div",{className:Ya.header,children:[(0,Vt.jsxs)(g,{className:Ya.text,children:[(0,Vt.jsx)(I,{icon:"sparkling-2-line"}),"Censys Assistant",(0,Vt.jsx)(js,{tooltipContent:"This feature is in beta. AI responses are not guaranteed to be accurate."})]}),(0,Vt.jsx)($,{"data-pendoid":V.CLOSE_BUTTON,icon:"close-line","aria-label":"Close assistant chat panel","aria-controls":kt,variant:x.GHOST,onClick:e})]})}var cn={viewNavigation:"rfZ0I",separator:"T-EJT",displayText:"LZsyR"};var Ee=c(f(),1),Cm="New Chat",Lm="Chats";function qa({view:e,dispatch:t,hasChatHistory:o,chatTitle:r=Cm}){return o?(0,Ee.jsx)("nav",{className:cn.viewNavigation,"aria-label":"Chat navigation",children:(0,Ee.jsxs)("ol",{children:[(0,Ee.jsx)(Ul,{pendoId:V.CHATS_BREADCRUMB,isActive:e==="chat-history",inactiveAriaLabel:"Switch to view chat history",onSelect:()=>t({type:"ui/set-view",payload:"chat-history"}),children:Lm}),(0,Ee.jsx)("span",{"aria-hidden":!0,children:(0,Ee.jsx)(g,{className:cn.separator,variant:A.H2,as:"div",children:"/"})}),(0,Ee.jsx)(Ul,{pendoId:V.CURRENT_CHAT_BREADCRUMB,isActive:e==="chat-conversation",inactiveAriaLabel:`Switch to view current chat '${r}'`,onSelect:()=>t({type:"ui/set-view",payload:"chat-conversation"}),children:r})]})}):(0,Ee.jsx)(Wa,{children:r})}var Ul=({pendoId:e,isActive:t,inactiveAriaLabel:o,onSelect:r,children:n})=>(0,Ee.jsx)("li",{"aria-current":t?"page":void 0,children:t?(0,Ee.jsx)(Wa,{children:n}):(0,Ee.jsx)(re,{"data-pendoid":e,variant:x.GHOST,"aria-label":o,onClick:r,children:(0,Ee.jsx)(Wa,{children:n})})}),Wa=({children:e})=>(0,Ee.jsx)(g,{className:cn.displayText,variant:A.H2,as:"div",children:e});var pn={chatPanel:"Ymqyv",panelHeader:"tI6ka",navigationContainer:"-O3bU"};var We=c(f(),1);function un(){let{isOpen:e,isFeatureEnabled:t,chatPanelState:o,chatPanelDispatch:r}=Pe(),n=(0,mn.useRef)(null),{offsetHeightStyle:a}=Ma(n,e);Ha(r),Da(r,o.fetchMessages.shouldFetch,o.conversation.id);let{handleSubmitMessage:l}=Ga(o,r),s;switch(o.view){case"chat-conversation":s=(0,We.jsx)(Oa,{dispatch:r,messages:o.messages,messageStreamState:o.messageStream,fetchMessagesState:o.fetchMessages,conversationId:o.conversation.id,onSubmitMessage:l});break;case"chat-history":s=(0,We.jsx)(Qa,{conversations:o.conversations,fetchConversations:o.fetchConversations,dispatch:r})}return(0,mn.useEffect)(()=>{e||r({type:"ui/reset-view"})},[e]),!e||!t?null:(0,We.jsxs)("aside",{id:kt,role:"complementary","aria-label":"Assistant chat panel",className:pn.chatPanel,ref:n,style:a,children:[(0,We.jsxs)("header",{className:pn.panelHeader,children:[(0,We.jsx)(Ka,{}),(0,We.jsxs)("div",{className:pn.navigationContainer,children:[(0,We.jsx)(qa,{view:o.view,dispatch:r,hasChatHistory:o.hasConversationHistory,chatTitle:o.conversation.name}),!Bt(o.conversation)&&o.hasConversationHistory&&(0,We.jsx)(re,{"data-pendoid":V.NEW_CHAT_BUTTON,variant:x.GHOST,iconLeft:"question-answer",iconLeftMode:"line",onClick:()=>r({type:"conversation/select",payload:go}),children:"New Chat"})]})]}),s]})}var ce={hasConversationHistory:!1,view:"chat-conversation",conversations:[],fetchConversations:{shouldFetch:!1,isLoading:!1,error:void 0},conversation:go,messages:[],fetchMessages:{shouldFetch:!1,isLoading:!1,error:void 0},messageStream:{isActive:!1,conversationId:void 0,message:void 0,error:void 0}};function $a(e,t){switch(t.type){case"ui/has-conversation-history":return{...e,hasConversationHistory:t.payload};case"ui/set-view":return{...e,view:t.payload,fetchConversations:{...ce.fetchConversations,shouldFetch:t.payload==="chat-history"}};case"ui/reset-view":return{...ce,hasConversationHistory:e.hasConversationHistory};case"conversation/select":return{...e,view:"chat-conversation",conversation:t.payload,messages:[],fetchMessages:{...ce.fetchMessages,shouldFetch:!Bt(t.payload)}};case"fetch-conversations/start":return{...e,conversations:[],fetchConversations:{shouldFetch:!1,isLoading:!0,error:void 0}};case"fetch-conversations/success":return{...e,conversations:t.payload,fetchConversations:ce.fetchConversations};case"fetch-conversations/error":return{...e,conversations:[],fetchConversations:{shouldFetch:!1,isLoading:!1,error:t.payload}};case"fetch-conversations/retry":return{...e,conversations:[],fetchConversations:{...ce.fetchConversations,shouldFetch:!0}};case"fetch-messages/start":return{...e,messages:[],fetchMessages:{shouldFetch:!1,isLoading:!0,error:void 0}};case"fetch-messages/success":{let o=t.payload;return e.messageStream.isActive&&e.messageStream.conversationId===e.conversation.id&&(o=o.slice(0,o.length-1)),{...e,messages:o,fetchMessages:ce.fetchMessages}}case"fetch-messages/error":return{...e,messages:[],fetchMessages:{shouldFetch:!1,isLoading:!1,error:t.payload}};case"fetch-messages/retry":return{...e,messages:[],fetchMessages:{...ce.fetchMessages,shouldFetch:!0}};case"message-stream/initiate":return{...e,messageStream:{...ce.messageStream,isActive:!0,conversationId:e.conversation.id}};case"message-stream/start":{let{timestamp:o,message_id:r,conversation_id:n,prompt:a}=t.payload,l=[...e.messages,{id:`user-message-${r}`,sender:"user",content:a}],s={id:r,sender:"assistant",content:"",streamTime:{start:o}};return{...e,conversation:{...e.conversation,id:n,lastUpdated:o},messages:l,messageStream:{...e.messageStream,conversationId:n,message:s}}}case"message-stream/content-block":return{...e,messageStream:{...e.messageStream,message:e.messageStream.message?{...e.messageStream.message,content:e.messageStream.message.content+t.payload.delta}:void 0}};case"message-stream/tool-call-start":return{...e,messageStream:{...e.messageStream,message:e.messageStream.message?{...e.messageStream.message,content:e.messageStream.message.content+`

`}:void 0}};case"message-stream/title-generation":return{...e,hasConversationHistory:!0,conversation:{...e.conversation,name:t.payload.title}};case"message-stream/stop":return{...e,messageStream:ce.messageStream,messages:e.messageStream.message?[...e.messages,{...e.messageStream.message,streamTime:{...e.messageStream.message.streamTime,end:t.payload.timestamp}}]:e.messages};case"message-stream/chat-error":return{...e,messageStream:ce.messageStream,messages:e.messageStream.message?[...e.messages,{...e.messageStream.message,error:!0,streamTime:{...e.messageStream.message.streamTime,end:t.payload.timestamp}}]:e.messages};case"message-stream/error":return{...e,messageStream:{...e.messageStream,message:void 0,isActive:!1,error:!0}};case"message-stream/reset":return{...e,messageStream:ce.messageStream};default:return e}}var Le=c(v(),1);var wl=c(f(),1),Gl={isOpen:!1,isFeatureEnabled:!1,openChatPanel:()=>{},closeChatPanel:()=>{},onToggle:()=>{},chatPanelState:ce,chatPanelDispatch:()=>{}},Xa=(0,Le.createContext)(Gl),Pe=()=>(0,Le.useContext)(Xa),_m=({initialIsOpen:e=Gl.isOpen,children:t})=>{let[o,r]=(0,Le.useState)(e),[n,a]=(0,Le.useReducer)($a,ce),l=!!yr(),s=ue("conversational-ai"),m=to(),u=!!(l&&s&&m),S=(0,Le.useCallback)(()=>{u&&r(!0)},[u]),T=(0,Le.useCallback)(()=>{u&&r(!1)},[u]),_=(0,Le.useCallback)(()=>{u&&r(E=>!E)},[u]),h={isOpen:o,isFeatureEnabled:u,openChatPanel:S,closeChatPanel:T,onToggle:_,chatPanelState:n,chatPanelDispatch:a};return(0,wl.jsx)(Xa.Provider,{value:h,children:t})};var _e=c(v(),1);var Vl=c(f(),1),vm={query:"",updateQuery:()=>{}},Hl=(0,_e.createContext)(vm);function Bl(){let e=(0,_e.useContext)(Hl);if(!e)throw new Error("useSearchContext must be used within a SearchContextProvider");return e}function Fl({initialValue:e="",children:t}){let[o,r]=(0,_e.useState)(e);(0,_e.useEffect)(()=>{r(e)},[e]);let n=(0,_e.useCallback)((l,s=!1)=>{let m=s?ws(o,l):l;r(m)},[o,r]),a=(0,_e.useMemo)(()=>({query:o,updateQuery:n}),[o,n]);return(0,Vl.jsx)(Hl.Provider,{value:a,children:t})}var Yo={topHeaderContainer:"OBrof",contentLeft:"Giwtn",searchBarWrapper:"_6EE3F",headerRight:"tLDAr"};var ze=c(f(),1);function dn({placeholder:e,breadcrumbs:t,children:o,collectionId:r}){let{query:n}=Bl(),a=(0,Ql.useMemo)(()=>t.map(l=>"pathName"in l?{...l,pathName:l.pathName}:l),[t]);return(0,ze.jsxs)("header",{className:Yo.topHeaderContainer,children:[(0,ze.jsxs)("div",{className:Yo.contentLeft,children:[(0,ze.jsx)(ks,{breadcrumbs:a}),(0,ze.jsx)("div",{className:Yo.searchBarWrapper,children:(0,ze.jsx)(ua,{q:n,placeholder:e,collectionId:r})}),(0,ze.jsxs)("div",{className:Yo.headerRight,children:[(0,ze.jsx)(Qr,{}),(0,ze.jsx)(qi,{})]})]}),o]})}var To=c(v(),1);var At=c(v(),1);var Yl=c(v(),1);var Za={toggleContainer:"SXZqD",darkMode:"_3vGqO",lightMode:"IeVLg",iconColor:"m4szN"};var Ko=c(f(),1),Kl=(0,Yl.forwardRef)(function({onAppThemeToggle:t},o){let{theme:r}=Tr(),{t:n}=D();return(0,Ko.jsxs)("div",{className:Za.toggleContainer,children:[(0,Ko.jsx)(I,{icon:r==="theme-default"?"sun-line":"moon-line",className:Za.iconColor,size:"lg"}),(0,Ko.jsx)(As,{initialState:r==="theme-default",leftText:n("Light Mode"),rightText:n("Dark Mode"),onToggle:t,ref:o})]})});var Wl=c(v(),1);function zl(e,t=!1){let{featureFlags:o}=(0,Wl.useContext)(hr);return Array.isArray(e)?e.every(r=>o[r]??t):o[e]??t}var Rm=c(Uc(),1);function Ja(e,t){return`${Cr(e,"/")}/logout?return_to=${encodeURIComponent(`${t}`)}`}function fn(e){return`${e.firstName}${e.lastName?` ${e.lastName}`:""}`}var ql=c(v(),1);var Eo={dropdownItem:"_3prCG",dropdownItemText:"_7yaZc"};var Qt=c(f(),1),xm={},bm={rel:void 0,target:"_self"},ho=(0,ql.forwardRef)(({iconName:e,href:t,shouldOmitOrg:o=!1,shouldOpenNewWindow:r=!0,text:n},a)=>{let l=r?xm:bm;return(0,Qt.jsx)(Re,{className:Eo.dropdownItem,ref:a,asChild:!0,children:(0,Qt.jsx)(W,{className:Eo.dropdownLink,href:t,isExternal:r,shouldOmitOrg:o,...l,children:(0,Qt.jsxs)(g,{className:Eo.dropdownItemText,children:[(0,Qt.jsx)(I,{className:Eo.dropdownLinkIcon,name:e,mode:"line",size:"lg"}),n,r&&(0,Qt.jsx)(I,{className:Eo.dropdownLinkIcon,name:"external-link",mode:"line",size:"lg"})]})})})});var ja={accountStatus:"_7qEcp",accountStatusText:"ArpOi"};var Wo=c(f(),1);function es({accessState:e}){return(0,Wo.jsxs)("div",{className:ja.accountStatus,children:[(0,Wo.jsx)(jt,{label:e.firstName,size:Jt.SMALL}),(0,Wo.jsx)(g,{className:ja.accountStatusText,children:fn(e)})]})}var pe={dropdownTrigger:"w6x9e",avatarContainer:"mryY8",dropdownContent:"Vqvrx",dropdownGroup:"QAdrJ",dropdownItem:"ir9f7",dropdownItemContainer:"bxkzE",captionHeading:"Gn0Nk",dropdownSeparator:"WTpVA"};var ts=c(v(),1);function $l(e,t){return(0,ts.useCallback)(o=>{if(!(o.key==="ArrowDown"||o.key==="ArrowUp"))return;o.preventDefault(),o.stopPropagation(),(o.key==="ArrowUp"?e:t).current?.focus()},[e,t])}function Xl(e){return(0,ts.useCallback)(t=>{(t.key==="ArrowDown"||t.key==="ArrowUp")&&(t.preventDefault(),t.stopPropagation(),e.current?.focus())},[e])}var Zl="/api/preferredAppTheme",Jl="preferredAppTheme",jl="/language",ec="language";var os={toggleContainer:"UypTu",iconColor:"bJ0l2"};var zo=c(f(),1);function rs(){let{t:e,i18n:t}=D(),o=X({key:ec});return(0,zo.jsxs)("div",{className:os.toggleContainer,children:[(0,zo.jsx)(I,{icon:"translate",className:os.iconColor,size:"lg"}),(0,zo.jsx)(ys,{value:t.language,onValueChange:r=>{t.changeLanguage(r),o.submit({locale:r},{method:"POST",action:jl})},options:[{label:e("English"),value:"en"},{label:e("Spanish"),value:"es"},{label:e("French"),value:"fr"},{label:e("Italian"),value:"it"},{label:e("German"),value:"de"},{label:e("Swedish"),value:"sv"},{label:e("Portuguese"),value:"pt"},{label:e("Japanese"),value:"ja"}]})]})}var G=c(f(),1);function ns({accessState:e,onAppThemeToggle:t}){let o=(0,At.useRef)(null),r=(0,At.useRef)(null),n=(0,At.useRef)(null),[a,l]=(0,At.useState)(!1),{t:s}=D(),m=zl("internationalization"),u=!!e?.currentPlanType,S=te("ACCOUNTS_SITE_URL"),T=te("APP_SITE_URL"),_=te("ASM_SITE_URL"),h=(0,At.useCallback)(L=>{l(L)},[]),E=$l(o,n),R=Xl(r);return(0,G.jsxs)(ar,{open:a,onOpenChange:h,children:[(0,G.jsx)(sr,{className:pe.dropdownTrigger,children:(0,G.jsxs)("div",{className:pe.avatarContainer,children:[(0,G.jsx)(jt,{label:fn(e),size:Jt.MEDIUM,isActive:a}),(0,G.jsx)(I,{name:a?"arrow-drop-up":"arrow-drop-down",mode:"line",size:"2xl"})]})}),(0,G.jsxs)(ir,{align:"end",className:pe.dropdownContent,children:[(0,G.jsxs)(Xe,{className:pe.dropdownGroup,children:[(0,G.jsx)(Xt,{className:pe.captionHeading,asChild:!0,children:(0,G.jsx)(g,{variant:A.H4,as:"span",children:s("Welcome back")})}),(0,G.jsx)(es,{accessState:e}),(0,G.jsx)(pt,{className:pe.dropdownSeparator}),(0,G.jsx)(ho,{iconName:"user",href:`${S}/settings`,text:s("My Account"),ref:u?void 0:o,shouldOpenNewWindow:!0}),u&&(0,G.jsx)(ho,{iconName:"exchange-2",href:`${S}/settings/personal-access-tokens`,text:s("API Access"),ref:o,shouldOpenNewWindow:!0})]}),(0,G.jsx)(pt,{className:pe.dropdownSeparator}),(0,G.jsxs)(Xe,{className:pe.dropdownGroup,children:[(0,G.jsx)(Re,{className:pe.dropdownItemContainer,onKeyDown:E,onKeyUp:R,onSelect:L=>{L.preventDefault()},children:(0,G.jsx)(Kl,{onAppThemeToggle:t,ref:r})}),m&&(0,G.jsx)(rs,{})]}),(0,G.jsx)(pt,{className:pe.dropdownSeparator}),(0,G.jsxs)(Xe,{className:pe.dropdownGroup,children:[(0,G.jsx)(Xt,{children:(0,G.jsx)(g,{className:pe.captionHeading,variant:A.H4,as:"span",children:"Switch to..."})}),(0,G.jsx)(ho,{iconName:"arrow-left-right",href:_,shouldOmitOrg:!0,text:s("Attack Surface Management"),ref:n})]}),(0,G.jsx)(pt,{className:pe.dropdownSeparator}),(0,G.jsx)(Xe,{className:pe.dropdownGroup,children:(0,G.jsx)(ho,{iconName:"logout-box-r",href:Ja(S,T),shouldOpenNewWindow:!1,text:s("Logout")})})]})]})}var Yt=c(v(),1);var qo={buttonContainer:"_4aRFs",panelOffset:"QMnU7",buttonText:"lDv2l",button:"s8VII"};var $o=c(f(),1);function as({containerRef:e}){let[t,o]=(0,Yt.useState)(!1),{t:r}=D(),{isOpen:n}=Pe(),a=(0,Yt.useCallback)(()=>{let s=e?.current;if(!s)return;let m=s.clientHeight;o(s.scrollTop>m)},[e]);(0,Yt.useEffect)(()=>{let s=e?.current;if(s)return a(),s.addEventListener("scroll",a,{passive:!0}),()=>{s.removeEventListener("scroll",a)}},[e,a]);let l=(0,Yt.useCallback)(s=>{s.preventDefault();let u=window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth";e.current?.scrollTo({top:0,behavior:u})},[e]);return t?(0,$o.jsxs)("div",{className:P(qo.buttonContainer,n&&qo.panelOffset),role:"navigation","aria-label":"Scroll to top of page",children:[(0,$o.jsx)($,{iconName:"arrow-up-double",iconMode:"fill",size:me.LARGE,onClick:l,className:qo.button,"aria-label":"Scroll to top of page"}),(0,$o.jsx)(g,{variant:A.DEFAULT,className:qo.buttonText,"aria-hidden":"true",children:r("Scroll to top")})]}):null}var ve={appLayout:"CZL5V",sideNav:"IJWvu",rightContainer:"FS5Lm",header:"CRqJm",loginRegisterActions:"pLljX",loginRegisterDivider:"Amv8K",contentContainer:"_3aZJA",sideContent:"nmfiW",actions:"XvXwy",navTabs:"mfo-C",pageContent:"CAkVT"};var Kt={footerContainer:"oKIZG",innerContainer:"V53bw",helpBlurb:"_5SsQP",footerText:"RYRpQ"};var ne=c(f(),1),ss=4;function gn(){let{t:e}=D(),t=te("PRODUCT_SITE_URL"),o=te("SUPPORT_SITE_URL"),r=new Date().getUTCFullYear();return(0,ne.jsxs)("footer",{className:Kt.footerContainer,children:[(0,ne.jsxs)("div",{className:Kt.innerContainer,children:[(0,ne.jsx)(W,{size:"md",href:`${o}`,isExternal:!0,children:e("Resource Hub")}),(0,ne.jsx)(de,{variant:"dot",size:ss}),(0,ne.jsx)(W,{size:"md",href:`${t}/attack-surface-management/`,isExternal:!0,children:e("Attack Surface Management")}),(0,ne.jsx)(de,{variant:"dot",size:ss}),(0,ne.jsx)(W,{size:"md",href:`${t}/contact-government/`,isExternal:!0,children:e("Government")}),(0,ne.jsx)(de,{variant:"dot",size:ss}),(0,ne.jsx)(W,{size:"md",href:`${o}/docs/research-access-to-censys-data#/`,isExternal:!0,children:e("Research Access")})]}),(0,ne.jsxs)("div",{className:Kt.innerContainer,children:[(0,ne.jsxs)(g,{className:P(Kt.helpBlurb,Kt.footerText),children:[e("Need help?"),"\xA0\xA0",(0,ne.jsx)(W,{size:"md",href:o,isExternal:!0,children:e("Help Center")}),"\xA0or\xA0",(0,ne.jsx)(W,{size:"md",href:"mailto:support@censys.com",children:"support@censys.com"})]}),(0,ne.jsx)(de,{variant:"line--vertical"}),(0,ne.jsxs)(g,{className:Kt.footerText,children:["\xA9",r," Censys"]})]})]})}var U=c(f(),1);function Om({breadcrumbs:e}){return(0,U.jsx)(dn,{breadcrumbs:e,children:(0,U.jsx)(Pm,{})})}var Mm=({breadcrumbs:e})=>({searchHeader:(0,U.jsx)(Om,{breadcrumbs:e})});function tc({children:e,breadcrumbs:t,initialQuery:o="",slots:r={},navTabClassName:n=""}){r={...Mm({breadcrumbs:t}),...r};let a=(0,To.useRef)(null);return(0,U.jsx)(Fl,{initialValue:o,children:(0,U.jsxs)("div",{className:ve.appLayout,children:[(0,U.jsx)("div",{className:ve.sideNav,children:(0,U.jsx)(_n,{})}),(0,U.jsxs)("div",{className:ve.rightContainer,children:[(0,U.jsx)("div",{className:ve.header,children:r.searchHeader}),(0,U.jsxs)("div",{className:ve.contentContainer,ref:a,id:Xo,children:[(0,U.jsxs)("main",{children:[r.header&&(0,U.jsx)("header",{children:r.header}),r.actions&&(0,U.jsx)("section",{className:ve.actions,"aria-label":"Page Actions Section",children:r.actions}),r.navTabs&&(0,U.jsx)("div",{className:P(ve.navTabs,n),"aria-label":"Navigation tabs",children:r.navTabs}),(0,U.jsx)("section",{"aria-label":"Page Content",className:ve.pageContent,children:e}),(0,U.jsx)("div",{className:ve.sideContent,children:(0,U.jsx)(un,{})})]}),(0,U.jsx)(gn,{}),(0,U.jsx)(as,{containerRef:a})]})]})]})})}function Pm(){let e=te("ACCOUNTS_SITE_URL"),t=Dm(),{accessState:o,setAppTheme:r}=Tr(),n=X({key:Jl}),a=(0,To.useCallback)(l=>{let s=l?"theme-default":Cn.DARK_MODE;n.submit({theme:s},{method:"post",action:Zl}),r?.(s)},[n,r]);return o?(0,U.jsx)(ns,{accessState:o,onAppThemeToggle:a}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Ds,{variant:Ps.PIPE,className:ve.loginRegisterDivider}),(0,U.jsxs)("div",{className:ve.loginRegisterActions,children:[(0,U.jsx)(He,{link:{to:`${e}/login?return_to=${encodeURIComponent(t)}`},button:{iconLeft:"login-box",iconLeftMode:"line",variant:x.TERTIARY},children:"Log in"}),(0,U.jsx)(He,{link:{to:`${e}/register`},button:{iconLeft:"lock-star",iconLeftMode:"line",variant:x.PRIMARY},children:"Register"})]})]})}function Dm(){let e=nr(),t=te("APP_SITE_URL");return(0,To.useMemo)(()=>{let o=new URL(e.pathname,t);return o.search=e.search,o.hash=e.hash,o.toString()},[t,e])}var Xo="app-main-content-container";function km(){return(0,oc.useCallback)(()=>{let e=document.getElementById(Xo);if(!e)return;let o=window.matchMedia("(prefers-reduced-motion: reduce)").matches?"auto":"smooth";e.scrollTo({top:0,behavior:o})},[])}var rc=c(v(),1);function at(){let e=eo();return(0,rc.useMemo)(()=>(t,o={})=>{let{params:r={}}=o,[n,a]=t.split("?"),l=new URLSearchParams(a);e?.organizationId&&l.set(oo,e.organizationId),Object.entries(r).forEach(([m,u])=>{u!=null&&l.set(m,String(u))});let s=l.toString();return s?`${n}?${s}`:n},[e?.organizationId])}var Ue={expandableInputContainer:"_2leAj",large:"zqHRp",rounded:"L9rab",rightSlots:"_--OlM",expanded:"yTJSC",innerContentContainer:"pxaT5",controlsContainer:"ydkkT",leftSlots:"-RLhH",inputContainer:"_4vVyx",lowerContainer:"siA62"};var yo=c(v(),1),Zo=24,Um=300;function Gm(e,t,o,r,n,a){let l=o.current,s=r.current,m=n.current,u=a.current;!l||!s||!m||(e?(s.style.height=`${t}px`,m.style.height=`${t}px`,u&&(u.style.marginTop=`${Math.max(t,l.clientHeight)}px`)):(s.style.height=`${Zo}px`,m.style.height=`${Zo}px`,u&&(u.style.marginTop=`${l.clientHeight}px`)))}function nc(e,t,o){let r=e.current;if(!r)return;r.style.height="auto";let n=r.scrollHeight,a=Math.min(n,Um);o?r.style.height=`${a}px`:r.style.height=`${Zo}px`,t(a)}function ac({value:e,isExpanded:t,innerRef:o,inputContainerRef:r,inputRef:n,lowerRef:a}){let[l,s]=(0,yo.useState)(Zo);return(0,yo.useEffect)(()=>{nc(n,s,t)},[n,e,t]),(0,yo.useEffect)(()=>{let m=n.current;if(!m)return;let u=new ResizeObserver(()=>{nc(n,s,t)});return u.observe(m),()=>{u.disconnect()}},[n,t]),(0,yo.useEffect)(()=>{Gm(t,l,o,r,n,a)},[t,l]),{isMultiline:!!e&&(l>Zo||e.includes(`
`))}}function sc(e,t,o,r,n){e.key==="Enter"&&!e.shiftKey?(e.preventDefault(),r.current?.blur()):e.key==="Escape"&&t&&o.current?.focus(),n?.(e)}var he=c(f(),1);function wm({size:e="medium",variant:t="default",slots:o,value:r,setValue:n,shouldForceOpen:a,onClickOutside:l,onInput:s,onKeyDown:m,onChange:u,placeholder:S="Enter text here...",className:T,..._},h){let[E,R]=(0,w.useState)(!1),L={inner:(0,w.useRef)(null),inputContainer:(0,w.useRef)(null),input:(0,w.useRef)(null),lower:(0,w.useRef)(null),controls:(0,w.useRef)(null),toggle:(0,w.useRef)(null)},i=Nn();(0,w.useImperativeHandle)(h,()=>L.input.current);let{isMultiline:p}=ac({value:r,isExpanded:E,innerRef:L.inner,inputContainerRef:L.inputContainer,inputRef:L.input,lowerRef:L.lower}),d=(0,w.useMemo)(()=>({size:e==="medium"?me.SMALL:me.MEDIUM,variant:x.GHOST,shape:Ze.SQUARE,type:"button",iconMode:"line"}),[e]),C=(0,w.useCallback)(()=>{u?.({target:{value:""}}),n(""),L.input.current?.focus()},[n,u]),y=(0,w.useCallback)(()=>{R(N=>!N)},[]),b=(0,w.useCallback)(()=>{p&&R(!0)},[p]),k=(0,w.useCallback)(()=>{i.shouldSkip()||a||(L.input.current&&(L.input.current.scrollTop=0),R(!1))},[a]),K=(0,w.useCallback)(N=>{sc(N,E,L.toggle,L.input,m)},[E,m]),B=(0,w.useCallback)(N=>{n(N.target.value),u?.(N)},[n,u]),Q=(0,w.useCallback)(()=>{i.suppressOnce()},[]);return(0,w.useEffect)(()=>{a||R(!1)},[a]),(0,w.useEffect)(()=>{(L.input.current&&document.activeElement===L.input.current||a)&&R(p)},[p,a]),(0,w.useEffect)(()=>{let N=z=>{!!L.lower.current?.contains(z.target)||!!L.input.current?.contains(z.target)||!!L.controls.current?.contains(z.target)||(l?.(),R(!1))};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[E,l]),(0,he.jsxs)("div",{className:P(T,Ue.expandableInputContainer,Ue[e],Ue[t]),children:[(0,he.jsxs)("div",{className:Ue.innerContentContainer,ref:L.inner,children:[o?.left&&(0,he.jsx)("div",{className:Ue.leftSlots,children:o.left}),(0,he.jsx)("div",{className:Ue.inputContainer,ref:L.inputContainer,children:(0,he.jsx)("textarea",{..._,className:P(E&&Ue.expanded),ref:L.input,value:r,onChange:B,placeholder:S,rows:1,onKeyDown:K,onFocus:b,onBlur:k})}),!!r&&(0,he.jsxs)("div",{className:Ue.controlsContainer,ref:L.controls,children:[(0,he.jsx)(mt,{content:"Clear",tabIndex:-1,children:(0,he.jsx)($,{...d,name:"clear","aria-label":"Clear input value",iconName:"close",iconMode:"line",onMouseDown:Q,onClick:C})}),p&&(0,he.jsx)(mt,{content:E?"Collapse":"Expand",tabIndex:-1,children:(0,he.jsx)($,{...d,ref:L.toggle,name:"expand-control","aria-label":`${E?"Collapse":"Expand"} input field`,"aria-expanded":E,iconName:E?"collapse-diagonal":"expand-diagonal",iconMode:"line",onMouseDown:Q,onClick:y})})]}),o?.right&&(0,he.jsx)("div",{className:Ue.rightSlots,children:o.right})]}),(0,he.jsx)("div",{ref:L.lower,className:Ue.lowerContainer,children:o?.bottom})]})}var is=(0,w.forwardRef)(wm);var Ac=c(v(),1);var ic={pill:"Fi4VD"};var ls=c(f(),1);function cs(){return(0,ls.jsx)(Ms,{className:ic.pill,size:"sm",children:(0,ls.jsx)(Ar,{})})}var lc="This is a regular expression (Regex) query";var ps={advancedContainer:"Zfc79",header:"iAxfV"};var Ct=c(f(),1);function cc({hasAdvancedQueryAccess:e}){let{t}=D(),o=te("SUPPORT_SITE_URL");return(0,Ct.jsxs)("div",{className:ps.advancedContainer,children:[(0,Ct.jsxs)("div",{className:ps.header,children:[(0,Ct.jsx)(g,{variant:A.H3,children:"Advanced Query"}),!e&&(0,Ct.jsx)(cs,{})]}),(0,Ct.jsx)(g,{variant:A.SMALL,children:lc}),(0,Ct.jsx)(W,{size:"sm",href:`${o}/docs/censys-query-language#/`,isExternal:!0,children:t("Learn more")})]})}var qe={indicator:"UuMtG",indicatorWithLabel:"KkT80",legacy:"YYuo1",initial:"cTEK2",invalid:"bpiwh",valid:"P0vLJ",indicatorLabel:"Z6w3M",fadeIn:"xKDpM"};var Jo=c(f(),1),pc={["INITIAL"]:{indicatorProps:{["data-testid"]:`indicator-icon_${"INITIAL"}`,role:void 0,["aria-live"]:"off"},iconProps:{className:qe.initial,name:"search",mode:"line",["aria-hidden"]:!0}},["INVALID"]:{indicatorProps:{["data-testid"]:`indicator-icon_${"INVALID"}`,role:"status",["aria-live"]:"polite",["aria-label"]:"Syntax error detected. Open for details"},iconProps:{className:qe.invalid,name:"close-circle",mode:"fill"}},["VALID"]:{indicatorProps:{["data-testid"]:`indicator-icon_${"VALID"}`,role:"status",["aria-live"]:"polite",["aria-label"]:"No syntax errors detected"},iconProps:{className:qe.valid,name:"checkbox-circle",mode:"fill"}},["VALID_ADVANCED"]:{indicatorProps:{["data-testid"]:`indicator-icon_${"VALID_ADVANCED"}`,role:"status",["aria-live"]:"polite",["aria-label"]:"Advanced query with no syntax errors detected"},iconProps:{className:qe.valid,name:"checkbox-circle",mode:"fill"}},["INVALID_ADVANCED"]:{indicatorProps:{["data-testid"]:`indicator-icon_${"INVALID_ADVANCED"}`,role:"status",["aria-live"]:"polite",["aria-label"]:"Advanced query with syntax error detected. Open for details"},iconProps:{className:qe.invalid,name:"close-circle",mode:"fill"}},["LEGACY_QUERY"]:{indicatorProps:{["data-testid"]:`indicator-icon_${"LEGACY_QUERY"}`,role:"status",["aria-live"]:"polite",["aria-label"]:"Legacy query syntax detected. Open for details"},iconProps:{className:qe.legacy,name:"alert",mode:"fill"}}};function us({status:e}){let t=e==="INVALID_ADVANCED"||e==="VALID_ADVANCED";return(0,Jo.jsxs)("div",{...pc[e].indicatorProps,className:P(qe.indicator,t&&qe.indicatorWithLabel),children:[(0,Jo.jsx)(I,{...pc[e].iconProps,size:"lg"}),t&&(0,Jo.jsx)(g,{className:qe.indicatorLabel,variant:A.SMALL,children:"Advanced"})]})}var Sn=c(v(),1);var Y={popover:"_0L8rh",popoverWrapper:"_5lk6X",dismissButton:"qTrPy",container:"XyG-a",content:"n-7Wr",errorContent:"SZivP",validContainer:"wJ35h",validText:"Q0-1-",list:"MrXHX",syntaxErrorList:"jZtZj",syntaxErrorText:"cHu9H",errorLocationList:"bj-Ae",errorLocationListItem:"mqzNP",errorLocationLineNumber:"CI28R",errorLocationMsg:"sC9zW",errorIcon:"BHJx6",learnMoreButton:"zd0W-",messageContent:"_2FjaH"};var Wt=c(f(),1),mc=({errorLines:e})=>(0,Wt.jsx)("ol",{className:P(Y.list,Y.errorLocationList),"data-testid":"error-location-list","aria-hidden":!0,children:e.map(({lineNumber:t,hasError:o,line:r})=>(0,Wt.jsxs)("li",{className:Y.errorLocationListItem,"aria-describedby":`syntax-error-${t}`,children:[o&&(0,Wt.jsx)(I,{name:"close-circle",mode:"fill",className:Y.errorIcon}),(0,Wt.jsx)(g,{className:Y.errorLocationLineNumber,children:t}),(0,Wt.jsx)(g,{className:Y.errorLocationMsg,children:r})]},t))});var jo=c(f(),1),uc=({errorLines:e})=>(0,jo.jsx)("ol",{className:P(Y.list,Y.syntaxErrorList),"data-testid":"syntax-error-list",children:e.filter(({syntaxError:t})=>t).map(({lineNumber:t,syntaxError:o})=>(0,jo.jsx)("li",{children:(0,jo.jsxs)(g,{id:`syntax-error-${t}`,variant:A.SMALL,className:Y.syntaxErrorText,"aria-label":`Line ${t} has error ${o}`,children:["Line ",t,": ",o]})},t))});var dc="Query syntax is valid",fc="Syntax Validation",gc="Syntax Error",Sc="Legacy Query Syntax Detected",Ec="https://docs.censys.com/docs/censys-query-language";var er=c(f(),1),hc=()=>{let{t:e}=D();return(0,er.jsxs)("div",{className:Y.validContainer,children:[(0,er.jsx)(I,{name:"checkbox-circle",mode:"fill"}),(0,er.jsx)(g,{className:Y.validText,children:e(dc)})]})};var Tc=(e,t)=>{if(!t.length)return[];let o=t.sort((a,l)=>(a.Position?.offset??0)-(l.Position?.offset??0)),r=0,n=o.reduce((a,{message:l,Position:s})=>{let{offset:m=0,offset_end:u=0}=s??{};return r<m&&a.push({hasError:!1,line:e.slice(r,m).trim(),lineNumber:a.length+1,syntaxError:""}),a.push({hasError:!0,line:e.slice(m,u).trim(),lineNumber:a.length+1,syntaxError:l}),r=u,a},[]);return r<e.length&&n.push({hasError:!1,line:e.slice(r).trim(),lineNumber:n.length+1,syntaxError:""}),n};var H=c(f(),1),Hm={popover:Y.popover,contentWrapper:Y.popoverWrapper,dismissButton:Y.dismissButton};function ds({children:e,query:t,statusIndicator:o,syntaxErrors:r,isLegacyQuery:n,onOpenSyntaxPopover:a}){let{t:l}=D(),s=ue("auto-legacy-query-conversion"),[m,u]=(0,Sn.useState)(!1),S=(0,Sn.useMemo)(()=>n?[]:Tc(t,r),[t,r,n]),T=E=>{E?(u(!0),a?.()):u(!1)},_,h;return n?(_=Sc,h=s?(0,H.jsx)("div",{className:Y.messageContent,children:(0,H.jsx)(An,{variant:yn.INFO,children:(0,H.jsxs)("div",{children:[_o,(0,H.jsx)(g,{variant:A.DEFAULT_SEMIBOLD,children:(0,H.jsx)(gr,{timestamp:vo,format:"MMMM DD, YYYY"})}),".",(0,H.jsx)(Pt,{to:Io,isExternal:!0,children:"Learn About Platform Syntax"})]})})}):(0,H.jsx)("div",{className:Y.messageContent,children:(0,H.jsx)(An,{variant:yn.INFO,actions:[(0,H.jsx)(He,{link:{to:`/home/query-converter?legacyQuery=${encodeURIComponent(t)}`},button:{iconRight:"arrow-right",iconRightMode:"line",onClick:()=>u(!1)},children:l("Query Converter")},"query-converter-link")],children:(0,H.jsxs)("div",{children:["Convert legacy queries to new"," ",(0,H.jsx)(g,{variant:A.DEFAULT_SEMIBOLD,children:"Platform"})," ","syntax"]})})})):(_=S.length?l(gc):l(fc),S.length===0?h=(0,H.jsx)(hc,{}):h=(0,H.jsx)(Bm,{errorLines:S})),(0,H.jsx)(Us,{contentProps:{align:"start",alignOffset:-11,sideOffset:8.5},modal:!0,isDismissible:!0,side:"bottom",customClassNames:Hm,trigger:(0,H.jsx)("div",{children:o}),onOpenChange:T,open:m,children:(0,H.jsxs)("div",{className:Y.container,"data-testid":"popover-content",children:[(0,H.jsx)(g,{variant:A.H2,children:_}),(0,H.jsxs)("div",{className:Y.content,children:[h,e]})]})})}var Bm=({errorLines:e})=>{let{t}=D();return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("div",{className:Y.errorContent,tabIndex:0,children:[(0,H.jsx)(uc,{errorLines:e}),(0,H.jsx)(mc,{errorLines:e})]}),(0,H.jsx)(He,{link:{to:Ec,isExternal:!0},button:{variant:x.TERTIARY,iconRight:"external-link",className:Y.learnMoreButton,size:It.SMALL},children:t("Learn about the Censys Query Language")})]})};var yc=(e,t,o)=>{if(e.length===0)return"INITIAL";let r=o?.isAdvancedQuery||!1;return Fs(e)||Hs(e)?r?"VALID_ADVANCED":"VALID":o?.isLegacyQuery?"LEGACY_QUERY":t.length>0?r?"INVALID_ADVANCED":"INVALID":r?"VALID_ADVANCED":"VALID"};var En=c(f(),1);function fs({hasAdvancedQueryAccess:e,inputQuery:t,queryDetails:o,syntaxErrors:r,onOpenSyntaxPopover:n}){let a=(0,Ac.useMemo)(()=>yc(t,r,o),[r,t,o]),l=(0,En.jsx)(us,{status:a});return a==="INITIAL"?l:(0,En.jsx)(ds,{query:t,syntaxErrors:r,statusIndicator:l,onOpenSyntaxPopover:n,isLegacyQuery:o?.isLegacyQuery||!1,children:o?.isAdvancedQuery&&!o?.isLegacyQuery&&(0,En.jsx)(cc,{hasAdvancedQueryAccess:e})})}var gs={inputContainer:"n4D0h",withListbox:"L9yX8"};var zt=c(v(),1);var Cc="/api/search-history",Lc="search-history";var _c=()=>{let t=!!yr(),o=X({key:Lc}),r=(0,zt.useCallback)(()=>{t&&o.load(Cc)},[o.load,t]);(0,zt.useEffect)(()=>{r()},[r]);let n=(0,zt.useMemo)(()=>(o.data?.recentSearches||[]).map(l=>({...l,shouldCloseListBoxOnSelect:!0})),[o.data?.recentSearches]),a=o.state==="loading";return(0,zt.useMemo)(()=>({recentSearches:n,isLoading:a,fetchSearchHistory:r}),[n,a,r])};var qt=c(v(),1);function vc(e){let t=[];e.suggestions.forEach((r,n)=>{let{edit:a,restricted:l,suggested_text:s}=r;if(a){let m={from:a.replace_from,to:a.replace_to,value:a.replacement};t.push({id:`api-response-suggestion-${n}`,isLocked:l,value:s,replacement:m})}});let o;return e.full_document_query&&e.full_document_query!==In&&(o={id:vn,value:e.full_document_query,shouldCloseListBoxOnSelect:!0}),{autocomplete:t,errors:e.errors,hasAdvancedQueryAccess:e.hasAdvancedQueryAccess,details:{isAdvancedQuery:e.details?.regex_present||!1,isLegacyQuery:e.legacy_query_detected},exactMatch:o}}function Ic({inputValue:e,hasSuggestions:t,hasDefaultSuggestions:o,isLoadingSuggestions:r}){return e?t||r:o}function Nc({hasContent:e,isListBoxTriggered:t}){return t&&e}function Rc(e,t,o,r,n,a,l){let s=[...e];l&&s.unshift(...l),a&&s.unshift(a),o&&s.unshift(...o),t&&s.push(t);let m=[];return r&&m.push(...r),n?.queries&&m.push(...n.queries),{listBoxSuggestions:s,listBoxDefaults:m.length?m:void 0}}function xc(e,t,o,r,n,a){if(e.key==="Escape"||e.key==="Enter"&&!e.shiftKey){e.key==="Enter"&&!e.shiftKey&&a?.(),o(!1);return}if((e.key==="ArrowDown"||e.key==="ArrowUp"||e.key.length===1&&!e.ctrlKey&&!e.metaKey)&&!t){o(!0);return}if(e.key==="ArrowDown"||e.key==="ArrowUp"){r.current?.focus(),n(e.key==="ArrowDown"?0:-1);return}}var bc=({query:e="",onSelectExactMatch:t})=>{let[o,r]=(0,qt.useState)(`q=${e}`),n=Qs(()=>`/api/suggestions?${o}`,[o]),a=(0,qt.useCallback)((_,h)=>{r(new URLSearchParams([["q",_],["cursorPosition",h.toString()]]).toString())},[]),{autocomplete:l=[],errors:s=[],hasAdvancedQueryAccess:m=!0,details:u,exactMatch:S}=(0,qt.useMemo)(()=>{if(n.data){let _=vc(n.data);return t&&_.exactMatch&&(_.exactMatch={..._.exactMatch,onSelect:t}),_}return{}},[n.data?.suggestions,t]),T=n.state===0&&l.length===0&&s.length===0;return(0,qt.useMemo)(()=>({autocomplete:l,errors:s,details:u,exactMatch:S,getSuggestions:a,hasAdvancedQueryAccess:m,isLoading:T}),[l,s,u,m,S,a,T])};var Lt=c(f(),1);function ma({id:e,name:t,inputLabel:o,onEnterKeyDown:r,onChange:n,placeholder:a,size:l,variant:s,rightInputSlot:m,rightContainerSlot:u,initialValue:S="",defaultSuggestions:T,contextSuggestions:_,isLoading:h,onIsValidChange:E}){let R=`${e}-suggestions-listbox`,L=(0,ee.useRef)(null),i=(0,ee.useRef)(null),[p,d]=(0,ee.useState)(S),{autocomplete:C=[],errors:y=[],hasAdvancedQueryAccess:b,details:k,exactMatch:K,getSuggestions:B,isLoading:Q}=bc({query:p,onSelectExactMatch:r}),{queryAssistantSuggestion:N,queryAssistantState:z,generatedQueryId:q}=aa(p,e,!!y.length,!!k?.isLegacyQuery),{queryConverterSuggestions:Ge,queryConverterState:it}=ca(p,e,!!k?.isLegacyQuery),{recentSearches:Ie,isLoading:$e,fetchSearchHistory:we}=_c(),{listBoxSuggestions:_t,listBoxDefaults:$t}=(0,ee.useMemo)(()=>Rc(C,K,_,Ie,T,N,Ge),[C,K,_,Ie,T,N,Ge]),[lt,Ne]=(0,ee.useState)(!1),ie=(0,ee.useCallback)(()=>Ne(!1),[]),ct=(0,ee.useCallback)(()=>{Ne(!0)},[]),Ao=(0,ee.useCallback)(vt=>{d(vt??""),n?.({target:{value:vt},currentTarget:L.current})},[n,d]),{activeDescendantId:tr,setActiveDescendantId:hn,tempInputValue:Mc,setInputValueById:Pc,selectOptionByIndex:Ss}=Rr({suggestions:_t,defaultSuggestions:$t,inputValue:p,setInputValue:Ao,inputRef:L,handleCloseListBox:ie}),or=Bs({value:p,delay:250}),rr=Nc({hasContent:Ic({inputValue:p,hasSuggestions:!!_t.length,hasDefaultSuggestions:!!$t,isLoadingSuggestions:Q}),isListBoxTriggered:lt}),Dc=(0,ee.useCallback)(vt=>{n?.(vt);let{value:Tn}=vt.target;d(Tn),Tn===""&&(B(Tn,0),we())},[n,d,B,we]),Es=(0,ee.useCallback)(()=>{r?.()},[r]),kc=(0,ee.useCallback)(vt=>{xc(vt,lt,Ne,i,Ss,Es)},[lt,i,Ss,Es]);return(0,ee.useEffect)(()=>{or&&L.current&&B(or,L.current.selectionStart||or.length)},[or,B]),(0,ee.useEffect)(()=>{d(S)},[S,d]),(0,ee.useEffect)(()=>{E?.(y.length===0)},[y.length,E]),(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)(is,{className:P(gs.inputContainer,rr&&gs.withListbox),ref:L,id:e,name:t,"aria-label":o,value:Mc||p,setValue:d,onChange:Dc,onKeyDown:kc,onClick:ct,size:l,variant:s,"aria-invalid":!!y.length,role:"combobox","aria-autocomplete":"list",autoComplete:"off",spellCheck:"false","aria-controls":R,"aria-activedescendant":tr,"aria-expanded":rr,placeholder:a,"aria-busy":h,onClickOutside:ie,shouldForceOpen:rr,slots:{left:(0,Lt.jsx)(fs,{hasAdvancedQueryAccess:b,inputQuery:p,queryDetails:k,syntaxErrors:y,onOpenSyntaxPopover:ie}),right:m,bottom:rr&&(0,Lt.jsx)(pa,{inputId:e,listBoxId:R,inputRef:L,ref:i,autocomplete:C,exactMatch:K,inputValue:p,defaults:T,contexts:_,recentSearches:Ie,queryAssistantState:z,queryAssistantSuggestion:N,generatedQueryId:q,queryConverterState:it,queryConverterSuggestions:Ge,setActiveDescendantId:hn,selectedOptionId:tr,onSelectOption:Pc,isLoading:Q,isLoadingRecentSearches:$e,handleCloseListBox:ie})}}),u?.({query:p,isValid:y.length===0})]})}export{wc as a,Gc as b,ti as c,NS as d,Hi as e,Io as f,ma as g,xn as h,vl as i,_m as j,Bl as k,dn as l,fn as m,Om as n,tc as o,Pm as p,km as q};
