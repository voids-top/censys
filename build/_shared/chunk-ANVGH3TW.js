import{c as b}from"/censys/build/_shared/chunk-X5LNCAS5.js";import{a as te}from"/censys/build/_shared/chunk-3JU625ZU.js";import{v}from"/censys/build/_shared/chunk-W5Y6TOHF.js";import{a as ae}from"/censys/build/_shared/chunk-WK35ORSL.js";import{a as oe}from"/censys/build/_shared/chunk-HG7D3PDC.js";import{b as E,c as N}from"/censys/build/_shared/chunk-G6DKMBFA.js";import{a as de,b as pe}from"/censys/build/_shared/chunk-V6YEAJYZ.js";import{b as ie,d as ne,m as se,u as le}from"/censys/build/_shared/chunk-YZ2VHXR4.js";import{a as j,d as J,e as ee,f as re}from"/censys/build/_shared/chunk-FH7VNUY3.js";import{A as n,B as s,C as k,G as z,I as G,ba as w,ca as V,da as W,ka as K,la as Y,ma as q,na as $,ua as Z,va as X,y as H,z as Q}from"/censys/build/_shared/chunk-UYH4GQ7Z.js";import{a as T,c as g}from"/censys/build/_shared/chunk-XJAPXWKX.js";import{d as m}from"/censys/build/_shared/chunk-2QEWK57A.js";var he=m(T(),1);var ce=["var(--color-theme-chart-categorical-1, #2D7E81)","var(--color-theme-chart-categorical-2, #FFBD7C)","var(--color-theme-chart-categorical-3, #3BBFDE)","var(--color-theme-chart-categorical-4, #FFAE62)","var(--color-theme-chart-categorical-5, #C60F7A)","var(--color-theme-chart-categorical-6, #B6D5D4)","var(--color-theme-chart-categorical-7, #1B4C4D)","var(--color-theme-chart-categorical-8, #0D91B0)"],U={light:[...ce],dark:[...ce]};var O={usageBySection:"S9x7t",helpContent:"aEeXO"};function ve(p,c){if(!p?.data)return[];let r=Object.values(p.data).flatMap(o=>Array.isArray(o)?o.map(([l,u])=>({id:l,value:Number(u.value),fill:""})):[]).filter(ae).sort((o,l)=>l.value-o.value),i=r.reduce((o,l)=>o+l.value,0);return r.map((o,l)=>({...o,fill:c[l],value:i===0?0:Number((o.value/i*100).toFixed(1))}))}function D(p,c,r){let i=re(),o=te(()=>`/api/credits/${p?"org/":""}${c}`,[i?.organizationId]);return{data:ve(o.data,r),isLoading:o.state===0,isError:o.state===2}}var L=m(T(),1);var me=m(T(),1);var B={chartContainer:"SQM4W",legendItem:"b5Qns",legendItemIcon:"_6T88w",loading:"po2WU",pulseRing:"i49GV"};var d=m(g(),1),Te={top:0,right:0,bottom:0,left:0};function M({data:p,innerRadius:c=.7,outerRadius:r=1,padAngle:i=0,children:o,className:l,showTooltips:u=!0,isLoading:f=!1}){let h=(0,me.useRef)(null);return(0,d.jsx)(ie,{children:(0,d.jsx)("div",{className:H(B.chartContainer,l),ref:h,children:f?(0,d.jsx)("div",{className:B.loading}):(0,d.jsxs)(d.Fragment,{children:[u&&(0,d.jsx)(le,{className:B.tooltipContainer,render:({data:y})=>y?(0,d.jsx)(pe,{children:(0,d.jsx)(de,{title:y.id,subtitle:`${y.value}%`})}):(0,d.jsx)(d.Fragment,{}),offsetY:10}),(0,d.jsx)(ne,{ref:h,children:(0,d.jsx)(se,{ref:h,data:p,variant:"FULL",innerRadius:c,outerRadius:r,padAngle:i,margin:Te,children:o})})]})})})}var ue=m(T(),1);var P={modalContent:"N3l5B",modalTitle:"OuV8o"};var R=m(g(),1);function S({onClose:p=()=>{},isOpen:c=!1,title:r="Help Modal",size:i=K.MEDIUM,headerBorder:o=Y.NONE,footerBorder:l=q.NONE,children:u}){let f=(0,ue.useCallback)(h=>{h||p()},[p]);return(0,R.jsx)($,{includeCloseButton:!0,onOpenChange:f,open:c,size:i,headerBorder:o,footerBorder:l,header:typeof r=="string"?(0,R.jsx)(s,{variant:n.H3,className:P.modalTitle,children:r}):r,children:(0,R.jsx)("div",{className:P.modalContent,children:u})})}var t={wrapper:"qdQIy",body:"Mx-GN",container:"l-iQZ",spinner:"_7cj-b",content:"Vj4On",header:"SuQLF",headerLeft:"Yix3U",headerRight:"_-7DdT",helpButton:"_5SeS3",headerText:"acqVv",headerSubText:"Snak0",chart:"rFh3j",legends:"LbMRQ",legendItem:"fbEyq",legendItemColor:"CAnAZ",legendItemText:"ABYFS"};var e=m(g(),1);function A({title:p,subHeading:c,showHelpModal:r=!0,data:i,padAngle:o=.05,helpContent:l,isLoading:u,isError:f,helpTitle:h,showLegends:y=!0,showTooltips:I=!0,errorCode:ge=1e5}){let{t:x}=N(),F=(0,L.useMemo)(()=>i?.length?i.map(C=>({...C,id:x(C.id)})):[],[i,x]),[fe,_]=(0,L.useState)(!1),ye=()=>{_(!0)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S,{isOpen:fe,onClose:()=>{_(!1)},title:h,children:(0,e.jsx)(s,{variant:n.DEFAULT,children:l})}),(0,e.jsx)("div",{className:t.wrapper,children:(0,e.jsxs)(X,{bodyPadding:Z.NONE,className:t.container,children:[(0,e.jsxs)("div",{className:t.header,children:[(0,e.jsxs)("div",{className:t.headerLeft,children:[(0,e.jsx)(s,{variant:n.H4,className:t.headerText,children:p}),c&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(oe,{variant:"line--vertical",spacing:8}),(0,e.jsx)(s,{variant:n.H5,className:t.headerSubText,children:c})]})]}),r&&(0,e.jsx)("div",{className:t.headerRight,children:(0,e.jsx)(W,{iconName:"question",iconMode:"line",className:t.helpButton,shape:V.ROUND,variant:k.TERTIARY,size:w.LARGE,type:"button","aria-label":"Open credit usage help modal",onClick:ye})})]}),(0,e.jsx)("div",{className:t.body,children:u?(0,e.jsx)("div",{className:t.spinner,children:(0,e.jsx)(G,{size:z.LARGE})}):f?(0,e.jsx)(b,{errorCode:ge}):i===void 0||i?.length===0?(0,e.jsx)(b,{errorCode:14e4}):(0,e.jsxs)("div",{className:t.content,children:[(0,e.jsx)("div",{className:t.chart,children:(0,e.jsx)(M,{padAngle:o,data:F,showTooltips:I})}),(0,e.jsx)("div",{className:t.legends,children:y&&F.map((C,Ce)=>(0,e.jsxs)("div",{className:t.legendItem,children:[(0,e.jsxs)("div",{className:t.legendItemColor,children:[(0,e.jsx)(Q,{name:"checkbox-blank-circle",mode:"fill",style:{color:C.fill}}),(0,e.jsx)(s,{variant:n.DEFAULT,className:t.legendItemText,children:C.id})]}),(0,e.jsx)("div",{className:t.legendItemValue,children:(0,e.jsxs)(s,{variant:n.DEFAULT_SEMIBOLD,children:[C.value,"%"]})})]},`${C.id}-${Ce}`))})]})})]})})]})}var a=m(g(),1);function De({isOrgView:p=!1}){let c=ee()?.currentPlanType==="Enterprise",{t:r}=N(),{theme:i}=J(),o=(0,he.useMemo)(()=>i===j.DARK_MODE?U.dark:U.light,[i]),{data:l,isLoading:u,isError:f}=D(p,"usageByQuery",[...o]),{data:h,isLoading:y,isError:I}=D(p,"usageByInterface",[...o]);return(0,a.jsxs)("div",{className:O.usageBySection,children:[(0,a.jsx)(A,{title:r("Query Credit Consumption"),subHeading:r("Past 30 Days"),isLoading:u,isError:f,data:l,helpTitle:r("Query Credit Consumption"),errorCode:140001,helpContent:(0,a.jsxs)("div",{className:O.helpContent,children:[(0,a.jsx)(s,{as:"p",variant:n.DEFAULT,children:r("When you execute a search in the Platform or API, it consumes credits.")}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:[(0,a.jsx)(s,{variant:n.DEFAULT_SEMIBOLD,children:r("Entity Lookup")}),":\xA0",(0,a.jsx)(E,{i18nKey:"Consumes <0>{{creditsNum}}</0> credit.",components:[(0,a.jsx)(s,{variant:n.DEFAULT_SEMIBOLD})],count:v.entityLookup,values:{creditsNum:v.entityLookup}}),(0,a.jsx)("br",{}),r("A search for a specific entity\u2014such as an organization, domain, certificate, or host etc.")]}),(0,a.jsxs)("li",{children:[(0,a.jsx)(s,{variant:n.DEFAULT_SEMIBOLD,children:r("Standard Queries")}),":"," ",(0,a.jsx)(E,{i18nKey:"Consumes <0>{{creditsNum}}</0> credit.",components:[(0,a.jsx)(s,{variant:n.DEFAULT_SEMIBOLD})],count:v.standardQueries,values:{creditsNum:v.standardQueries}}),(0,a.jsx)("br",{}),r("A query that doesn't use regular expressions (regex).")]}),(0,a.jsxs)("li",{children:[(0,a.jsx)(s,{variant:n.DEFAULT_SEMIBOLD,children:r("Advanced Queries")}),":"," ",(0,a.jsx)(E,{i18nKey:"Consumes <0>{{creditsNum}}</0> credit.",components:[(0,a.jsx)(s,{variant:n.DEFAULT_SEMIBOLD})],count:v.advancedQueries,values:{creditsNum:v.advancedQueries}}),(0,a.jsx)("br",{}),r("Typically, a search that leverages one or more regular expressions.")]})]})]})}),!c&&(0,a.jsx)(A,{title:r("Usage by Interface"),subHeading:r("Past 30 Days"),showHelpModal:!1,isLoading:y,isError:I,data:h,errorCode:140002})]})}export{De as a};
