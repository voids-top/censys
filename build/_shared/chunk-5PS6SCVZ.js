import{a as x}from"/censys/build/_shared/chunk-XJAPXWKX.js";import{d as E}from"/censys/build/_shared/chunk-2QEWK57A.js";var i=E(x(),1),N=e=>e&&e.trim();function F(e,a,l){let t=N(l),n=e[a].safeParse(t);return n.success?{sanitizedValue:t}:{sanitizedValue:t,error:n.error.errors[0]?.message}}function z(e,a){let l={values:{...a.values},errors:{}},t=!0;return Object.keys(a.values).forEach(n=>{let{sanitizedValue:c,error:m}=F(e,n,a.values[n]?.toString()||"");l.values[n]=c,m&&(l.errors[n]=m,t=!1)}),{isValid:t,updatedFormState:l}}function V(e,a){return Object.keys(e).map(t=>{let n=e[t];return a.values[t]!==n}).some(t=>t===!0)}function k(e,a,l,t,n){let[c,m]=(0,i.useState)({values:a,errors:{}}),[v,g]=(0,i.useState)(!1),p=(0,i.useMemo)(()=>!Object.keys(c.values).map(s=>{let u=c.values[s];return F(e,s,u).error}).some(s=>s),[c.values]),y=(0,i.useCallback)((o,r)=>{m(s=>{let u={...s,values:{...s.values,[o]:typeof r=="function"?r(s.values[o]):r},errors:{...s.errors,[o]:F(e,o,typeof r=="function"?r(s.values[o]):r).error}};return g(V(a,u)),u})},[]),h=(0,i.useCallback)(o=>{let{name:r,value:s}=o.target;y(r,s)},[c]),S=(0,i.useCallback)((o,r)=>{o.preventDefault(),o.stopPropagation();let u=new FormData(o.currentTarget).get("csrf"),{isValid:f,updatedFormState:d}=z(e,c);f&&(n?t({...d.values,...r},{method:"get"}):u&&t({...d.values,csrf:u,fetcherKey:l},{method:"post",fetcherKey:l,navigate:!1})),m(d),g(!1)},[c,p,t]),T=(0,i.useCallback)(o=>{let{name:r,value:s}=o.target,{sanitizedValue:u,error:f}=F(e,r,s);m(d=>({...d,values:{...d.values,[r]:u},errors:{...d.errors,[r]:f}}))},[]);return{formState:c,isDirty:v,isValid:p,handleChange:h,handleValueChange:y,handleSubmit:S,handleBlur:T}}export{k as a};
