import{c as U}from"/censys/build/_shared/chunk-5PKHBRVZ.js";import{a as le,b as de}from"/censys/build/_shared/chunk-4KKS33MW.js";import{b as oe,d as ie,m as ne,u as se}from"/censys/build/_shared/chunk-IUMSQHOS.js";import{a as te}from"/censys/build/_shared/chunk-7C4UGOB7.js";import{v}from"/censys/build/_shared/chunk-4DOFQKLI.js";import{a as ae}from"/censys/build/_shared/chunk-M5RKE22T.js";import{a as J,d as j,e as ee,f as re}from"/censys/build/_shared/chunk-ST66DGSY.js";import{A as s,B as k,H as z,J as G,aa as w,ba as V,ca as W,la as K,ma as Y,na as q,oa as $,wa as Z,x as H,xa as X,y as Q,z as n}from"/censys/build/_shared/chunk-DN2SN5ZC.js";import{b as E,c as D}from"/censys/build/_shared/chunk-F5K75D4K.js";import{b as u}from"/censys/build/_shared/chunk-ZST4CTCB.js";import{a as T}from"/censys/build/_shared/chunk-MOHCJWAV.js";import{e as c}from"/censys/build/_shared/chunk-2TWE7TSA.js";var ue=c(T(),1);var pe=["var(--color-theme-chart-categorical-1, #2D7E81)","var(--color-theme-chart-categorical-2, #FFBD7C)","var(--color-theme-chart-categorical-3, #3BBFDE)","var(--color-theme-chart-categorical-4, #FFAE62)","var(--color-theme-chart-categorical-5, #C60F7A)","var(--color-theme-chart-categorical-6, #B6D5D4)","var(--color-theme-chart-categorical-7, #1B4C4D)","var(--color-theme-chart-categorical-8, #0D91B0)"],b={light:[...pe],dark:[...pe]};var O={usageBySection:"S9x7t",helpContent:"aEeXO"};function Ce(l,p){if(!l?.data?.length)return[];let r=l.data.reduce((t,i)=>t+i.value,0);return l.data.map((t,i)=>({id:t.label,value:r===0?0:Number((t.value/r*100).toFixed(1)),fill:p[i]??p[p.length-1]??""}))}function N(l,p,r){let t=re(),i=te(()=>`/api/credits/${l?"org/":""}${p}`,[t?.organizationId]);return{data:Ce(i.data,r),isLoading:i.state===0,isError:i.state===2}}var R=c(T(),1);var ce=c(T(),1);var B={chartContainer:"SQM4W",legendItem:"b5Qns",legendItemIcon:"_6T88w",loading:"po2WU",pulseRing:"i49GV"};var d=c(u(),1),ve={top:0,right:0,bottom:0,left:0};function M({data:l,innerRadius:p=.7,outerRadius:r=1,padAngle:t=0,children:i,className:h,showTooltips:g=!0,isLoading:f=!1}){let m=(0,ce.useRef)(null);return(0,d.jsx)(oe,{children:(0,d.jsx)("div",{className:H(B.chartContainer,h),ref:m,children:f?(0,d.jsx)("div",{className:B.loading}):(0,d.jsxs)(d.Fragment,{children:[g&&(0,d.jsx)(se,{className:B.tooltipContainer,render:({data:y})=>y?(0,d.jsx)(de,{children:(0,d.jsx)(le,{title:y.id,subtitle:`${y.value}%`})}):(0,d.jsx)(d.Fragment,{}),offsetY:10}),(0,d.jsx)(ie,{ref:m,children:(0,d.jsx)(ne,{ref:m,data:l,variant:"FULL",innerRadius:p,outerRadius:r,padAngle:t,margin:ve,children:i})})]})})})}var me=c(T(),1);var P={modalContent:"N3l5B",modalTitle:"OuV8o"};var L=c(u(),1);function S({onClose:l=()=>{},isOpen:p=!1,title:r="Help Modal",size:t=K.MEDIUM,headerBorder:i=Y.NONE,footerBorder:h=q.NONE,children:g}){let f=(0,me.useCallback)(m=>{m||l()},[l]);return(0,L.jsx)($,{includeCloseButton:!0,onOpenChange:f,open:p,size:t,headerBorder:i,footerBorder:h,header:typeof r=="string"?(0,L.jsx)(s,{variant:n.H3,className:P.modalTitle,children:r}):r,children:(0,L.jsx)("div",{className:P.modalContent,children:g})})}var o={wrapper:"qdQIy",body:"Mx-GN",container:"l-iQZ",spinner:"_7cj-b",content:"Vj4On",header:"SuQLF",headerLeft:"Yix3U",headerRight:"_-7DdT",helpButton:"_5SeS3",headerText:"acqVv",headerSubText:"Snak0",chart:"rFh3j",legends:"LbMRQ",legendItem:"fbEyq",legendItemColor:"CAnAZ",legendItemText:"ABYFS"};var e=c(u(),1);function I({title:l,subHeading:p,showHelpModal:r=!0,data:t,padAngle:i=.05,helpContent:h,isLoading:g,isError:f,helpTitle:m,showLegends:y=!0,showTooltips:A=!0,errorCode:he=1e5}){let{t:x}=D(),F=(0,R.useMemo)(()=>t?.length?t.map(C=>({...C,id:x(C.id)})):[],[t,x]),[ge,_]=(0,R.useState)(!1),fe=()=>{_(!0)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S,{isOpen:ge,onClose:()=>{_(!1)},title:m,children:(0,e.jsx)(s,{variant:n.DEFAULT,children:h})}),(0,e.jsx)("div",{className:o.wrapper,children:(0,e.jsxs)(X,{bodyPadding:Z.NONE,className:o.container,children:[(0,e.jsxs)("div",{className:o.header,children:[(0,e.jsxs)("div",{className:o.headerLeft,children:[(0,e.jsx)(s,{variant:n.H4,className:o.headerText,children:l}),p&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ae,{variant:"line--vertical",spacing:8}),(0,e.jsx)(s,{variant:n.H5,className:o.headerSubText,children:p})]})]}),r&&(0,e.jsx)("div",{className:o.headerRight,children:(0,e.jsx)(W,{iconName:"question",iconMode:"line",className:o.helpButton,shape:V.ROUND,variant:k.TERTIARY,size:w.LARGE,type:"button","aria-label":"Open credit usage help modal",onClick:fe})})]}),(0,e.jsx)("div",{className:o.body,children:g?(0,e.jsx)("div",{className:o.spinner,children:(0,e.jsx)(G,{size:z.LARGE})}):f?(0,e.jsx)(U,{errorCode:he}):t===void 0||t?.length===0?(0,e.jsx)(U,{errorCode:14e4}):(0,e.jsxs)("div",{className:o.content,children:[(0,e.jsx)("div",{className:o.chart,children:(0,e.jsx)(M,{padAngle:i,data:F,showTooltips:A})}),(0,e.jsx)("div",{className:o.legends,children:y&&F.map((C,ye)=>(0,e.jsxs)("div",{className:o.legendItem,children:[(0,e.jsxs)("div",{className:o.legendItemColor,children:[(0,e.jsx)(Q,{name:"checkbox-blank-circle",mode:"fill",style:{color:C.fill}}),(0,e.jsx)(s,{variant:n.DEFAULT,className:o.legendItemText,children:C.id})]}),(0,e.jsx)("div",{className:o.legendItemValue,children:(0,e.jsxs)(s,{variant:n.DEFAULT_SEMIBOLD,children:[C.value,"%"]})})]},`${C.id}-${ye}`))})]})})]})})]})}var a=c(u(),1);function De({isOrgView:l=!1}){let p=ee()?.currentPlanType==="Enterprise",{t:r}=D(),{theme:t}=j(),i=(0,ue.useMemo)(()=>t===J.DARK_MODE?b.dark:b.light,[t]),{data:h,isLoading:g,isError:f}=N(l,"usageByQuery",[...i]),{data:m,isLoading:y,isError:A}=N(l,"usageByInterface",[...i]);return(0,a.jsxs)("div",{className:O.usageBySection,children:[(0,a.jsx)(I,{title:r("Query Credit Consumption"),subHeading:r("Past 30 Days"),isLoading:g,isError:f,data:h,helpTitle:r("Query Credit Consumption"),errorCode:140001,helpContent:(0,a.jsxs)("div",{className:O.helpContent,children:[(0,a.jsx)(s,{as:"p",variant:n.DEFAULT,children:r("When you execute a search in the Platform or API, it consumes credits.")}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:[(0,a.jsx)(s,{variant:n.DEFAULT_SEMIBOLD,children:r("Entity Lookup")}),":\xA0",(0,a.jsx)(E,{i18nKey:"Consumes <0>{{creditsNum}}</0> credit.",components:[(0,a.jsx)(s,{variant:n.DEFAULT_SEMIBOLD})],count:v.entityLookup,values:{creditsNum:v.entityLookup}}),(0,a.jsx)("br",{}),r("A search for a specific entity\u2014such as an organization, domain, certificate, or host etc.")]}),(0,a.jsxs)("li",{children:[(0,a.jsx)(s,{variant:n.DEFAULT_SEMIBOLD,children:r("Standard Queries")}),":"," ",(0,a.jsx)(E,{i18nKey:"Consumes <0>{{creditsNum}}</0> credit.",components:[(0,a.jsx)(s,{variant:n.DEFAULT_SEMIBOLD})],count:v.standardQueries,values:{creditsNum:v.standardQueries}}),(0,a.jsx)("br",{}),r("A query that doesn't use regular expressions (regex).")]}),(0,a.jsxs)("li",{children:[(0,a.jsx)(s,{variant:n.DEFAULT_SEMIBOLD,children:r("Advanced Queries")}),":"," ",(0,a.jsx)(E,{i18nKey:"Consumes <0>{{creditsNum}}</0> credit.",components:[(0,a.jsx)(s,{variant:n.DEFAULT_SEMIBOLD})],count:v.advancedQueries,values:{creditsNum:v.advancedQueries}}),(0,a.jsx)("br",{}),r("Typically, a search that leverages one or more regular expressions.")]})]})]})}),!p&&(0,a.jsx)(I,{title:r("Usage by Interface"),subHeading:r("Past 30 Days"),showHelpModal:!1,isLoading:y,isError:A,data:m,errorCode:140002})]})}export{De as a};
