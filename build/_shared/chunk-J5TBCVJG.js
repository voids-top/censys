import{b as _e}from"/censys/build/_shared/chunk-WMKH6XX3.js";import{a as Ae}from"/censys/build/_shared/chunk-3JU625ZU.js";import{a as Re}from"/censys/build/_shared/chunk-FSKKJDZY.js";import{a as Pe}from"/censys/build/_shared/chunk-EYKPJWWG.js";import{b as Oe}from"/censys/build/_shared/chunk-FQAS3FYV.js";import{a as fe}from"/censys/build/_shared/chunk-P2FXGQA2.js";import{f as Le}from"/censys/build/_shared/chunk-FH7VNUY3.js";import{A as G,B as A,C as Q,aa as ye,ba as de,da as he,ka as Me,na as Ne,y as P,z as U}from"/censys/build/_shared/chunk-UYH4GQ7Z.js";import{a as w,c as M}from"/censys/build/_shared/chunk-XJAPXWKX.js";import{d as c}from"/censys/build/_shared/chunk-2QEWK57A.js";var ae=c(w(),1);var V=c(w(),1);var De={intersection:"gA71Z"};var He=c(M(),1);function ge({children:e,config:t}){let r=(0,V.useRef)(null),[s,m]=(0,V.useState)(!1);return(0,V.useEffect)(()=>{if(!r.current)return;let i=new IntersectionObserver(f=>{f.some(o=>o.isIntersecting)&&(m(!0),i.disconnect())},t);return i.observe(r.current),()=>{i.disconnect()}},[]),(0,He.jsx)("div",{ref:r,className:P(s&&De.intersection),children:s?e:null})}var T=c(w(),1);var we=["image/bmp","image/jpeg","image/png","image/webp"];var J={handle:"handle",protocol:"protocol",explicitContent:"explicit_content"};var at=(e,t)=>`/api/image?${J.handle}=${e}&${J.protocol}=${t}`;function Z(e,t,r,s){let[m,i]=(0,T.useState)(null),[f,p]=(0,T.useState)(new Set),[o,I]=(0,T.useState)(!0),[E,y]=(0,T.useState)(s??new Set),[d,g]=(0,T.useState)(r??new Set),x=e?.filter(v=>!f.has(v.src))||[],S=(0,T.useCallback)((v,B)=>{if(!e.length)return;if(B==="explicit_content"){a(v);return}let O=m!==null?m:t,X=e[O].src;if(p(_=>new Set([..._,X])),e.filter(_=>!f.has(_.src)&&_.src!==X).length===0)return;let F=(O+1)%e.length,Y=0;for(;Y<e.length;){let _=e[F];if(_&&!f.has(_.src)&&_.src!==X)break;F=(F+1)%e.length,Y++}Y<e.length&&i(F)},[e,f,m,t,x.length]),a=(0,T.useCallback)(v=>{i(null),I(!1),y(B=>{let O=new Set(B);return O.add(v),O})},[]),l=(0,T.useCallback)(v=>{g(B=>{let O=new Set(B);return O.add(v),O})},[]),C=(0,T.useCallback)(()=>{i(null),I(!1)},[]),h=(0,T.useCallback)(()=>{i(null)},[]),R=(0,T.useCallback)(()=>{i(null),p(new Set),I(!0)},[]);return(0,T.useEffect)(()=>{r&&g(r),s&&y(s)},[r,s]),{availableScreenshots:x,isImageLoading:o,explicitContentErrorIndexes:E,approvedExplicitContentIndexes:d,handleImageError:S,handleImageLoad:C,resetFallbackIndex:h,resetErrorHandling:R,handleExplicitContentError:a,handleShowExplicitContent:l}}var j=c(w(),1);function se(e,t,r,s){let m=(0,j.useCallback)(()=>{let o=t>0?t-1:e.length-1;r(o),s?.()},[t,e.length,r,s]),i=(0,j.useCallback)(()=>{let o=t<e.length-1?t+1:0;r(o),s?.()},[t,e.length,r,s]),f=(0,j.useCallback)(o=>{r(o),s?.()},[r,s]),p=(0,j.useCallback)(o=>{if(e?.length)switch(o.key){case"ArrowLeft":o.preventDefault(),m();return;case"ArrowRight":o.preventDefault(),i();return;default:return}},[e.length,m,i]);return{handlePrevious:m,handleNext:i,handleThumbnailClick:f,handleKeyDown:p}}var D={carouselContainer:"OqrC7",largeImageContainer:"jYf96",largeImageButton:"vAQle",largeImage:"cmbgM",thumbnails:"GWMXs",noScreenshots:"bYTvy",noScreenshotsIcon:"NNSZ-",explicitContentErrorContainer:"-bdB6"};function Ue(e){let t=Math.max(48,e*.133);return{imageHeight:.75*e,thumbnailWidth:t,thumbnailHeight:t*.75}}var L=c(w(),1);var q={container:"tpC3T",imageLoading:"kzk2K",imageLoaded:"b-U5v",errorContainer:"_2xQtD",loadingContainer:"WDHMM"};var z=c(M(),1);function k({src:e,alt:t,className:r,shouldShowExplicitContent:s,onLoad:m,onError:i,...f}){let[p,o]=(0,L.useState)(null),I=(0,L.useRef)(null),E=Le(),y=Oe("APP_SITE_URL"),d=(0,L.useMemo)(()=>{if(!E?.organizationId)return e;let h=new URL(e,y);return h.searchParams.has(fe)||h.searchParams.set(fe,E.organizationId),s&&h.searchParams.set(J.explicitContent,"true"),h.toString()},[e,E?.organizationId,s]),{state:g,data:x,error:S}=Ae(()=>d,[d],{headers:{accept:we.join(", ")}});(0,L.useEffect)(()=>{if(g===1&&x){let h=URL.createObjectURL(x);o(h)}},[g,x]),(0,L.useEffect)(()=>()=>{p&&URL.revokeObjectURL(p)},[p]);let a=(0,L.useCallback)(()=>{m?.()},[m]);(0,L.useEffect)(()=>{if(g===2){let h={code:"unknown"};S!==null&&typeof S=="object"&&"code"in S&&(h=S),i?.(h.code)}},[g,S,i]);let l=g===0,C=g===2;return(0,z.jsxs)("div",{className:q.container,"data-testid":"async-image-container",children:[C&&!l&&(0,z.jsx)("div",{className:q.errorContainer,"data-testid":"error-container",role:"status","aria-live":"assertive","aria-label":`Failed to load image: ${t}`,children:(0,z.jsx)(U,{name:"image",mode:"line",size:"2xl"})}),l&&(0,z.jsx)("div",{className:P(q.loadingContainer,Re.skeletonPulse),"data-testid":"loading-container",role:"status","aria-busy":"true","aria-label":`Loading image: ${t}`,"aria-live":"polite"}),!C&&p&&(0,z.jsx)("img",{ref:I,src:p,alt:t,onLoad:a,className:P(l?q.imageLoading:q.imageLoaded,r),loading:"lazy",decoding:"async",...f},d)]})}var ie={errorContent:"_8liNq",errorIcon:"_0ONWg",errorContentText:"Fq0yN"};var W=c(M(),1);function ee({onApprovedExplicitContent:e}){return(0,W.jsxs)("div",{className:ie.errorContent,children:[(0,W.jsx)(U,{name:"eye-off",mode:"line",className:ie.errorIcon}),(0,W.jsxs)("div",{className:ie.errorContentText,children:[(0,W.jsx)(A,{variant:G.DEFAULT_SEMIBOLD,children:"Sensitive Content"}),(0,W.jsx)(A,{children:"This screenshot may contain sensitive content which some people may find offensive or disturbing."})]}),(0,W.jsx)(ye,{onClick:e,variant:Q.DEFAULT,children:"View Screenshot"})]})}var u=c(w(),1);var le={x:0,y:0};var H={modal:"XvbTR",content:"XuD3d",modalControls:"FEzJ2",imageContainer:"mWJX-",image:"G974N",dragging:"Gii-6",thumbnails:"ZKbgW",explicitContentErrorContainer:"Cbvn5"};var oe=c(w(),1);var ce=c(w(),1);function ke(e,t={inline:"center",block:"nearest"}){let r=Pe("(prefers-reduced-motion: reduce)"),s=(0,ce.useCallback)(()=>{if(!e.current)return;let m=r?"auto":"smooth";e.current.scrollIntoView?.({behavior:m,...t})},[e,t,r]);(0,ce.useEffect)(()=>{s()},[e,s])}var te={thumbnailButton:"iCUyJ",thumbnailImage:"PTRk1",selected:"v-VgN"};var K=c(M(),1);function re({screenshots:e,className:t,selectedIndex:r,approvedExplicitContentIndexes:s,explicitContentErrorIndexes:m,onSelectedChange:i,onError:f,thumbnailWidth:p,thumbnailHeight:o,maxWidth:I}){let E=(0,oe.useRef)([]);ke({current:r!==null?E.current[r]:null});let{handleImageError:y,explicitContentErrorIndexes:d,approvedExplicitContentIndexes:g}=Z(e,r??0,s,m),x=(0,oe.useCallback)((a,l)=>{y(a,l),f(a,l)},[y,f]),S=(0,oe.useCallback)(a=>{i(a)},[i,i]);return(0,K.jsx)("div",{className:t,style:{maxWidth:I},role:"listbox","aria-label":"Screenshot thumbnails","aria-orientation":"horizontal",tabIndex:-1,children:e.map((a,l)=>{let C=a.description??`Thumbnail of screenshot ${l+1} of ${e.length}`;return(0,K.jsx)("button",{type:"button",ref:h=>{E.current[l]=h},className:l===r?P(te.thumbnailButton,te.selected):te.thumbnailButton,style:{minWidth:p,minHeight:o},"aria-label":`Show screenshot ${l+1} of ${e.length}`,"data-index":l,tabIndex:l===r?0:-1,onClick:()=>S(l),children:d.has(l)&&!g.has(l)?(0,K.jsx)(A,{children:(0,K.jsx)(U,{name:"eye-off",mode:"line"})}):(0,K.jsx)(k,{src:a.src,alt:C,className:te.thumbnailImage,style:{width:p,height:o},shouldShowExplicitContent:g.has(l),onError:h=>x(l,h)})},a.src)})})}var b=c(M(),1);function Se({selectedIndex:e,screenshots:t,assetName:r,explicitContentErrorIndexes:s,approvedExplicitContentIndexes:m,isOpen:i,onClose:f,onApprovedExplicitContent:p}){let[o,I]=(0,u.useState)(1),[E,y]=(0,u.useState)(le),[d,g]=(0,u.useState)(!1),[x,S]=(0,u.useState)(le),[a,l]=(0,u.useState)(e),[C,h]=(0,u.useState)(null),R=(0,u.useCallback)(()=>{if(C){let n=C.getBoundingClientRect();return{x:n.width/2,y:n.height/2}}return le},[C]),v=(0,u.useCallback)(()=>{I(n=>Math.min(n*1.25,5))},[]),B=(0,u.useCallback)(()=>{I(n=>Math.max(n/1.25,1))},[]),O=(0,u.useCallback)(()=>{I(1);let n=R();y(n)},[R]),X=(0,u.useCallback)(n=>{g(!0),S({x:n.clientX-E.x,y:n.clientY-E.y})},[E]),Ie=(0,u.useCallback)(n=>{d&&y({x:n.clientX-x.x,y:n.clientY-x.y})},[d,x]),F=(0,u.useCallback)(()=>{g(!1)},[]),Y=(0,u.useCallback)(n=>{let ue=n.deltaY>0?.9:1.1;I($e=>Math.max(1,Math.min($e*ue,5)))},[]),{handleThumbnailClick:_,handleKeyDown:Be}=se(t,a,l,O),{handleShowExplicitContent:xe,handleImageError:Ce,explicitContentErrorIndexes:ve,approvedExplicitContentIndexes:pe}=Z(t,a,m,s),Fe=(0,u.useCallback)(n=>{xe(n),p(n)},[xe,p]);(0,u.useEffect)(()=>{let n=R();y(n)},[a,R]),(0,u.useEffect)(()=>{if(C){let n=new ResizeObserver(()=>{let ue=R();y(ue)});return n.observe(C),()=>n.disconnect()}},[R]),(0,u.useEffect)(()=>(l(e),()=>{l(e),O()}),[e]);let Te=Math.round(o*100),ze=`translate(-50%, -50%) scale(${o}) translate(${E.x/o}px, ${E.y/o}px)`;return(0,b.jsx)(Ne,{size:Me.LARGE,contentProps:{className:H.modal,onKeyDown:n=>{n.stopPropagation(),Be(n)}},open:i,onOpenChange:n=>{n||f()},header:r&&(0,b.jsx)(A,{variant:G.H2,children:r}),footerActions:t.length>1&&(0,b.jsx)(re,{screenshots:t,className:H.thumbnails,selectedIndex:a,approvedExplicitContentIndexes:pe,explicitContentErrorIndexes:ve,onSelectedChange:_,onError:Ce,thumbnailWidth:64,thumbnailHeight:48}),children:(0,b.jsx)("div",{className:H.content,children:ve.has(a)&&!pe.has(a)?(0,b.jsx)("div",{className:H.explicitContentErrorContainer,children:(0,b.jsx)(ee,{onApprovedExplicitContent:()=>Fe(a)})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:H.modalControls,children:[(0,b.jsx)(he,{iconName:"zoom-out",iconMode:"line",onClick:B,variant:Q.GHOST,"aria-label":`Zoom out (current zoom: ${Te}%)`,disabled:o<=1,size:de.MEDIUM}),(0,b.jsx)(he,{iconName:"zoom-in",iconMode:"line",onClick:v,variant:Q.GHOST,"aria-label":`Zoom in (current zoom: ${Te}%)`,disabled:o>=5,size:de.MEDIUM})]}),(0,b.jsx)("div",{ref:h,className:H.imageContainer,onWheel:Y,onMouseDown:X,onMouseMove:Ie,onMouseUp:F,onMouseLeave:F,children:(0,b.jsx)(k,{src:t[a].src,alt:`Screenshot ${a+1} of ${t.length}`,className:P(H.image,d&&H.dragging),style:{transform:ze},onError:n=>Ce(a,n),shouldShowExplicitContent:pe.has(a)})})]})})})}var N=c(M(),1);function me({assetName:e,screenshots:t,width:r=480}){let[s,m]=(0,ae.useState)(!1),[i,f]=(0,ae.useState)(null),p=(0,ae.useRef)(null),o=i!==null?i:0,{imageHeight:I,thumbnailWidth:E,thumbnailHeight:y}=Ue(r),{availableScreenshots:d,isImageLoading:g,explicitContentErrorIndexes:x,approvedExplicitContentIndexes:S,handleImageError:a,handleImageLoad:l,resetFallbackIndex:C,handleShowExplicitContent:h}=Z(t,o),{handleKeyDown:R}=se(d,i??0,v=>{f(v),C()});return t?.length?d.length===0?(0,N.jsxs)("div",{className:D.noScreenshots,role:"status","aria-live":"polite","aria-label":"No screenshots available",style:{width:r,height:I},children:[(0,N.jsx)(U,{name:"file-damage",mode:"line",className:D.noScreenshotsIcon}),(0,N.jsx)(A,{children:"No screenshots available for this service"})]}):(0,N.jsxs)("div",{ref:p,className:D.carouselContainer,role:"region","aria-label":"Screenshot carousel",tabIndex:0,onKeyDown:R,children:[(0,N.jsx)("div",{className:D.largeImageContainer,style:{width:r,height:I},children:x.has(o)&&!S.has(o)?(0,N.jsx)("div",{className:D.explicitContentErrorContainer,children:(0,N.jsx)(ee,{onApprovedExplicitContent:()=>{p.current?.focus(),h(o)}})}):(0,N.jsx)("button",{type:"button",onClick:()=>m(!0),className:D.largeImageButton,tabIndex:-1,children:(0,N.jsx)(ge,{children:(0,N.jsx)(k,{src:d[o].src,alt:d[o].description??`Screenshot ${o+1} of ${d.length}`,className:D.largeImage,onError:v=>a(o,v),onLoad:l,shouldShowExplicitContent:S.has(o)})})})}),d.length>1&&!g&&(0,N.jsx)(re,{screenshots:d,className:D.thumbnails,selectedIndex:o,approvedExplicitContentIndexes:S,onSelectedChange:v=>{f(v),C()},onError:a,thumbnailWidth:E,thumbnailHeight:y,maxWidth:r}),(0,N.jsx)(Se,{selectedIndex:o,screenshots:d,assetName:e,isOpen:s,onClose:()=>{p.current?.focus(),m(!1)},explicitContentErrorIndexes:x,approvedExplicitContentIndexes:S,onApprovedExplicitContent:h})]}):null}var be={container:"CQbsC",header:"_3uM1S"};var $=c(M(),1);function Ye({assetName:e,screenshots:t}){return(0,$.jsxs)("div",{className:be.container,children:[(0,$.jsxs)("div",{className:be.header,children:[(0,$.jsx)(A,{variant:G.H4,children:"Screenshots"}),(0,$.jsx)(_e,{})]}),(0,$.jsx)(me,{assetName:e,screenshots:t})]})}export{at as a,me as b,Ye as c};
